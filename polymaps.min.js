if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(o){function Q(){for(var e=0;e<Q.maps.length;e++)Q.maps[e].resize()}function U(e){return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function V(e){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360))}function Z(e,f){if(e.row>f.row){var a=e;e=f;f=a}return{x0:e.column,y0:e.row,x1:f.column,y1:f.row,dx:f.column-e.column,dy:f.row-e.row}}function ca(e,f,a,g,i){a=Math.max(a,Math.floor(f.y0));g=Math.min(g,Math.ceil(f.y1));if(e.x0==f.x0&&e.y0==f.y0?e.x0+f.dy/e.dy*e.dx<f.x1:e.x1-f.dy/
e.dy*e.dx<f.x0){var c=e;e=f;f=c}c=e.dx/e.dy;var d=f.dx/f.dy,m=e.dx>0,n=f.dx<0;for(a=a;a<g;a++){var s=c*Math.max(0,Math.min(e.dy,a+m-e.y0))+e.x0;i(Math.floor(d*Math.max(0,Math.min(f.dy,a+n-f.y0))+f.x0),Math.ceil(s),a)}}function da(e,f,a,g,i,c){var d=Z(e,f);f=Z(f,a);e=Z(a,e);if(d.dy>f.dy){a=d;d=f;f=a}if(d.dy>e.dy){a=d;d=e;e=a}if(f.dy>e.dy){a=f;f=e;e=a}d.dy&&ca(e,d,g,i,c);f.dy&&ca(e,f,g,i,c)}o.version="2.0+2.3+5";var Y={x:0,y:0};o.id=function(){var e=0;return function(){return++e}}();o.svg=function(e){return document.createElementNS(o.ns.svg,
e)};o.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};o.transform=function(e,f,a,g,i,c){var d={},m,n,s;if(!arguments.length){e=1;f=i=a=0;g=1;c=0}d.zoomFraction=function(l){if(!arguments.length)return n;n=l;m=Math.floor(n+Math.log(Math.sqrt(e*e+f*f+a*a+g*g))/Math.log(2));s=Math.pow(2,-m);return d};d.apply=function(l){var k=Math.pow(2,-l.zoom),v=Math.pow(2,l.zoom-m);return{column:(e*l.column*k+a*l.row*k+i)*v,row:(f*l.column*k+g*l.row*k+c)*v,zoom:l.zoom-m}};d.unapply=function(l){var k=
Math.pow(2,-l.zoom),v=Math.pow(2,l.zoom+m);return{column:(l.column*k*g-l.row*k*a-i*g+c*a)/(e*g-f*a)*v,row:(l.column*k*f-l.row*k*e-i*f+c*e)/(a*f-g*e)*v,zoom:l.zoom+m}};d.toString=function(){return"matrix("+[e*s,f*s,a*s,g*s].join(" ")+" 0 0)"};return d.zoomFraction(0)};o.cache=function(e,f){function a(k){l--;f&&f(k);delete d[k.key];if(k.next)k.next.prev=k.prev;else if(n=k.prev)n.next=null;if(k.prev)k.prev.next=k.next;else if(m=k.next)m.prev=null}function g(){for(var k=n;l>s;k=k.prev){if(!k)break;k.lock||
a(k)}}var i={},c={},d={},m=null,n=null,s=64,l=0;i.peek=function(k){return d[[k.zoom,k.column,k.row].join("/")]};i.load=function(k,v){var y=[k.zoom,k.column,k.row].join("/"),x=d[y];if(x){if(x.prev){if(x.prev.next=x.next)x.next.prev=x.prev;else n=x.prev;x.prev=null;x.next=m;m=m.prev=x}x.lock=1;return c[y]=x}x={key:y,column:k.column,row:k.row,zoom:k.zoom,next:m,prev:null,lock:1};e.call(null,x,v);c[y]=d[y]=x;if(m)m.prev=x;else n=x;m=x;l++;g();return x};i.unload=function(k){if(!(k in c))return false;var v=
c[k];v.lock=0;delete c[k];v.request&&v.request.abort(false)?a(v):g();return v};i.locks=function(){return c};i.size=function(k){if(!arguments.length)return s;s=k;g();return i};return i};o.url=function(e){function f(g){var i=g.zoom<0?1:1<<g.zoom,c=g.column%i;if(c<0)c+=i;return e.replace(/{(.)}/g,function(d,m){switch(m){case "S":return a[(Math.abs(g.zoom)+g.row+c)%a.length];case "Z":return g.zoom;case "X":return c;case "Y":return g.row;case "B":var n=o.map.coordinateLocation({row:g.row,column:c,zoom:g.zoom}),
s=o.map.coordinateLocation({row:g.row+1,column:c+1,zoom:g.zoom}),l=Math.ceil(Math.log(g.zoom)/Math.LN2);return s.lat.toFixed(l)+","+n.lon.toFixed(l)+","+n.lat.toFixed(l)+","+s.lon.toFixed(l)}return m})}var a=[];f.template=function(g){if(!arguments.length)return e;e=g;return f};f.hosts=function(g){if(!arguments.length)return a;a=g;return f};return f};o.dispatch=function(e){var f={};e.on=function(a,g){for(var i=f[a]||(f[a]=[]),c=0;c<i.length;c++)if(i[c].handler==g)return e;i.push({handler:g,on:true});
return e};e.off=function(a,g){var i=f[a];if(i)for(var c=0;c<i.length;c++){var d=i[c];if(d.handler==g){d.on=false;i.splice(c,1);break}}return e};return function(a){var g=f[a.type];if(g){g=g.slice();for(var i=0;i<g.length;i++){var c=g[i];c.on&&c.handler.call(e,a)}}}};o.queue=function(){function e(){if(!(i>=c||!g.length)){i++;g.pop()()}}function f(d){for(var m=0;m<g.length;m++)if(g[m]==d){g.splice(m,1);return true}return false}function a(d,m,n){function s(){l=new XMLHttpRequest;n&&l.overrideMimeType(n);
l.open("GET",d,true);l.onreadystatechange=function(){if(l.readyState==4){i--;l.status<300&&m(l);e()}};l.send(null)}var l;g.push(s);e();return{abort:function(k){if(f(s))return true;if(k&&l){l.abort();return true}return false}}}var g=[],i=0,c=6;return{text:function(d,m,n){return a(d,function(s){s.responseText&&m(s.responseText)},n)},xml:function(d,m){return a(d,function(n){n.responseXML&&m(n.responseXML)},"application/xml")},json:function(d,m){return a(d,function(n){n.responseText&&m(JSON.parse(n.responseText))},
"application/json")},image:function(d,m,n){function s(){l=document.createElement("img");l.onerror=function(){i--;e()};l.onload=function(){i--;n(l);e()};l.src=m;d.setAttributeNS(o.ns.xlink,"href",m)}var l;g.push(s);e();return{abort:function(k){if(f(s))return true;if(k&&l){l.src="about:";return true}return false}}}}}();o.map=function(){function e(){if(v)if(s<v[0])s=v[0];else if(s>v[1])s=v[1];l=s-(s=Math.round(s));k=Math.pow(2,l)}function f(){if(q){var j=45/Math.pow(2,s+l-3),r=Math.max(Math.abs(C*d.x+
x*d.y),Math.abs(h*d.x+F*d.y)),z=U(w-r*j/m.y);r=U(t+r*j/m.y);n.lat=Math.max(z,Math.min(r,n.lat));z=Math.max(Math.abs(C*d.y+x*d.x),Math.abs(h*d.y+F*d.x));n.lon=Math.max(q[0].lon-z*j/m.x,Math.min(q[1].lon+z*j/m.x,n.lon))}}var a={},g,i,c=Y,d=Y,m={x:256,y:256},n={lat:37.76487,lon:-122.41948},s=12,l=0,k=1,v=[1,18],y=0,x=1,C=0,F=1,h=0,w=-180,t=180,q=[{lat:U(w),lon:-Infinity},{lat:U(t),lon:Infinity}];a.locationCoordinate=function(j){j=o.map.locationCoordinate(j);var r=Math.pow(2,s);j.column*=r;j.row*=r;j.zoom+=
s;return j};a.coordinateLocation=o.map.coordinateLocation;a.coordinatePoint=function(j,r){var z=Math.pow(2,s-r.zoom),E=Math.pow(2,s-j.zoom),A=(r.column*z-j.column*E)*m.x*k;z=(r.row*z-j.row*E)*m.y*k;return{x:d.x+x*A-C*z,y:d.y+C*A+x*z}};a.pointCoordinate=function(j,r){var z=Math.pow(2,s-j.zoom),E=(r.x-d.x)/k,A=(r.y-d.y)/k;return{column:j.column*z+(F*E-h*A)/m.x,row:j.row*z+(h*E+F*A)/m.y,zoom:s}};a.locationPoint=function(j){var r=Math.pow(2,s+l-3)/45,z=(j.lon-n.lon)*r*m.x;j=(V(n.lat)-V(j.lat))*r*m.y;
return{x:d.x+x*z-C*j,y:d.y+C*z+x*j}};a.pointLocation=function(j){var r=45/Math.pow(2,s+l-3),z=(j.x-d.x)*r;j=(j.y-d.y)*r;return{lon:n.lon+(F*z-h*j)/m.x,lat:U(V(n.lat)-(h*z+F*j)/m.y)}};var B=o.svg("rect");B.setAttribute("visibility","hidden");B.setAttribute("pointer-events","all");a.container=function(j){if(!arguments.length)return g;g=j;g.setAttribute("class","map");g.appendChild(B);return a.resize()};a.focusableParent=function(){for(var j=g;j;j=j.parentNode)if(j.tabIndex>=0)return j;return window};
a.mouse=function(j){var r=(g.ownerSVGElement||g).createSVGPoint();if($<0&&(window.scrollX||window.scrollY)){var z=document.body.appendChild(o.svg("svg"));z.style.position="absolute";z.style.top=z.style.left="0px";var E=z.getScreenCTM();$=!(E.f||E.e);document.body.removeChild(z)}if($){r.x=j.pageX;r.y=j.pageY}else{r.x=j.clientX;r.y=j.clientY}return r.matrixTransform(g.getScreenCTM().inverse())};a.size=function(j){if(!arguments.length)return c;i=j;return a.resize()};a.resize=function(){if(i){c=i;Q.remove(a)}else{var j=
g.ownerSVGElement||g;if(j.offsetWidth==null){B.setAttribute("width","100%");B.setAttribute("height","100%");j=B}b=j.getBoundingClientRect();c={x:b.width,y:b.height};Q.add(a)}B.setAttribute("width",c.x);B.setAttribute("height",c.y);d={x:c.x/2,y:c.y/2};f();a.dispatch({type:"resize"});return a};a.tileSize=function(j){if(!arguments.length)return m;m=j;a.dispatch({type:"move"});return a};a.center=function(j){if(!arguments.length)return n;n=j;f();a.dispatch({type:"move"});return a};a.panBy=function(j){var r=
45/Math.pow(2,s+l-3),z=j.x*r;j=j.y*r;return a.center({lon:n.lon+(h*j-F*z)/m.x,lat:U(V(n.lat)+(h*z+F*j)/m.y)})};a.centerRange=function(j){if(!arguments.length)return q;if(q=j){w=q[0].lat>-90?V(q[0].lat):-Infinity;t=q[0].lat<90?V(q[1].lat):Infinity}else{w=-Infinity;t=Infinity}f();a.dispatch({type:"move"});return a};a.zoom=function(j){if(!arguments.length)return s+l;s=j;e();return a.center(n)};a.zoomBy=function(j,r,z){if(arguments.length<2)return a.zoom(s+l+j);if(arguments.length<3)z=a.pointLocation(r);
s=s+l+j;e();var E=a.locationPoint(z);return a.panBy({x:r.x-E.x,y:r.y-E.y})};a.zoomRange=function(j){if(!arguments.length)return v;v=j;return a.zoom(s+l)};a.extent=function(j){if(!arguments.length)return[a.pointLocation({x:0,y:c.y}),a.pointLocation({x:c.x,y:0})];var r=a.locationPoint(j[0]),z=a.locationPoint(j[1]),E=Math.max((z.x-r.x)/c.x,(r.y-z.y)/c.y);r=a.pointLocation({x:(r.x+z.x)/2,y:(r.y+z.y)/2});s=s+l-Math.log(E)/Math.log(2);e();return a.center(r)};a.angle=function(j){if(!arguments.length)return y;
y=j;x=Math.cos(y);C=Math.sin(y);F=Math.cos(-y);h=Math.sin(-y);f();a.dispatch({type:"move"});return a};a.add=function(j){j.map(a);return a};a.remove=function(j){j.map(null);return a};a.dispatch=o.dispatch(a);return a};Q.maps=[];Q.add=function(e){for(var f=0;f<Q.maps.length;f++)if(Q.maps[f]==e)return;Q.maps.push(e)};Q.remove=function(e){for(var f=0;f<Q.maps.length;f++)if(Q.maps[f]==e){Q.maps.splice(f,1);return}};window.addEventListener("resize",Q,false);o.map.locationCoordinate=function(e){var f=1/
360;return{column:(e.lon+180)*f,row:(180-V(e.lat))*f,zoom:0}};o.map.coordinateLocation=function(e){var f=45/Math.pow(2,e.zoom-3);return{lon:f*e.column-180,lat:U(180-f*e.row)}};var $=/WebKit/.test(navigator.userAgent)?-1:0;o.layer=function(e,f){function a(h){for(var w=C[0].nextSibling;x<h;x++){v.insertBefore(C[-4],w);v.insertBefore(C[2],w);v.insertBefore(C[1],w);for(var t=C[-4],q=-4;q<2;)C[q]=C[++q];C[q]=t}}function g(h){for(var w=C[0].nextSibling;x>h;x--){v.insertBefore(C[-1],w);v.insertBefore(C[2],
C[-4]);for(var t=C[2],q=2;q>-4;)C[q]=C[--q];C[q]=t}}function i(){function h(L){var H=L.zoom,R=H<0?1:1<<H,S=L.column%R,u=L.row;if(S<0)S+=R;return{locationPoint:function(D){D=o.map.locationCoordinate(D);var G=Math.pow(2,H-D.zoom);return{x:z.x*(G*D.column-S),y:z.y*(G*D.row-u)}}}}function w(L,H,R){var S=O.zoom,u=2-T,D=4+T;for(L=L;L<H;L++){var G=d.load({column:L,row:R,zoom:S},h);if(!G.ready&&!(G.key in N)){G.proxyRefs={};for(var J,K,M,P=1;P<=u;P++){K=true;for(var W=0,ea=1<<P;W<=ea;W++)for(var aa=0;aa<=
ea;aa++)if((M=d.peek(J={column:(L<<P)+aa,row:(R<<P)+W,zoom:S+P}))&&M.ready){N[M.key]=d.load(J);M.proxyCount++;G.proxyRefs[M.key]=M}else K=false;if(K)break}if(!K)for(P=1;P<=D;P++)if((M=d.peek(J={column:L>>P,row:R>>P,zoom:S-P}))&&M.ready){N[M.key]=d.load(J);M.proxyCount++;G.proxyRefs[M.key]=M;break}}N[G.key]=G}}var t=c.map(),q=t.zoom(),B=q-(q=Math.round(q)),j=t.size(),r=t.angle(),z=t.tileSize(),E=t.locationCoordinate(t.center());n?v.removeAttribute("visibility"):v.setAttribute("visibility","hidden");
if(x!=q){if(x<q)a(q);else if(x>q)g(q);else x=q;for(var A=-4;A<=2;A++){var X=C[A];X.setAttribute("class","zoom"+(A<0?"":"+")+A+" zoom"+(q+A));X.setAttribute("transform","scale("+Math.pow(2,-A)+")")}}v.setAttribute("transform","translate("+j.x/2+","+j.y/2+")"+(r?"rotate("+r/Math.PI*180+")":"")+(B?"scale("+Math.pow(2,B)+")":"")+(y?y.zoomFraction(B):""));var O=t.pointCoordinate(E,Y);A=t.pointCoordinate(E,{x:j.x,y:0});q=t.pointCoordinate(E,j);t=t.pointCoordinate(E,{x:0,y:j.y});if(!B&&!r&&!y){E.column=
(Math.round(z.x*E.column)+(j.x&1)/2)/z.x;E.row=(Math.round(z.y*E.row)+(j.y&1)/2)/z.y}if(y){O=y.unapply(O);A=y.unapply(A);q=y.unapply(q);t=y.unapply(t);E=y.unapply(E)}var T=s?s(O.zoom)-O.zoom:0;if(T){r=Math.pow(2,T);O.column*=r;O.row*=r;A.column*=r;A.row*=r;q.column*=r;q.row*=r;t.column*=r;t.row*=r;O.zoom=A.zoom=q.zoom=t.zoom+=T}B=d.locks();var N={};for(var I in B)B[I].proxyCount=0;if(n&&T>-5&&T<3){r=O.zoom<0?1:1<<O.zoom;if(m){da(O,A,q,0,r,w);da(q,t,O,0,r,w)}else{j=Math.floor((O.column+q.column)/2);
r=Math.max(0,Math.min(r-1,Math.floor((A.row+t.row)/2)));A=Math.min(4,O.zoom);j=j>>A<<A;r=r>>A<<A;w(j,j+1,r)}}for(I in N){A=N[I];r=Math.pow(2,A.level=A.zoom-E.zoom);j=z.x*(A.column-E.column*r);r=z.y*(A.row-E.row*r);A.element.setAttribute("transform","translate("+j+","+r+")")}for(I in B)if(!(I in N)){A=d.unload(I);A.element.parentNode.removeChild(A.element);delete A.proxyRefs}for(I in N){A=N[I];if(A.element.parentNode!=C[A.level]){C[A.level].appendChild(A.element);c.show&&c.show(A)}}}var c={},d=c.cache=
o.cache(e,f).size(512),m=true,n=true,s,l,k,v=o.svg("g"),y,x,C={};v.setAttribute("class","layer");for(var F=-4;F<=-1;F++)C[F]=v.appendChild(o.svg("g"));for(F=2;F>=1;F--)C[F]=v.appendChild(o.svg("g"));C[0]=v.appendChild(o.svg("g"));c.map=function(h){if(!arguments.length)return k;if(k){if(k==h){v.parentNode.appendChild(v);return c}k.off("move",i).off("resize",i);v.parentNode.removeChild(v)}if(k=h){k.container().appendChild(v);c.init&&c.init(v);k.on("move",i).on("resize",i);i()}return c};c.container=
function(){return v};c.id=function(h){if(!arguments.length)return l;l=h;return c};c.visible=function(h){if(!arguments.length)return n;n=h;k&&i();return c};c.transform=function(h){if(!arguments.length)return y;y=h;k&&i();return c};c.zoom=function(h){if(!arguments.length)return s;s=typeof h=="function"||h==null?h:function(){return h};return c};c.tile=function(h){if(!arguments.length)return m;m=h;return c};c.dispatch=o.dispatch(c);c.on("load",function(h){if(h.tile.proxyRefs){for(var w in h.tile.proxyRefs){var t=
h.tile.proxyRefs[w];--t.proxyCount<=0&&d.unload(w)&&t.element.parentNode.removeChild(t.element)}delete h.tile.proxyRefs}});return c};o.image=function(){var e=o.layer(function(a){var g=a.element=o.svg("image"),i=e.map().tileSize();g.setAttribute("preserveAspectRatio","none");g.setAttribute("width",i.x);g.setAttribute("height",i.y);g.setAttribute("opacity",0);if(typeof f=="function")a.request=o.queue.image(g,f(a),function(c){delete a.request;a.ready=true;a.img=c;g.removeAttribute("opacity");e.dispatch({type:"load",
tile:a})});else{a.ready=true;g.setAttributeNS(o.ns.xlink,"href",f);e.dispatch({type:"load",tile:a})}},function(a){a.request&&a.request.abort(true)}),f="about:blank";e.url=function(a){if(!arguments.length)return f;f=typeof a=="string"&&/{.}/.test(a)?o.url(a):a;return e};return e};o.geoJson=function(e){function f(h,w){return h&&h.type in C&&C[h.type](h,w)}function a(h,w){var t=w({lat:h[1],lon:h[0]}),q=o.svg("circle");q.setAttribute("r",4.5);q.setAttribute("cx",t.x);q.setAttribute("cy",t.y);return q}
function g(h,w,t,q){q.push("M");for(var B=0;B<h.length-w;B++){p=t({lat:h[B][1],lon:h[B][0]});q.push(p.x);q.push(",");q.push(p.y);q.push("L")}q.pop()}function i(h,w,t,q){for(var B=0;B<h.length;B++)g(h[B],w,t,q);w&&q.push("Z")}function c(h,w,t,q){for(var B=[],j=0;j<w.length;j++)h(w[j],t,q,B);if(B.length){h=o.svg("path");h.setAttribute("d",B.join(""));return h}}var d=o.layer(function(h,w){function t(B){var j=[];if(B.next)h.request=e(B.next.href,t);switch(B.type){case "FeatureCollection":for(var r=0;r<
B.features.length;r++){var z=B.features[r],E=f(z.geometry,w.locationPoint);E&&j.push({element:q.appendChild(E),data:z})}break;case "Feature":(E=f(B.geometry,w.locationPoint))&&j.push({element:q.appendChild(E),data:B});break;default:(E=f(B,w.locationPoint))&&j.push({element:q.appendChild(E),data:{type:"Feature",geometry:B}});break}h.ready=true;j.push.apply(y[h.key]||(y[h.key]=[]),j);d.dispatch({type:"load",tile:h,features:j})}var q=h.element=o.svg("g");w=w(h);if(x)t({type:"FeatureCollection",features:x});
else h.request=e(typeof n=="function"?n(h):n,t);l&&q.setAttribute("clip-path","url(#"+l+")")},function(h){h.request&&h.request.abort(true);delete y[h.key]}),m=d.container(),n="about:blank",s=true,l,k,v,y={},x;m.setAttribute("fill-rule","evenodd");if(!arguments.length)e=o.queue.json;var C={Point:function(h,w){return a(h.coordinates,w)},MultiPoint:function(h,w){for(var t=o.svg("g"),q=0;q<h.coordinates.length;q++)t.appendChild(a(h.coordinates[q],w));return t},LineString:function(h,w){return c(g,[h.coordinates],
0,w)},MultiLineString:function(h,w){return c(g,h.coordinates,0,w)},Polygon:function(h,w){return c(i,[h.coordinates],1,w)},MultiPolygon:function(h,w){return c(i,h.coordinates||h.coords,1,w)},GeometryCollection:function(h,w){for(var t=o.svg("g"),q=0;q<h.geometries.length;q++){var B=f(h.geometries[q],w);B&&t.appendChild(B)}return t}};d.url=function(h){if(!arguments.length)return n;n=typeof h=="string"&&/{.}/.test(h)?o.url(h):h;typeof n=="string"&&d.tile(false);return d};d.features=function(h){if(!arguments.length)return x;
h&&d.tile(false);x=h;return d};d.clip=function(h){if(!arguments.length)return s;s=h;return d};var F=d.map;d.map=function(h){if(h)if(s&&d.tile()){if(!k){k=m.insertBefore(o.svg("clipPath"),m.firstChild);v=k.appendChild(o.svg("rect"));k.setAttribute("id",l="org.polymaps."+o.id())}var w=h.tileSize();v.setAttribute("width",w.x);v.setAttribute("height",w.y)}else if(k){m.removeChild(k);k=v=l=null}return F.apply(d,arguments)};d.show=function(h){d.dispatch({type:"show",tile:h,features:y[h.key]||[]})};d.reshow=
function(){var h=d.cache.locks();for(var w in h)d.show(h[w])};return d};o.dblclick=function(){function e(c){var d=g.zoom();d=c.shiftKey?Math.ceil(d)-d-1:1-d+Math.floor(d);a==="mouse"?g.zoomBy(d,g.mouse(c)):g.zoomBy(d)}var f={},a="mouse",g,i;f.zoom=function(c){if(!arguments.length)return a;a=c;return f};f.map=function(c){if(!arguments.length)return g;if(g){i.removeEventListener("dblclick",e,false);i=null}if(g=c){i=g.container();i.addEventListener("dblclick",e,false)}return f};return f};o.drag=function(){function e(d){if(!d.shiftKey){c=
{x:d.clientX,y:d.clientY};g.focusableParent().focus();d.preventDefault();document.body.style.setProperty("cursor","move",null)}}function f(d){if(c){g.panBy({x:d.clientX-c.x,y:d.clientY-c.y});c.x=d.clientX;c.y=d.clientY}}var a={},g,i,c;a.map=function(d){if(!arguments.length)return g;if(g){i.removeEventListener("mousedown",e,false);i=null}if(g=d){i=g.container();i.addEventListener("mousedown",e,false)}return a};window.addEventListener("mousemove",f,false);window.addEventListener("mouseup",function(d){if(c){f(d);
c=null;document.body.style.removeProperty("cursor")}},false);return a};o.wheel=function(){function e(){m=null}function f(l){var k=(l.wheelDelta/120||-l.detail)*0.1,v=n.mouse(l);if(ba<0){var y=Date.now(),x=y-i;if(x>9&&Math.abs(l.wheelDelta)/x>=50)ba=1;i=y}if(ba==1)k*=0.03;m||(m=n.pointLocation(v));n.off("move",e);if(c)d==="mouse"?n.zoomBy(k,v,m):n.zoomBy(k);else if(k){y=Date.now();if(y-g>200){k=k>0?+1:-1;d==="mouse"?n.zoomBy(k,v,m):n.zoomBy(k);g=y}}n.on("move",e);l.preventDefault();return false}var a=
{},g=0,i=0,c=true,d="mouse",m,n,s;a.smooth=function(l){if(!arguments.length)return c;c=l;return a};a.zoom=function(l){if(!arguments.length)return d;d=l;return a};a.map=function(l){if(!arguments.length)return n;if(n){s.removeEventListener("mousemove",e,false);s.removeEventListener("mousewheel",f,false);s.removeEventListener("DOMMouseScroll",f,false);s=null;n.off("move",e)}if(n=l){n.on("move",e);s=n.container();s.addEventListener("mousemove",e,false);s.addEventListener("mousewheel",f,false);s.addEventListener("DOMMouseScroll",
f,false)}return a};return a};var ba=/WebKit\/533/.test(navigator.userAgent)?-1:0;o.arrow=function(){function e(y){if(!(y.ctrlKey||y.altKey||y.metaKey)){var x=Date.now(),C=0,F=0;switch(y.keyCode){case 37:if(!c.left){d=x;c.left=1;c.right||(C=l)}break;case 39:if(!c.right){d=x;c.right=1;c.left||(C=-l)}break;case 38:if(!c.up){d=x;c.up=1;c.down||(F=l)}break;case 40:if(!c.down){d=x;c.down=1;c.up||(F=-l)}break;default:return}if(C||F)k.panBy({x:C,y:F});if(!m&&c.left|c.right|c.up|c.down)m=setInterval(g,s);
y.preventDefault()}}function f(y){d=Date.now();switch(y.keyCode){case 37:c.left=0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;default:return}if(m&&!(c.left|c.right|c.up|c.down))m=clearInterval(m);y.preventDefault()}function a(y){switch(y.charCode){case 45:case 95:k.zoom(Math.ceil(k.zoom())-1);break;case 43:case 61:k.zoom(Math.floor(k.zoom())+1);break;default:return}y.preventDefault()}function g(){if(k)if(!(Date.now()<d+n)){var y=(c.left-c.right)*l,x=(c.up-c.down)*l;if(y||
x)k.panBy({x:y,y:x})}}var i={},c={left:0,right:0,up:0,down:0},d=0,m,n=250,s=50,l=16,k,v;i.map=function(y){if(!arguments.length)return k;if(k){v.removeEventListener("keypress",a,false);v.removeEventListener("keydown",e,false);v.removeEventListener("keyup",f,false);v=null}if(k=y){v=k.focusableParent();v.addEventListener("keypress",a,false);v.addEventListener("keydown",e,false);v.addEventListener("keyup",f,false)}return i};i.speed=function(y){if(!arguments.length)return l;l=y;return i};return i};o.hash=
function(){function e(){var d=c.center(),m=c.zoom(),n=Math.max(0,Math.ceil(Math.log(m)/Math.LN2));d="#"+m.toFixed(2)+"/"+d.lat.toFixed(n)+"/"+d.lon.toFixed(n);if(g!==d)location.replace(g=d)}function f(){if(location.hash!==g){var d=(g=location.hash).substring(1).split("/").map(Number);if(d.length<3||d.some(isNaN))e();else{var m=c.size();c.zoomBy(d[0]-c.zoom(),{x:m.x/2,y:m.y/2},{lat:Math.min(i,Math.max(-i,d[1])),lon:d[2]})}}}var a={},g,i=89.99999999,c;a.map=function(d){if(!arguments.length)return c;
if(c){c.off("move",e);window.removeEventListener("hashchange",f,false)}if(c=d){c.on("move",e);window.addEventListener("hashchange",f,false);location.hash?f():e()}return a};return a};o.interact=function(){var e={},f=o.drag(),a=o.wheel(),g=o.dblclick(),i=o.arrow();e.map=function(c){f.map(c);a.map(c);g.map(c);i.map(c);return e};return e};o.compass=function(){function e(u){h.setAttribute("class","compass active");O||(O=setInterval(f,r));T&&H.panBy(T);B=Date.now();return l(u)}function f(){T&&Date.now()>
B+j&&H.panBy(T)}function a(u){if(u.shiftKey){I={x0:H.mouse(u)};H.focusableParent().focus();return l(u)}}function g(u){if(I){I.x1=H.mouse(u);L.setAttribute("x",Math.min(I.x0.x,I.x1.x));L.setAttribute("y",Math.min(I.x0.y,I.x1.y));L.setAttribute("width",Math.abs(I.x0.x-I.x1.x));L.setAttribute("height",Math.abs(I.x0.y-I.x1.y));L.removeAttribute("display")}}function i(){h.setAttribute("class","compass");if(I){if(I.x1){H.extent([H.pointLocation({x:Math.min(I.x0.x,I.x1.x),y:Math.max(I.x0.y,I.x1.y)}),H.pointLocation({x:Math.max(I.x0.x,
I.x1.x),y:Math.min(I.x0.y,I.x1.y)})]);L.setAttribute("display","none")}I=null}if(O){clearInterval(O);O=0}}function c(u){return function(){u?this.setAttribute("class","active"):this.removeAttribute("class");T=u}}function d(u){return function(D){h.setAttribute("class","compass active");var G=H.zoom();H.zoom(u<0?Math.ceil(G)-1:Math.floor(G)+1);return l(D)}}function m(u){return function(D){H.zoom(u);return l(D)}}function n(){this.setAttribute("class","active")}function s(){this.removeAttribute("class")}
function l(u){u.stopPropagation();u.preventDefault();return false}function k(u){var D=Math.SQRT1_2*t,G=t*0.7,J=t*0.2,K=o.svg("g"),M=K.appendChild(o.svg("path")),P=K.appendChild(o.svg("path"));M.setAttribute("class","direction");M.setAttribute("pointer-events","all");M.setAttribute("d","M0,0L"+D+","+D+"A"+t+","+t+" 0 0,1 "+-D+","+D+"Z");P.setAttribute("class","chevron");P.setAttribute("d","M"+J+","+(G-J)+"L0,"+G+" "+-J+","+(G-J));P.setAttribute("pointer-events","none");K.addEventListener("mousedown",
e,false);K.addEventListener("mouseover",c(u),false);K.addEventListener("mouseout",c(null),false);K.addEventListener("dblclick",l,false);return K}function v(u){var D=t*0.4,G=D/2,J=o.svg("g"),K=J.appendChild(o.svg("path")),M=J.appendChild(o.svg("path")),P=J.appendChild(o.svg("path")),W=J.appendChild(o.svg("path"));K.setAttribute("class","back");K.setAttribute("d","M"+-D+",0V"+-D+"A"+D+","+D+" 0 1,1 "+D+","+-D+"V0Z");M.setAttribute("class","direction");M.setAttribute("d",K.getAttribute("d"));P.setAttribute("class",
"chevron");P.setAttribute("d","M"+-G+","+-D+"H"+G+(u>0?"M0,"+(-D-G)+"V"+-G:""));W.setAttribute("class","fore");W.setAttribute("fill","none");W.setAttribute("d",K.getAttribute("d"));J.addEventListener("mousedown",d(u),false);J.addEventListener("mouseover",n,false);J.addEventListener("mouseout",s,false);J.addEventListener("dblclick",l,false);return J}function y(u){var D=t*0.2,G=t*0.4,J=o.svg("g"),K=J.appendChild(o.svg("rect")),M=J.appendChild(o.svg("path"));K.setAttribute("pointer-events","all");K.setAttribute("fill",
"none");K.setAttribute("x",-G);K.setAttribute("y",-0.75*G);K.setAttribute("width",2*G);K.setAttribute("height",1.5*G);M.setAttribute("class","chevron");M.setAttribute("d","M"+-D+",0H"+D);J.addEventListener("mousedown",m(u),false);J.addEventListener("dblclick",l,false);return J}function x(){var u=t+6,D=u,G=H.size();switch(z){case "top-left":break;case "top-right":u=G.x-u;break;case "bottom-left":D=G.y-D;break;case "bottom-right":u=G.x-u;D=G.y-D;break}u="translate("+u+","+D+")";N&&N.setAttribute("transform",
u);A&&A.setAttribute("transform",u);for(var J in w)J==H.zoom()?w[J].setAttribute("class","active"):w[J].removeAttribute("class")}function C(){for(;h.lastChild;)h.removeChild(h.lastChild);h.appendChild(L);if(X!="none"){N=h.appendChild(o.svg("g"));N.setAttribute("class","pan");var u=N.appendChild(o.svg("circle"));u.setAttribute("class","back");u.setAttribute("r",t);N.appendChild(k({x:0,y:-q})).setAttribute("transform","rotate(0)");N.appendChild(k({x:q,y:0})).setAttribute("transform","rotate(90)");N.appendChild(k({x:0,
y:q})).setAttribute("transform","rotate(180)");N.appendChild(k({x:-q,y:0})).setAttribute("transform","rotate(270)");u=N.appendChild(o.svg("circle"));u.setAttribute("fill","none");u.setAttribute("class","fore");u.setAttribute("r",t)}else N=null;if(E!="none"){A=h.appendChild(o.svg("g"));A.setAttribute("class","zoom");u=-0.5;if(E=="big"){w={};var D=H.zoomRange()[0];for(u=0;D<=H.zoomRange()[1];D++,u++)(w[D]=A.appendChild(y(D))).setAttribute("transform","translate(0,"+-(u+0.75)*t*0.4+")")}D=X=="none"?
0.4:2;A.setAttribute("transform","translate(0,"+t*(/^top-/.test(z)?D+(u+0.5)*0.4:-D)+")");A.appendChild(v(+1)).setAttribute("transform","translate(0,"+-(u+0.5)*t*0.4+")");A.appendChild(v(-1)).setAttribute("transform","scale(-1)")}else A=null;x()}var F={},h=o.svg("g"),w={},t=30,q=16,B=0,j=250,r=50,z="top-left",E="small",A,X="small",O,T,N,I,L=o.svg("rect"),H,R,S;h.setAttribute("class","compass");L.setAttribute("class","back fore");L.setAttribute("pointer-events","none");L.setAttribute("display","none");
F.radius=function(u){if(!arguments.length)return t;t=u;H&&C();return F};F.speed=function(u){if(!arguments.length)return t;q=u;return F};F.position=function(u){if(!arguments.length)return z;z=u;H&&C();return F};F.pan=function(u){if(!arguments.length)return X;X=u;H&&C();return F};F.zoom=function(u){if(!arguments.length)return E;E=u;H&&C();return F};F.map=function(u){if(!arguments.length)return H;if(H){R.removeEventListener("mousedown",a,false);R.removeChild(h);R=null;S.removeEventListener("mousemove",
g,false);S.removeEventListener("mouseup",i,false);S=null;H.off("move",x).off("resize",x)}if(H=u){R=H.container();R.appendChild(h);R.addEventListener("mousedown",a,false);S=R.ownerDocument.defaultView;S.addEventListener("mousemove",g,false);S.addEventListener("mouseup",i,false);H.on("move",x).on("resize",x);C()}return F};return F};o.grid=function(){function e(){var i=g.firstChild,c=a.size(),d=a.pointLocation(Y);a.pointLocation(c);var m=Math.pow(2,4-Math.round(a.zoom()));d.lat=Math.floor(d.lat/m)*m;
d.lon=Math.ceil(d.lon/m)*m;for(var n;(n=a.locationPoint(d).x)<=c.x;d.lon+=m){i||(i=g.appendChild(o.svg("line")));i.setAttribute("x1",n);i.setAttribute("x2",n);i.setAttribute("y1",0);i.setAttribute("y2",c.y);i=i.nextSibling}for(;(n=a.locationPoint(d).y)<=c.y;d.lat-=m){i||(i=g.appendChild(o.svg("line")));i.setAttribute("y1",n);i.setAttribute("y2",n);i.setAttribute("x1",0);i.setAttribute("x2",c.x);i=i.nextSibling}for(;i;){c=i.nextSibling;g.removeChild(i);i=c}}var f={},a,g=o.svg("g");g.setAttribute("class",
"grid");f.map=function(i){if(!arguments.length)return a;if(a){g.parentNode.removeChild(g);a.off("move",e).off("resize",e)}if(a=i){a.on("move",e).on("resize",e);a.container().appendChild(g);a.dispatch({type:"move"})}return f};return f}})(org.polymaps);
