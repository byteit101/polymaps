if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(s){function M(){for(var d=0;d<M.maps.length;d++)M.maps[d].resize()}function Q(d){return 360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}function R(d){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}function U(d,a){if(d.row>a.row){var f=d;d=a;a=f}return{x0:d.column,y0:d.row,x1:a.column,y1:a.row,dx:a.column-d.column,dy:a.row-d.row}}function Z(d,a,f,e,c){f=Math.max(f,Math.floor(a.y0));e=Math.min(e,Math.ceil(a.y1));if(d.x0==a.x0&&d.y0==a.y0?d.x0+a.dy/d.dy*d.dx<a.x1:d.x1-a.dy/
d.dy*d.dx<a.x0){var g=d;d=a;a=g}g=d.dx/d.dy;var i=a.dx/a.dy,j=d.dx>0,o=a.dx<0;for(f=f;f<e;f++){var t=g*Math.max(0,Math.min(d.dy,f+j-d.y0))+d.x0;c(Math.floor(i*Math.max(0,Math.min(a.dy,f+o-a.y0))+a.x0),Math.ceil(t),f)}}function $(d,a,f,e,c,g){var i=U(d,a);a=U(a,f);d=U(f,d);if(i.dy>a.dy){f=i;i=a;a=f}if(i.dy>d.dy){f=i;i=d;d=f}if(a.dy>d.dy){f=a;a=d;d=f}i.dy&&Z(d,i,e,c,g);a.dy&&Z(d,a,e,c,g)}s.version="2.0.2+6";var S={x:0,y:0};s.id=function(){var d=0;return function(){return++d}}();s.svg=function(d){return document.createElementNS(s.ns.svg,
d)};s.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};s.transform=function(d,a,f,e,c,g){var i={},j,o,t;if(!arguments.length){d=1;a=c=f=0;e=1;g=0}i.zoomFraction=function(l){if(!arguments.length)return o;o=l;j=Math.floor(o+Math.log(Math.sqrt(d*d+a*a+f*f+e*e))/Math.log(2));t=Math.pow(2,-j);return i};i.apply=function(l){var r=Math.pow(2,-l.zoom),h=Math.pow(2,l.zoom-j);return{column:(d*l.column*r+f*l.row*r+c)*h,row:(a*l.column*r+e*l.row*r+g)*h,zoom:l.zoom-j}};i.unapply=function(l){var r=
Math.pow(2,-l.zoom),h=Math.pow(2,l.zoom+j);return{column:(l.column*r*e-l.row*r*f-c*e+g*f)/(d*e-a*f)*h,row:(l.column*r*a-l.row*r*d-c*a+g*d)/(f*a-e*d)*h,zoom:l.zoom+j}};i.toString=function(){return"matrix("+[d*t,a*t,f*t,e*t].join(" ")+" 0 0)"};return i.zoomFraction(0)};s.cache=function(d,a){function f(r){l--;a&&a(r);delete i[r.key];if(r.next)r.next.prev=r.prev;else if(o=r.prev)o.next=null;if(r.prev)r.prev.next=r.next;else if(j=r.next)j.prev=null}function e(){for(var r=o;l>t;r=r.prev){if(!r)break;r.lock||
f(r)}}var c={},g={},i={},j=null,o=null,t=64,l=0;c.peek=function(r){return i[[r.zoom,r.column,r.row].join("/")]};c.load=function(r,h){var m=[r.zoom,r.column,r.row].join("/"),q=i[m];if(q){if(q.prev){if(q.prev.next=q.next)q.next.prev=q.prev;else o=q.prev;q.prev=null;q.next=j;j=j.prev=q}q.lock=1;return g[m]=q}q={key:m,column:r.column,row:r.row,zoom:r.zoom,next:j,prev:null,lock:1};d.call(null,q,h);g[m]=i[m]=q;if(j)j.prev=q;else o=q;j=q;l++;e();return q};c.unload=function(r){if(!(r in g))return false;var h=
g[r];h.lock=0;delete g[r];h.request&&h.request.abort(false)?f(h):e();return h};c.locks=function(){return g};c.size=function(r){if(!arguments.length)return t;t=r;e();return c};return c};s.url=function(d){function a(e){var c=1<<e.zoom,g=e.column%c;if(g<0)g+=c;return d.replace(/{(.)}/g,function(i,j){switch(j){case "S":return f[(e.zoom+e.row+g)%f.length];case "Z":return e.zoom;case "X":return g;case "Y":return e.row;case "B":var o=s.map.coordinateLocation({row:e.row,column:g,zoom:e.zoom}),t=s.map.coordinateLocation({row:e.row+
1,column:g+1,zoom:e.zoom}),l=Math.ceil(Math.log(e.zoom)/Math.LN2);return t.lat.toFixed(l)+","+o.lon.toFixed(l)+","+o.lat.toFixed(l)+","+t.lon.toFixed(l)}return j})}var f=[];a.template=function(e){if(!arguments.length)return d;d=e;return a};a.hosts=function(e){if(!arguments.length)return f;f=e;return a};return a};s.dispatch=function(d){var a={};d.on=function(f,e){for(var c=a[f]||(a[f]=[]),g=0;g<c.length;g++)if(c[g].handler==e)return d;c.push({handler:e,on:true});return d};d.off=function(f,e){var c=
a[f];if(c)for(var g=0;g<c.length;g++){var i=c[g];if(i.handler==e){i.on=false;c.splice(g,1);break}}return d};return function(f){var e=a[f.type];if(e){e=e.slice();for(var c=0;c<e.length;c++){var g=e[c];g.on&&g.handler.call(d,f)}}}};s.queue=function(){function d(){if(!(c>=g||!e.length)){c++;e.pop()()}}function a(i){for(var j=0;j<e.length;j++)if(e[j]==i){e.splice(j,1);return true}return false}function f(i,j,o){function t(){l=new XMLHttpRequest;o&&l.overrideMimeType(o);l.open("GET",i,true);l.onreadystatechange=
function(){if(l.readyState==4){c--;l.status<300&&j(l);d()}};l.send(null)}var l;e.push(t);d();return{abort:function(r){if(a(t))return true;if(r&&l){l.abort();return true}return false}}}var e=[],c=0,g=6;return{text:function(i,j,o){return f(i,function(t){t.responseText&&j(t.responseText)},o)},xml:function(i,j){return f(i,function(o){o.responseXML&&j(o.responseXML)},"application/xml")},json:function(i,j){return f(i,function(o){o.responseText&&j(JSON.parse(o.responseText))},"application/json")},image:function(i,
j,o){function t(){l=document.createElement("img");l.onerror=function(){c--;d()};l.onload=function(){c--;o(l);d()};l.src=j;i.setAttributeNS(s.ns.xlink,"href",j)}var l;e.push(t);d();return{abort:function(r){if(a(t))return true;if(r&&l){l.src="about:";return true}return false}}}}}();s.map=function(){function d(){if(H){var k=45/Math.pow(2,o+t-3),u=Math.max(Math.abs(q*g.x+m*g.y),Math.abs(w*g.x+n*g.y)),y=Q(x-u*k/i.y);u=Q(G+u*k/i.y);j.lat=Math.max(y,Math.min(u,j.lat));y=Math.max(Math.abs(q*g.y+m*g.x),Math.abs(w*
g.y+n*g.x));j.lon=Math.max(H[0].lon-y*k/i.x,Math.min(H[1].lon+y*k/i.x,j.lon))}}var a={},f,e,c=S,g=S,i={x:256,y:256},j={lat:37.76487,lon:-122.41948},o=12,t=0,l=1,r=[1,18],h=0,m=1,q=0,n=1,w=0,x=-180,G=180,H=[{lat:Q(x),lon:-Infinity},{lat:Q(G),lon:Infinity}];a.locationCoordinate=function(k){k=s.map.locationCoordinate(k);var u=Math.pow(2,o);k.column*=u;k.row*=u;k.zoom+=o;return k};a.coordinateLocation=s.map.coordinateLocation;a.coordinatePoint=function(k,u){var y=Math.pow(2,o-u.zoom),B=Math.pow(2,o-k.zoom),
I=(u.column*y-k.column*B)*i.x*l;y=(u.row*y-k.row*B)*i.y*l;return{x:g.x+m*I-q*y,y:g.y+q*I+m*y}};a.pointCoordinate=function(k,u){var y=Math.pow(2,o-k.zoom),B=(u.x-g.x)/l,I=(u.y-g.y)/l;return{column:k.column*y+(n*B-w*I)/i.x,row:k.row*y+(w*B+n*I)/i.y,zoom:o}};a.locationPoint=function(k){var u=Math.pow(2,o+t-3)/45,y=(k.lon-j.lon)*u*i.x;k=(R(j.lat)-R(k.lat))*u*i.y;return{x:g.x+m*y-q*k,y:g.y+q*y+m*k}};a.pointLocation=function(k){var u=45/Math.pow(2,o+t-3),y=(k.x-g.x)*u;k=(k.y-g.y)*u;return{lon:j.lon+(n*
y-w*k)/i.x,lat:Q(R(j.lat)-(w*y+n*k)/i.y)}};var D=s.svg("rect");D.setAttribute("visibility","hidden");D.setAttribute("pointer-events","all");a.container=function(k){if(!arguments.length)return f;f=k;f.setAttribute("class","map");f.appendChild(D);return a.resize()};a.focusableParent=function(){for(var k=f;k;k=k.parentNode)if(k.tabIndex>=0)return k;return window};a.mouse=function(k){var u=(f.ownerSVGElement||f).createSVGPoint();if(V<0&&(window.scrollX||window.scrollY)){var y=document.body.appendChild(s.svg("svg"));
y.style.position="absolute";y.style.top=y.style.left="0px";var B=y.getScreenCTM();V=!(B.f||B.e);document.body.removeChild(y)}if(V){u.x=k.pageX;u.y=k.pageY}else{u.x=k.clientX;u.y=k.clientY}return u.matrixTransform(f.getScreenCTM().inverse())};a.size=function(k){if(!arguments.length)return c;e=k;return a.resize()};a.resize=function(){if(e){c=e;M.remove(a)}else{var k=f.ownerSVGElement||f;if(k.offsetWidth==null){D.setAttribute("width","100%");D.setAttribute("height","100%");k=D}b=k.getBoundingClientRect();
c={x:b.width,y:b.height};M.add(a)}D.setAttribute("width",c.x);D.setAttribute("height",c.y);g={x:c.x/2,y:c.y/2};d();a.dispatch({type:"resize"});return a};a.tileSize=function(k){if(!arguments.length)return i;i=k;a.dispatch({type:"move"});return a};a.center=function(k){if(!arguments.length)return j;j=k;d();a.dispatch({type:"move"});return a};a.panBy=function(k){var u=45/Math.pow(2,o+t-3),y=k.x*u;k=k.y*u;return a.center({lon:j.lon+(w*k-n*y)/i.x,lat:Q(R(j.lat)+(w*y+n*k)/i.y)})};a.centerRange=function(k){if(!arguments.length)return H;
if(H=k){x=H[0].lat>-90?R(H[0].lat):-Infinity;G=H[0].lat<90?R(H[1].lat):Infinity}else{x=-Infinity;G=Infinity}d();a.dispatch({type:"move"});return a};a.zoom=function(k){if(!arguments.length)return o+t;o=Math.max(r[0],Math.min(r[1],k));t=o-(o=Math.round(o));l=Math.pow(2,t);return a.center(j)};a.zoomBy=function(k,u,y){if(arguments.length<2)return a.zoom(o+t+k);if(arguments.length<3)y=a.pointLocation(u);o=Math.max(r[0],Math.min(r[1],o+t+k));t=o-(o=Math.round(o));l=Math.pow(2,t);var B=a.locationPoint(y);
return a.panBy({x:u.x-B.x,y:u.y-B.y})};a.zoomRange=function(k){if(!arguments.length)return r;r=k;return a.zoom(o+t)};a.angle=function(k){if(!arguments.length)return h;h=k;m=Math.cos(h);q=Math.sin(h);n=Math.cos(-h);w=Math.sin(-h);d();a.dispatch({type:"move"});return a};a.add=function(k){k.map(a);return a};a.remove=function(k){k.map(null);return a};a.dispatch=s.dispatch(a);return a};M.maps=[];M.add=function(d){for(var a=0;a<M.maps.length;a++)if(M.maps[a]==d)return;M.maps.push(d)};M.remove=function(d){for(var a=
0;a<M.maps.length;a++)if(M.maps[a]==d){M.maps.splice(a,1);return}};window.addEventListener("resize",M,false);s.map.locationCoordinate=function(d){var a=1/360;return{column:(d.lon+180)*a,row:(180-R(d.lat))*a,zoom:0}};s.map.coordinateLocation=function(d){var a=45/Math.pow(2,d.zoom-3);return{lon:a*d.column-180,lat:Q(180-a*d.row)}};var V=/WebKit/.test(navigator.userAgent)?-1:0;s.layer=function(d,a){function f(){function m(v){var z=v.zoom,A=1<<z,C=v.column%A,F=v.row;if(C<0)C+=A;return{locationPoint:function(J){J=
s.map.locationCoordinate(J);var K=Math.pow(2,z-J.zoom);return{x:D.x*(K*J.column-C),y:D.y*(K*J.row-F)}}}}function q(v,z,A){var C=y.zoom,F=2-I,J=4+I;for(v=v;v<z;v++){var K=c.load({column:v,row:A,zoom:C},m);if(!K.ready&&!(K.key in L)){K.proxyRefs={};for(var P,T,N,O=1;O<=F;O++){T=true;for(var W=0,aa=1<<O;W<=aa;W++)for(var X=0;X<=aa;X++)if((N=c.peek(P={column:(v<<O)+X,row:(A<<O)+W,zoom:C+O}))&&N.ready){L[N.key]=c.load(P);N.proxyCount++;K.proxyRefs[N.key]=N}else T=false;if(T)break}if(!T)for(O=1;O<=J;O++)if((N=
c.peek(P={column:v>>O,row:A>>O,zoom:C-O}))&&N.ready){L[N.key]=c.load(P);N.proxyCount++;K.proxyRefs[N.key]=N;break}}L[K.key]=K}}var n=e.map(),w=n.zoom(),x=w-(w=Math.round(w)),G=n.size(),H=n.angle(),D=n.tileSize(),k=n.locationCoordinate(n.center());i?l.removeAttribute("visibility"):l.setAttribute("visibility","hidden");for(var u=-4;u<=2;u++)h[u].setAttribute("class","zoom"+(u<0?"":"+")+u+" zoom"+(w+u));l.setAttribute("transform","translate("+G.x/2+","+G.y/2+")"+(H?"rotate("+H/Math.PI*180+")":"")+(x?
"scale("+Math.pow(2,x)+")":"")+(r?r.zoomFraction(x):""));var y=n.pointCoordinate(k,S);u=n.pointCoordinate(k,{x:G.x,y:0});var B=n.pointCoordinate(k,G);n=n.pointCoordinate(k,{x:0,y:G.y});if(!x&&!H&&!r){k.column=(Math.round(D.x*k.column)+(G.x&1)/2)/D.x;k.row=(Math.round(D.y*k.row)+(G.y&1)/2)/D.y}var I=j?j(w)-w:0;if(I){x=Math.pow(2,I);y.column*=x;y.row*=x;u.column*=x;u.row*=x;B.column*=x;B.row*=x;n.column*=x;n.row*=x;y.zoom=u.zoom=B.zoom=n.zoom+=I}if(r){y=r.unapply(y);u=r.unapply(u);B=r.unapply(B);n=
r.unapply(n);k=r.unapply(k)}w=c.locks();var L={};for(var E in w)w[E].proxyCount=0;if(i&&I>-5&&I<3){x=1<<Math.max(0,y.zoom);if(g){$(y,u,B,0,x,q);$(B,n,y,0,x,q)}else{B=Math.floor((y.column+B.column)/2);n=Math.max(0,Math.min(x-1,Math.floor((u.row+n.row)/2)));u=Math.min(4,y.zoom);B=B>>u<<u;n=n>>u<<u;q(B,B+1,n)}}for(E in L){u=L[E];x=Math.pow(2,u.level=u.zoom-k.zoom);B=D.x*(u.column-k.column*x);n=D.y*(u.row-k.row*x);u.element.setAttribute("transform","translate("+B+","+n+")")}for(E in w)if(!(E in L)){u=
c.unload(E);u.element.parentNode.removeChild(u.element);delete u.proxyRefs}for(E in L){u=L[E];if(u.element.parentNode!=h[u.level]){h[u.level].appendChild(u.element);e.show&&e.show(u)}}}var e={},c=e.cache=s.cache(d,a).size(512),g=true,i=true,j,o,t,l,r,h;e.map=function(m){if(!arguments.length)return t;if(t){if(t==m){l.parentNode.appendChild(l);return e}t.off("move",f).off("resize",f);l.parentNode.removeChild(l);l=h=null}if(t=m){l=t.container().appendChild(s.svg("g"));o&&l.setAttribute("id",o);l.setAttribute("class",
"layer");h={};for(var q=-4;q<=-1;q++)(h[q]=l.appendChild(s.svg("g"))).setAttribute("transform","scale("+Math.pow(2,-q)+")");for(q=2;q>=1;q--)(h[q]=l.appendChild(s.svg("g"))).setAttribute("transform","scale("+Math.pow(2,-q)+")");h[0]=l.appendChild(s.svg("g"));e.init&&e.init(l);t.on("move",f).on("resize",f);f()}return e};e.container=function(){return l};e.id=function(m){if(!arguments.length)return o;o=m;return e};e.visible=function(m){if(!arguments.length)return i;i=m;t&&f();return e};e.transform=function(m){if(!arguments.length)return r;
r=m;t&&f();return e};e.zoom=function(m){if(!arguments.length)return j;j=typeof m=="function"||m==null?m:function(){return m};return e};e.tile=function(m){if(!arguments.length)return g;g=m;return e};e.dispatch=s.dispatch(e);e.on("load",function(m){if(m.tile.proxyRefs){for(var q in m.tile.proxyRefs){var n=m.tile.proxyRefs[q];--n.proxyCount<=0&&c.unload(q)&&n.element.parentNode.removeChild(n.element)}delete m.tile.proxyRefs}});return e};s.image=function(){var d=s.layer(function(f){var e=f.element=s.svg("image"),
c=d.map().tileSize();e.setAttribute("preserveAspectRatio","none");e.setAttribute("width",c.x);e.setAttribute("height",c.y);e.setAttribute("opacity",0);if(typeof a=="function")f.request=s.queue.image(e,a(f),function(){delete f.request;f.ready=true;e.removeAttribute("opacity");d.dispatch({type:"load",tile:f})});else{f.ready=true;e.setAttributeNS(s.ns.xlink,"href",a);d.dispatch({type:"load",tile:f})}},function(f){f.request&&f.request.abort(true)}),a="about:blank";d.url=function(f){if(!arguments.length)return a;
a=typeof f=="string"&&/{.}/.test(f)?s.url(f):f;return d};return d};s.geoJson=function(d){function a(h,m){var q=m({lat:h[1],lon:h[0]}),n=s.svg("circle");n.setAttribute("r",4.5);n.setAttribute("cx",q.x);n.setAttribute("cy",q.y);return n}function f(h,m,q,n){n.push("M");for(var w=0;w<h.length-m;w++){p=q({lat:h[w][1],lon:h[w][0]});n.push(p.x);n.push(",");n.push(p.y);n.push("L")}n.pop()}function e(h,m,q,n){for(var w=0;w<h.length;w++)f(h[w],m,q,n);m&&n.push("Z")}function c(h,m,q,n){for(var w=[],x=0;x<m.length;x++)h(m[x],
q,n,w);if(w.length){h=s.svg("path");h.setAttribute("d",w.join(""));return h}}var g=s.layer(function(h,m){function q(w){var x=t[h.key]||(t[h.key]=[]),G=[];if(w.next)h.request=d(w.next.href,q);for(var H=0;H<w.features.length;H++){var D=w.features[H],k=D.geometry&&D.geometry.type in r&&r[D.geometry.type](D.geometry,m.locationPoint);if(k){D={element:n.appendChild(k),data:D};x.push(D);G.push(D)}}h.ready=true;g.dispatch({type:"load",tile:h,features:G})}var n=h.element=s.svg("g");m=m(h);if(l)q({features:l});
else h.request=d(i(h),q);o&&n.setAttribute("clip-path","url(#"+o+")")},function(h){h.request&&h.request.abort(true);delete t[h.key]}),i=s.url("about:blank"),j=true,o,t={},l;if(!arguments.length)d=s.queue.json;var r={Point:function(h,m){return a(h.coordinates,m)},MultiPoint:function(h,m){for(var q=s.svg("g"),n=0;n<h.coordinates.length;n++)q.appendChild(a(h.coordinates[n],m));return q},LineString:function(h,m){return c(f,[h.coordinates],0,m)},MultiLineString:function(h,m){return c(f,h.coordinates,0,
m)},Polygon:function(h,m){return c(e,[h.coordinates],1,m)},MultiPolygon:function(h,m){return c(e,h.coordinates||h.coords,1,m)},GeometryCollection:function(h,m){for(var q=s.svg("g"),n=0;n<h.geometries.length;n++){var w=h.geometries[n]&&h.geometries[n].type in r&&r[h.geometries[n].type](h.geometries[n],m);w&&q.appendChild(w)}return q}};g.url=function(h){if(!arguments.length)return i;i=typeof h=="string"?s.url(h):h;return g};g.features=function(h){if(!arguments.length)return l;h&&g.tile(false);l=h;return g};
g.clip=function(h){if(!arguments.length)return j;j=h;return g};g.init=function(h){if(j&&g.tile()){var m=g.map().tileSize(),q=h.insertBefore(s.svg("clipPath"),h.firstChild),n=q.appendChild(s.svg("rect"));q.setAttribute("id",o="org.polymaps."+s.id());n.setAttribute("width",m.x);n.setAttribute("height",m.y)}h.setAttribute("fill-rule","evenodd")};g.show=function(h){g.dispatch({type:"show",tile:h,features:t[h.key]||[]})};g.reshow=function(){var h=g.cache.locks();for(var m in h)g.show(h[m])};return g};
s.dblclick=function(){function d(c){var g=f.zoom();g=c.shiftKey?Math.ceil(g)-g-1:1-g+Math.floor(g);f.zoomBy(g,f.mouse(c))}var a={},f,e;a.map=function(c){if(!arguments.length)return f;if(f){e.removeEventListener("dblclick",d,false);e=null}if(f=c){e=f.container();e.addEventListener("dblclick",d,false)}return a};return a};s.drag=function(){function d(j){i={x:j.clientX,y:j.clientY};e.focusableParent().focus();j.preventDefault();g=document.body.style.cursor;document.body.style.cursor="move"}function a(j){if(i){e.panBy({x:j.clientX-
i.x,y:j.clientY-i.y});i.x=j.clientX;i.y=j.clientY}}var f={},e,c,g,i;f.map=function(j){if(!arguments.length)return e;if(e){c.removeEventListener("mousedown",d,false);c=null}if(e=j){c=e.container();c.addEventListener("mousedown",d,false)}return f};window.addEventListener("mousemove",a,false);window.addEventListener("mouseup",function(j){if(i){a(j);i=null;document.body.style.cursor=g}},false);return f};s.wheel=function(){function d(){i=null}function a(t){var l=(t.wheelDelta/120||-t.detail)*0.1,r=j.mouse(t);
if(Y<0){var h=Date.now(),m=h-c;if(m>9&&Math.abs(t.wheelDelta)/m>=50)Y=1;c=h}if(Y==1)l*=0.03;i||(i=j.pointLocation(r));j.off("move",d);if(g)j.zoomBy(l,r,i);else if(l){h=Date.now();if(h-e>200){j.zoomBy(l>0?+1:-1,r,i);e=h}}j.on("move",d);t.preventDefault();return false}var f={},e=0,c=0,g=true,i,j,o;f.smooth=function(t){if(!arguments.length)return g;g=t;return f};f.map=function(t){if(!arguments.length)return j;if(j){o.removeEventListener("mousemove",d,false);o.removeEventListener("mousewheel",a,false);
o.removeEventListener("DOMMouseScroll",a,false);o=null;j.off("move",d)}if(j=t){j.on("move",d);o=j.container();o.addEventListener("mousemove",d,false);o.addEventListener("mousewheel",a,false);o.addEventListener("DOMMouseScroll",a,false)}return f};return f};var Y=/WebKit\/533/.test(navigator.userAgent)?-1:0;s.arrow=function(){function d(h){if(!(h.ctrlKey||h.altKey||h.metaKey)){var m=Date.now(),q=0,n=0,w=0;switch(h.keyCode){case 37:if(!c.left){g=m;c.left=1;c.right||(q=t)}break;case 39:if(!c.right){g=
m;c.right=1;c.left||(q=-t)}break;case 38:if(!c.up){g=m;c.up=1;c.down||(n=t)}break;case 40:if(!c.down){g=m;c.down=1;c.up||(n=-t)}break;case 109:case 189:if(!c.plus){g=m;c.plus=1;c.minus||(w=-1)}break;case 61:case 187:if(!c.minus){g=m;c.minus=1;c.plus||(w=1)}break;default:return}if(w){m=l.zoom();l.zoom(w<0?Math.ceil(m)-1:Math.floor(m)+1)}else if(q||n)l.panBy({x:q,y:n});if(!i&&c.left|c.right|c.up|c.down)i=setInterval(f,o);h.preventDefault()}}function a(h){g=Date.now();switch(h.keyCode){case 37:c.left=
0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;case 109:case 189:c.plus=0;break;case 61:case 187:c.minus=0;break;default:return}if(i&&!(c.left|c.right|c.up|c.down))i=clearInterval(i);h.preventDefault()}function f(){if(l)if(!(Date.now()<g+j)){var h=(c.left-c.right)*t,m=(c.up-c.down)*t;if(h||m)l.panBy({x:h,y:m})}}var e={},c={left:0,right:0,up:0,down:0,plus:0,minus:0},g=0,i,j=250,o=50,t=16,l,r;e.map=function(h){if(!arguments.length)return l;if(l){r.removeEventListener("keydown",
d,false);r.removeEventListener("keyup",a,false);r=null}if(l=h){r=l.focusableParent();r.addEventListener("keydown",d,false);r.addEventListener("keyup",a,false)}return e};e.speed=function(h){if(!arguments.length)return t;t=h;return e};return e};s.hash=function(){function d(){var i=g.center(),j=g.zoom(),o=Math.max(0,Math.ceil(Math.log(j)/Math.LN2));i="#"+j.toFixed(2)+"/"+i.lat.toFixed(o)+"/"+i.lon.toFixed(o);if(e!==i)location.replace(e=i)}function a(){if(location.hash!==e){var i=(e=location.hash).substring(1).split("/").map(Number);
if(i.length<3||i.some(isNaN))d();else{var j=g.size();g.zoomBy(i[0]-g.zoom(),{x:j.x/2,y:j.y/2},{lat:Math.min(c,Math.max(-c,i[1])),lon:i[2]})}}}var f={},e,c=89.99999999,g;f.map=function(i){if(!arguments.length)return g;if(g){g.off("move",d);window.removeEventListener("hashchange",a,false)}if(g=i){g.on("move",d);window.addEventListener("hashchange",a,false);location.hash?a():d()}return f};return f};s.interact=function(){var d={},a=s.drag(),f=s.wheel(),e=s.dblclick(),c=s.arrow();d.map=function(g){a.map(g);
f.map(g);e.map(g);c.map(g);return d};return d};s.compass=function(){function d(v){n.setAttribute("class","compass active");I||(I=setInterval(a,k));L&&E.panBy(L);H=Date.now();return o(v)}function a(){L&&Date.now()>H+D&&E.panBy(L)}function f(){n.setAttribute("class","compass");if(I){clearInterval(I);I=0}}function e(v){return function(){v?this.setAttribute("class","active"):this.removeAttribute("class");L=v}}function c(v){return function(z){n.setAttribute("class","compass active");var A=E.zoom();E.zoom(v<
0?Math.ceil(A)-1:Math.floor(A)+1);return o(z)}}function g(v){return function(z){E.zoom(v);return o(z)}}function i(){this.setAttribute("class","active")}function j(){this.removeAttribute("class")}function o(v){v.stopPropagation();v.preventDefault();return false}function t(v){var z=Math.SQRT1_2*x,A=x*0.7,C=x*0.2,F=s.svg("g"),J=F.appendChild(s.svg("path")),K=F.appendChild(s.svg("path"));J.setAttribute("class","direction");J.setAttribute("pointer-events","all");J.setAttribute("d","M0,0L"+z+","+z+"A"+
x+","+x+" 0 0,1 "+-z+","+z+"Z");K.setAttribute("class","chevron");K.setAttribute("d","M"+C+","+(A-C)+"L0,"+A+" "+-C+","+(A-C));K.setAttribute("pointer-events","none");F.addEventListener("mousedown",d,false);F.addEventListener("mouseover",e(v),false);F.addEventListener("mouseout",e(null),false);F.addEventListener("dblclick",o,false);return F}function l(v){var z=x*0.4,A=z/2,C=s.svg("g"),F=C.appendChild(s.svg("path")),J=C.appendChild(s.svg("path")),K=C.appendChild(s.svg("path")),P=C.appendChild(s.svg("path"));
F.setAttribute("class","back");F.setAttribute("d","M"+-z+",0V"+-z+"A"+z+","+z+" 0 1,1 "+z+","+-z+"V0Z");J.setAttribute("class","direction");J.setAttribute("d",F.getAttribute("d"));K.setAttribute("class","chevron");K.setAttribute("d","M"+-A+","+-z+"H"+A+(v>0?"M0,"+(-z-A)+"V"+-A:""));P.setAttribute("class","fore");P.setAttribute("fill","none");P.setAttribute("d",F.getAttribute("d"));C.addEventListener("mousedown",c(v),false);C.addEventListener("mouseover",i,false);C.addEventListener("mouseout",j,false);
C.addEventListener("dblclick",o,false);return C}function r(v){var z=x*0.2,A=x*0.4,C=s.svg("g"),F=C.appendChild(s.svg("rect")),J=C.appendChild(s.svg("path"));F.setAttribute("pointer-events","all");F.setAttribute("fill","none");F.setAttribute("x",-A);F.setAttribute("y",-0.75*A);F.setAttribute("width",2*A);F.setAttribute("height",1.5*A);J.setAttribute("class","chevron");J.setAttribute("d","M"+-z+",0H"+z);C.addEventListener("mousedown",g(v),false);C.addEventListener("dblclick",o,false);return C}function h(){var v=
x+6,z=v,A=E.size();switch(u){case "top-left":break;case "top-right":v=A.x-v;break;case "bottom-left":z=A.y-z;break;case "bottom-right":v=A.x-v;z=A.y-z;break}n.setAttribute("transform","translate("+v+","+z+")");for(var C in w)C==E.zoom()?w[C].setAttribute("class","active"):w[C].removeAttribute("class")}function m(){for(;n.lastChild;)n.removeChild(n.lastChild);if(B!="none"){var v=n.appendChild(s.svg("g"));v.setAttribute("class","pan");var z=v.appendChild(s.svg("circle"));z.setAttribute("class","back");
z.setAttribute("r",x);v.appendChild(t({x:0,y:-G})).setAttribute("transform","rotate(0)");v.appendChild(t({x:G,y:0})).setAttribute("transform","rotate(90)");v.appendChild(t({x:0,y:G})).setAttribute("transform","rotate(180)");v.appendChild(t({x:-G,y:0})).setAttribute("transform","rotate(270)");v=v.appendChild(s.svg("circle"));v.setAttribute("fill","none");v.setAttribute("class","fore");v.setAttribute("r",x)}if(y!="none"){v=n.appendChild(s.svg("g"));v.setAttribute("class","zoom");z=-0.5;if(y=="big"){w=
{};var A=E.zoomRange()[0];for(z=0;A<=E.zoomRange()[1];A++,z++)(w[A]=v.appendChild(r(A))).setAttribute("transform","translate(0,"+-(z+0.75)*x*0.4+")")}A=B=="none"?0.4:2;v.setAttribute("transform","translate(0,"+x*(/^top-/.test(u)?A+(z+0.5)*0.4:-A)+")");v.appendChild(l(+1)).setAttribute("transform","translate(0,"+-(z+0.5)*x*0.4+")");v.appendChild(l(-1)).setAttribute("transform","scale(-1)")}h()}var q={},n=s.svg("g"),w={},x=30,G=16,H=0,D=250,k=50,u="top-left",y="small",B="small",I,L,E;n.setAttribute("class",
"compass");q.radius=function(v){if(!arguments.length)return x;x=v;E&&m();return q};q.speed=function(v){if(!arguments.length)return x;G=v;return q};q.position=function(v){if(!arguments.length)return u;u=v;E&&m();return q};q.pan=function(v){if(!arguments.length)return B;B=v;E&&m();return q};q.zoom=function(v){if(!arguments.length)return y;y=v;E&&m();return q};q.map=function(v){if(!arguments.length)return E;if(E){n.parentNode.removeChild(n);E.off("move",h).off("resize",h);window.removeEventListener("mouseup",
f,false)}if(E=v){window.addEventListener("mouseup",f,false);E.on("move",h).on("resize",h);E.container().appendChild(n);m()}return q};return q};s.grid=function(){function d(){var c=e.firstChild,g=f.size(),i=f.pointLocation(S);f.pointLocation(g);var j=Math.pow(2,4-Math.round(f.zoom()));i.lat=Math.floor(i.lat/j)*j;i.lon=Math.ceil(i.lon/j)*j;for(var o;(o=f.locationPoint(i).x)<=g.x;i.lon+=j){c||(c=e.appendChild(s.svg("line")));c.setAttribute("x1",o);c.setAttribute("x2",o);c.setAttribute("y1",0);c.setAttribute("y2",
g.y);c=c.nextSibling}for(;(o=f.locationPoint(i).y)<=g.y;i.lat-=j){c||(c=e.appendChild(s.svg("line")));c.setAttribute("y1",o);c.setAttribute("y2",o);c.setAttribute("x1",0);c.setAttribute("x2",g.x);c=c.nextSibling}for(;c;){g=c.nextSibling;e.removeChild(c);c=g}}var a={},f,e=s.svg("g");e.setAttribute("class","grid");a.map=function(c){if(!arguments.length)return f;if(f){e.parentNode.removeChild(e);f.off("move",d).off("resize",d)}if(f=c){f.on("move",d).on("resize",d);f.container().appendChild(e);f.dispatch({type:"move"})}return a};
return a}})(org.polymaps);
