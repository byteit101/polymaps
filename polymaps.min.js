if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(s){function M(){for(var d=0;d<M.maps.length;d++)M.maps[d].resize()}function Q(d){return 360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}function R(d){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}function U(d,a){if(d.row>a.row){var e=d;d=a;a=e}return{x0:d.column,y0:d.row,x1:a.column,y1:a.row,dx:a.column-d.column,dy:a.row-d.row}}function Z(d,a,e,f,h){e=Math.max(e,Math.floor(a.y0));f=Math.min(f,Math.ceil(a.y1));if(d.x0==a.x0&&d.y0==a.y0?d.x0+a.dy/d.dy*d.dx<a.x1:d.x1-a.dy/
d.dy*d.dx<a.x0){var c=d;d=a;a=c}c=d.dx/d.dy;var i=a.dx/a.dy,j=d.dx>0,r=a.dx<0;for(e=e;e<f;e++){var u=c*Math.max(0,Math.min(d.dy,e+j-d.y0))+d.x0;h(Math.floor(i*Math.max(0,Math.min(a.dy,e+r-a.y0))+a.x0),Math.ceil(u),e)}}function $(d,a,e,f,h,c){var i=U(d,a);a=U(a,e);d=U(e,d);if(i.dy>a.dy){e=i;i=a;a=e}if(i.dy>d.dy){e=i;i=d;d=e}if(a.dy>d.dy){e=a;a=d;d=e}i.dy&&Z(d,i,f,h,c);a.dy&&Z(d,a,f,h,c)}s.version="2.0.2+6";var S={x:0,y:0};s.id=function(){var d=0;return function(){return++d}}();s.svg=function(d){return document.createElementNS(s.ns.svg,
d)};s.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};s.transform=function(d,a,e,f,h,c){var i={},j,r,u;if(!arguments.length){d=1;a=h=e=0;f=1;c=0}i.zoomFraction=function(m){if(!arguments.length)return r;r=m;j=Math.floor(r+Math.log(Math.sqrt(d*d+a*a+e*e+f*f))/Math.log(2));u=Math.pow(2,-j);return i};i.apply=function(m){var o=Math.pow(2,-m.zoom),g=Math.pow(2,m.zoom-j);return{column:(d*m.column*o+e*m.row*o+h)*g,row:(a*m.column*o+f*m.row*o+c)*g,zoom:m.zoom-j}};i.unapply=function(m){var o=
Math.pow(2,-m.zoom),g=Math.pow(2,m.zoom+j);return{column:(m.column*o*f-m.row*o*e-h*f+c*e)/(d*f-a*e)*g,row:(m.column*o*a-m.row*o*d-h*a+c*d)/(e*a-f*d)*g,zoom:m.zoom+j}};i.toString=function(){return"matrix("+[d*u,a*u,e*u,f*u].join(" ")+" 0 0)"};return i.zoomFraction(0)};s.cache=function(d,a){function e(o){m--;a&&a(o);delete i[o.key];if(o.next)o.next.prev=o.prev;else if(r=o.prev)r.next=null;if(o.prev)o.prev.next=o.next;else if(j=o.next)j.prev=null}function f(){for(var o=r;m>u;o=o.prev){if(!o)break;o.lock||
e(o)}}var h={},c={},i={},j=null,r=null,u=64,m=0;h.peek=function(o){return i[[o.zoom,o.column,o.row].join("/")]};h.load=function(o,g){var k=[o.zoom,o.column,o.row].join("/"),q=i[k];if(q){if(q.prev){if(q.prev.next=q.next)q.next.prev=q.prev;else r=q.prev;q.prev=null;q.next=j;j=j.prev=q}q.lock=1;return c[k]=q}q={key:k,column:o.column,row:o.row,zoom:o.zoom,next:j,prev:null,lock:1};d.call(null,q,g);c[k]=i[k]=q;if(j)j.prev=q;else r=q;j=q;m++;f();return q};h.unload=function(o){if(!(o in c))return false;var g=
c[o];g.lock=0;delete c[o];g.request&&g.request.abort(false)?e(g):f();return g};h.locks=function(){return c};h.size=function(o){if(!arguments.length)return u;u=o;f();return h};return h};s.url=function(d){function a(f){var h=1<<f.zoom,c=f.column%h;if(c<0)c+=h;return d.replace(/{(.)}/g,function(i,j){switch(j){case "S":return e[(f.zoom+f.row+c)%e.length];case "Z":return f.zoom;case "X":return c;case "Y":return f.row;case "B":var r=s.map.coordinateLocation({row:f.row,column:c,zoom:f.zoom}),u=s.map.coordinateLocation({row:f.row+
1,column:c+1,zoom:f.zoom}),m=Math.ceil(Math.log(f.zoom)/Math.LN2);return u.lat.toFixed(m)+","+r.lon.toFixed(m)+","+r.lat.toFixed(m)+","+u.lon.toFixed(m)}return j})}var e=[];a.template=function(f){if(!arguments.length)return d;d=f;return a};a.hosts=function(f){if(!arguments.length)return e;e=f;return a};return a};s.dispatch=function(d){var a={};d.on=function(e,f){for(var h=a[e]||(a[e]=[]),c=0;c<h.length;c++)if(h[c].handler==f)return d;h.push({handler:f,on:true});return d};d.off=function(e,f){var h=
a[e];if(h)for(var c=0;c<h.length;c++){var i=h[c];if(i.handler==f){i.on=false;h.splice(c,1);break}}return d};return function(e){var f=a[e.type];if(f){f=f.slice();for(var h=0;h<f.length;h++){var c=f[h];c.on&&c.handler.call(d,e)}}}};s.queue=function(){function d(){if(!(h>=c||!f.length)){h++;f.pop()()}}function a(i){for(var j=0;j<f.length;j++)if(f[j]==i){f.splice(j,1);return true}return false}function e(i,j,r){function u(){m=new XMLHttpRequest;r&&m.overrideMimeType(r);m.open("GET",i,true);m.onreadystatechange=
function(){if(m.readyState==4){h--;m.status<300&&j(m);d()}};m.send(null)}var m;f.push(u);d();return{abort:function(o){if(a(u))return true;if(o&&m){m.abort();return true}return false}}}var f=[],h=0,c=6;return{text:function(i,j,r){return e(i,function(u){u.responseText&&j(u.responseText)},r)},xml:function(i,j){return e(i,function(r){r.responseXML&&j(r.responseXML)},"application/xml")},json:function(i,j){return e(i,function(r){r.responseText&&j(JSON.parse(r.responseText))},"application/json")},image:function(i,
j,r){function u(){m=document.createElement("img");m.onerror=function(){h--;d()};m.onload=function(){h--;r(m);d()};m.src=j;i.setAttributeNS(s.ns.xlink,"href",j)}var m;f.push(u);d();return{abort:function(o){if(a(u))return true;if(o&&m){m.src="about:";return true}return false}}}}}();s.map=function(){function d(){if(H){var l=45/Math.pow(2,r+u-3),t=Math.max(Math.abs(q*c.x+k*c.y),Math.abs(w*c.x+n*c.y)),y=Q(x-t*l/i.y);t=Q(G+t*l/i.y);j.lat=Math.max(y,Math.min(t,j.lat));y=Math.max(Math.abs(q*c.y+k*c.x),Math.abs(w*
c.y+n*c.x));j.lon=Math.max(H[0].lon-y*l/i.x,Math.min(H[1].lon+y*l/i.x,j.lon))}}var a={},e,f,h=S,c=S,i={x:256,y:256},j={lat:37.76487,lon:-122.41948},r=12,u=0,m=1,o=[1,18],g=0,k=1,q=0,n=1,w=0,x=-180,G=180,H=[{lat:Q(x),lon:-Infinity},{lat:Q(G),lon:Infinity}];a.locationCoordinate=function(l){l=s.map.locationCoordinate(l);var t=Math.pow(2,r);l.column*=t;l.row*=t;l.zoom+=r;return l};a.coordinateLocation=s.map.coordinateLocation;a.coordinatePoint=function(l,t){var y=Math.pow(2,r-t.zoom),B=Math.pow(2,r-l.zoom),
I=(t.column*y-l.column*B)*i.x*m;y=(t.row*y-l.row*B)*i.y*m;return{x:c.x+k*I-q*y,y:c.y+q*I+k*y}};a.pointCoordinate=function(l,t){var y=Math.pow(2,r-l.zoom),B=(t.x-c.x)/m,I=(t.y-c.y)/m;return{column:l.column*y+(n*B-w*I)/i.x,row:l.row*y+(w*B+n*I)/i.y,zoom:r}};a.locationPoint=function(l){var t=Math.pow(2,r+u-3)/45,y=(l.lon-j.lon)*t*i.x;l=(R(j.lat)-R(l.lat))*t*i.y;return{x:c.x+k*y-q*l,y:c.y+q*y+k*l}};a.pointLocation=function(l){var t=45/Math.pow(2,r+u-3),y=(l.x-c.x)*t;l=(l.y-c.y)*t;return{lon:j.lon+(n*
y-w*l)/i.x,lat:Q(R(j.lat)-(w*y+n*l)/i.y)}};var D=s.svg("rect");D.setAttribute("visibility","hidden");D.setAttribute("pointer-events","all");a.container=function(l){if(!arguments.length)return e;e=l;e.setAttribute("class","map");e.appendChild(D);return a.resize()};a.focusableParent=function(){for(var l=e;l;l=l.parentNode)if(l.tabIndex>=0)return l;return window};a.mouse=function(l){var t=(e.ownerSVGElement||e).createSVGPoint();if(V<0&&(window.scrollX||window.scrollY)){var y=document.body.appendChild(s.svg("svg"));
y.style.position="absolute";y.style.top=y.style.left="0px";var B=y.getScreenCTM();V=!(B.f||B.e);document.body.removeChild(y)}if(V){t.x=l.pageX;t.y=l.pageY}else{t.x=l.clientX;t.y=l.clientY}return t.matrixTransform(e.getScreenCTM().inverse())};a.size=function(l){if(!arguments.length)return h;f=l;return a.resize()};a.resize=function(){if(f){h=f;M.remove(a)}else{var l=e.ownerSVGElement||e;if(l.offsetWidth==null){D.setAttribute("width","100%");D.setAttribute("height","100%");l=D}b=l.getBoundingClientRect();
h={x:b.width,y:b.height};M.add(a)}D.setAttribute("width",h.x);D.setAttribute("height",h.y);c={x:h.x/2,y:h.y/2};d();a.dispatch({type:"resize"});return a};a.tileSize=function(l){if(!arguments.length)return i;i=l;a.dispatch({type:"move"});return a};a.center=function(l){if(!arguments.length)return j;j=l;d();a.dispatch({type:"move"});return a};a.panBy=function(l){var t=45/Math.pow(2,r+u-3),y=l.x*t;l=l.y*t;return a.center({lon:j.lon+(w*l-n*y)/i.x,lat:Q(R(j.lat)+(w*y+n*l)/i.y)})};a.centerRange=function(l){if(!arguments.length)return H;
if(H=l){x=H[0].lat>-90?R(H[0].lat):-Infinity;G=H[0].lat<90?R(H[1].lat):Infinity}else{x=-Infinity;G=Infinity}d();a.dispatch({type:"move"});return a};a.zoom=function(l){if(!arguments.length)return r+u;r=Math.max(o[0],Math.min(o[1],l));u=r-(r=Math.round(r));m=Math.pow(2,u);return a.center(j)};a.zoomBy=function(l,t,y){if(arguments.length<2)return a.zoom(r+u+l);if(arguments.length<3)y=a.pointLocation(t);r=Math.max(o[0],Math.min(o[1],r+u+l));u=r-(r=Math.round(r));m=Math.pow(2,u);var B=a.locationPoint(y);
return a.panBy({x:t.x-B.x,y:t.y-B.y})};a.zoomRange=function(l){if(!arguments.length)return o;o=l;return a.zoom(r+u)};a.angle=function(l){if(!arguments.length)return g;g=l;k=Math.cos(g);q=Math.sin(g);n=Math.cos(-g);w=Math.sin(-g);d();a.dispatch({type:"move"});return a};a.add=function(l){l.map(a);return a};a.remove=function(l){l.map(null);return a};a.dispatch=s.dispatch(a);return a};M.maps=[];M.add=function(d){for(var a=0;a<M.maps.length;a++)if(M.maps[a]==d)return;M.maps.push(d)};M.remove=function(d){for(var a=
0;a<M.maps.length;a++)if(M.maps[a]==d){M.maps.splice(a,1);return}};window.addEventListener("resize",M,false);s.map.locationCoordinate=function(d){var a=1/360;return{column:(d.lon+180)*a,row:(180-R(d.lat))*a,zoom:0}};s.map.coordinateLocation=function(d){var a=45/Math.pow(2,d.zoom-3);return{lon:a*d.column-180,lat:Q(180-a*d.row)}};var V=/WebKit/.test(navigator.userAgent)?-1:0;s.layer=function(d,a){function e(){function k(v){var z=v.zoom,A=1<<z,C=v.column%A,F=v.row;if(C<0)C+=A;return{locationPoint:function(J){J=
s.map.locationCoordinate(J);var K=Math.pow(2,z-J.zoom);return{x:D.x*(K*J.column-C),y:D.y*(K*J.row-F)}}}}function q(v,z,A){var C=y.zoom,F=2-I,J=4+I;for(v=v;v<z;v++){var K=h.load({column:v,row:A,zoom:C},k);if(!K.ready&&!(K.key in L)){K.proxyRefs={};for(var P,T,N,O=1;O<=F;O++){T=true;for(var W=0,aa=1<<O;W<=aa;W++)for(var X=0;X<=aa;X++)if((N=h.peek(P={column:(v<<O)+X,row:(A<<O)+W,zoom:C+O}))&&N.ready){L[N.key]=h.load(P);N.proxyCount++;K.proxyRefs[N.key]=N}else T=false;if(T)break}if(!T)for(O=1;O<=J;O++)if((N=
h.peek(P={column:v>>O,row:A>>O,zoom:C-O}))&&N.ready){L[N.key]=h.load(P);N.proxyCount++;K.proxyRefs[N.key]=N;break}}L[K.key]=K}}var n=f.map(),w=n.zoom(),x=w-(w=Math.round(w)),G=n.size(),H=n.angle(),D=n.tileSize(),l=n.locationCoordinate(n.center());i?m.removeAttribute("visibility"):m.setAttribute("visibility","hidden");for(var t=-4;t<=2;t++)g[t].setAttribute("class","zoom"+(t<0?"":"+")+t+" zoom"+(w+t));m.setAttribute("transform","translate("+G.x/2+","+G.y/2+")"+(H?"rotate("+H/Math.PI*180+")":"")+(x?
"scale("+Math.pow(2,x)+")":"")+(o?o.zoomFraction(x):""));var y=n.pointCoordinate(l,S);t=n.pointCoordinate(l,{x:G.x,y:0});var B=n.pointCoordinate(l,G);n=n.pointCoordinate(l,{x:0,y:G.y});if(!x&&!H&&!o){l.column=(Math.round(D.x*l.column)+(G.x&1)/2)/D.x;l.row=(Math.round(D.y*l.row)+(G.y&1)/2)/D.y}var I=j?j(w)-w:0;if(I){x=Math.pow(2,I);y.column*=x;y.row*=x;t.column*=x;t.row*=x;B.column*=x;B.row*=x;n.column*=x;n.row*=x;y.zoom=t.zoom=B.zoom=n.zoom+=I}if(o){y=o.unapply(y);t=o.unapply(t);B=o.unapply(B);n=
o.unapply(n);l=o.unapply(l)}w=h.locks();var L={};for(var E in w)w[E].proxyCount=0;if(i&&I>-5&&I<3){x=1<<Math.max(0,y.zoom);if(c){$(y,t,B,0,x,q);$(B,n,y,0,x,q)}else{B=Math.floor((y.column+B.column)/2);n=Math.max(0,Math.min(x-1,Math.floor((t.row+n.row)/2)));t=Math.min(4,y.zoom);B=B>>t<<t;n=n>>t<<t;q(B,B+1,n)}}for(E in L){t=L[E];x=Math.pow(2,t.level=t.zoom-l.zoom);B=D.x*(t.column-l.column*x);n=D.y*(t.row-l.row*x);t.element.setAttribute("transform","translate("+B+","+n+")")}for(E in w)if(!(E in L)){t=
h.unload(E);t.element.parentNode.removeChild(t.element);delete t.proxyRefs}for(E in L){t=L[E];if(t.element.parentNode!=g[t.level]){g[t.level].appendChild(t.element);f.show&&f.show(t)}}}var f={},h=f.cache=s.cache(d,a).size(512),c=true,i=true,j,r,u,m,o,g;f.map=function(k){if(!arguments.length)return u;if(u){if(u==k){m.parentNode.appendChild(m);return f}u.off("move",e).off("resize",e);m.parentNode.removeChild(m);m=g=null}if(u=k){m=u.container().appendChild(s.svg("g"));r&&m.setAttribute("id",r);m.setAttribute("class",
"layer");g={};for(var q=-4;q<=-1;q++)(g[q]=m.appendChild(s.svg("g"))).setAttribute("transform","scale("+Math.pow(2,-q)+")");for(q=2;q>=1;q--)(g[q]=m.appendChild(s.svg("g"))).setAttribute("transform","scale("+Math.pow(2,-q)+")");g[0]=m.appendChild(s.svg("g"));f.init&&f.init(m);u.on("move",e).on("resize",e);e()}return f};f.container=function(){return m};f.id=function(k){if(!arguments.length)return r;r=k;return f};f.visible=function(k){if(!arguments.length)return i;i=k;u&&e();return f};f.transform=function(k){if(!arguments.length)return o;
o=k;u&&e();return f};f.zoom=function(k){if(!arguments.length)return j;j=typeof k=="function"||k==null?k:function(){return k};return f};f.tile=function(k){if(!arguments.length)return c;c=k;return f};f.dispatch=s.dispatch(f);f.on("load",function(k){if(k.tile.proxyRefs){for(var q in k.tile.proxyRefs){var n=k.tile.proxyRefs[q];--n.proxyCount<=0&&h.unload(q)&&n.element.parentNode.removeChild(n.element)}delete k.tile.proxyRefs}});return f};s.image=function(){var d=s.layer(function(e){var f=e.element=s.svg("image"),
h=d.map().tileSize();f.setAttribute("preserveAspectRatio","none");f.setAttribute("width",h.x);f.setAttribute("height",h.y);f.setAttribute("opacity",0);if(typeof a=="function")e.request=s.queue.image(f,a(e),function(){delete e.request;e.ready=true;f.removeAttribute("opacity");d.dispatch({type:"load",tile:e})});else{e.ready=true;f.setAttributeNS(s.ns.xlink,"href",a);d.dispatch({type:"load",tile:e})}},function(e){e.request&&e.request.abort(true)}),a="about:blank";d.url=function(e){if(!arguments.length)return a;
a=typeof e=="string"&&/{.}/.test(e)?s.url(e):e;return d};return d};s.geoJson=function(d){function a(g,k){var q=k({lat:g[1],lon:g[0]}),n=s.svg("circle");n.setAttribute("r",4.5);n.setAttribute("cx",q.x);n.setAttribute("cy",q.y);return n}function e(g,k,q,n){n.push("M");for(var w=0;w<g.length-k;w++){p=q({lat:g[w][1],lon:g[w][0]});n.push(p.x);n.push(",");n.push(p.y);n.push("L")}n.pop()}function f(g,k,q,n){for(var w=0;w<g.length;w++)e(g[w],k,q,n);k&&n.push("Z")}function h(g,k,q,n){for(var w=[],x=0;x<k.length;x++)g(k[x],
q,n,w);if(w.length){g=s.svg("path");g.setAttribute("d",w.join(""));return g}}var c=s.layer(function(g,k){function q(w){var x=u[g.key]||(u[g.key]=[]),G=[];if(w.next)g.request=d(w.next.href,q);for(var H=0;H<w.features.length;H++){var D=w.features[H],l=D.geometry&&D.geometry.type in o&&o[D.geometry.type](D.geometry,k.locationPoint);if(l){D={element:n.appendChild(l),data:D};x.push(D);G.push(D)}}g.ready=true;c.dispatch({type:"load",tile:g,features:G})}var n=g.element=s.svg("g");k=k(g);if(m)q({features:m});
else g.request=d(i(g),q);r&&n.setAttribute("clip-path","url(#"+r+")")},function(g){g.request&&g.request.abort(true);delete u[g.key]}),i=s.url("about:blank"),j=true,r,u={},m;if(!arguments.length)d=s.queue.json;var o={Point:function(g,k){return a(g.coordinates,k)},MultiPoint:function(g,k){for(var q=s.svg("g"),n=0;n<g.coordinates.length;n++)q.appendChild(a(g.coordinates[n],k));return q},LineString:function(g,k){return h(e,[g.coordinates],0,k)},MultiLineString:function(g,k){return h(e,g.coordinates,0,
k)},Polygon:function(g,k){return h(f,[g.coordinates],1,k)},MultiPolygon:function(g,k){return h(f,g.coordinates||g.coords,1,k)},GeometryCollection:function(g,k){for(var q=s.svg("g"),n=0;n<g.geometries.length;n++){var w=g.geometries[n]&&g.geometries[n].type in o&&o[g.geometries[n].type](g.geometries[n],k);w&&q.appendChild(w)}return q}};c.url=function(g){if(!arguments.length)return i;i=typeof g=="string"?s.url(g):g;return c};c.features=function(g){if(!arguments.length)return m;g&&c.tile(false);m=g;return c};
c.clip=function(g){if(!arguments.length)return j;j=g;return c};c.init=function(g){if(j&&c.tile()){var k=c.map().tileSize(),q=g.insertBefore(s.svg("clipPath"),g.firstChild),n=q.appendChild(s.svg("rect"));q.setAttribute("id",r="org.polymaps."+s.id());n.setAttribute("width",k.x);n.setAttribute("height",k.y)}g.setAttribute("fill-rule","evenodd")};c.show=function(g){c.dispatch({type:"show",tile:g,features:u[g.key]||[]})};c.reshow=function(){var g=c.cache.locks();for(var k in g)c.show(g[k])};return c};
s.dblclick=function(){function d(h){var c=e.zoom();c=h.shiftKey?Math.ceil(c)-c-1:1-c+Math.floor(c);e.zoomBy(c,e.mouse(h))}var a={},e,f;a.map=function(h){if(!arguments.length)return e;if(e){f.removeEventListener("dblclick",d,false);f=null}if(e=h){f=e.container();f.addEventListener("dblclick",d,false)}return a};return a};s.drag=function(){function d(j){i={x:j.clientX,y:j.clientY};f.focusableParent().focus();j.preventDefault();c=document.body.style.cursor;document.body.style.cursor="move"}function a(j){if(i){f.panBy({x:j.clientX-
i.x,y:j.clientY-i.y});i.x=j.clientX;i.y=j.clientY}}var e={},f,h,c,i;e.map=function(j){if(!arguments.length)return f;if(f){h.removeEventListener("mousedown",d,false);h=null}if(f=j){h=f.container();h.addEventListener("mousedown",d,false)}return e};window.addEventListener("mousemove",a,false);window.addEventListener("mouseup",function(j){if(i){a(j);i=null;document.body.style.cursor=c}},false);return e};s.wheel=function(){function d(){i=null}function a(u){var m=(u.wheelDelta/120||-u.detail)*0.1,o=j.mouse(u);
if(Y<0){var g=Date.now(),k=g-h;if(k>9&&Math.abs(u.wheelDelta)/k>=50)Y=1;h=g}if(Y==1)m*=0.03;i||(i=j.pointLocation(o));j.off("move",d);if(c)j.zoomBy(m,o,i);else if(m){g=Date.now();if(g-f>200){j.zoomBy(m>0?+1:-1,o,i);f=g}}j.on("move",d);u.preventDefault();return false}var e={},f=0,h=0,c=true,i,j,r;e.smooth=function(u){if(!arguments.length)return c;c=u;return e};e.map=function(u){if(!arguments.length)return j;if(j){r.removeEventListener("mousemove",d,false);r.removeEventListener("mousewheel",a,false);
r.removeEventListener("DOMMouseScroll",a,false);r=null;j.off("move",d)}if(j=u){j.on("move",d);r=j.container();r.addEventListener("mousemove",d,false);r.addEventListener("mousewheel",a,false);r.addEventListener("DOMMouseScroll",a,false)}return e};return e};var Y=/WebKit\/533/.test(navigator.userAgent)?-1:0;s.arrow=function(){function d(k){if(!(k.ctrlKey||k.altKey||k.metaKey)){var q=Date.now(),n=0,w=0;switch(k.keyCode){case 37:if(!c.left){i=q;c.left=1;c.right||(n=m)}break;case 39:if(!c.right){i=q;c.right=
1;c.left||(n=-m)}break;case 38:if(!c.up){i=q;c.up=1;c.down||(w=m)}break;case 40:if(!c.down){i=q;c.down=1;c.up||(w=-m)}break;default:return}if(n||w)o.panBy({x:n,y:w});if(!j&&c.left|c.right|c.up|c.down)j=setInterval(f,u);k.preventDefault()}}function a(k){i=Date.now();switch(k.keyCode){case 37:c.left=0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;default:return}if(j&&!(c.left|c.right|c.up|c.down))j=clearInterval(j);k.preventDefault()}function e(k){switch(k.charCode){case 45:case 95:o.zoom(Math.ceil(o.zoom())-
1);break;case 43:case 61:o.zoom(Math.floor(o.zoom())+1);break;default:return}k.preventDefault()}function f(){if(o)if(!(Date.now()<i+r)){var k=(c.left-c.right)*m,q=(c.up-c.down)*m;if(k||q)o.panBy({x:k,y:q})}}var h={},c={left:0,right:0,up:0,down:0},i=0,j,r=250,u=50,m=16,o,g;h.map=function(k){if(!arguments.length)return o;if(o){g.removeEventListener("keypress",e,false);g.removeEventListener("keydown",d,false);g.removeEventListener("keyup",a,false);g=null}if(o=k){g=o.focusableParent();g.addEventListener("keypress",
e,false);g.addEventListener("keydown",d,false);g.addEventListener("keyup",a,false)}return h};h.speed=function(k){if(!arguments.length)return m;m=k;return h};return h};s.hash=function(){function d(){var i=c.center(),j=c.zoom(),r=Math.max(0,Math.ceil(Math.log(j)/Math.LN2));i="#"+j.toFixed(2)+"/"+i.lat.toFixed(r)+"/"+i.lon.toFixed(r);if(f!==i)location.replace(f=i)}function a(){if(location.hash!==f){var i=(f=location.hash).substring(1).split("/").map(Number);if(i.length<3||i.some(isNaN))d();else{var j=
c.size();c.zoomBy(i[0]-c.zoom(),{x:j.x/2,y:j.y/2},{lat:Math.min(h,Math.max(-h,i[1])),lon:i[2]})}}}var e={},f,h=89.99999999,c;e.map=function(i){if(!arguments.length)return c;if(c){c.off("move",d);window.removeEventListener("hashchange",a,false)}if(c=i){c.on("move",d);window.addEventListener("hashchange",a,false);location.hash?a():d()}return e};return e};s.interact=function(){var d={},a=s.drag(),e=s.wheel(),f=s.dblclick(),h=s.arrow();d.map=function(c){a.map(c);e.map(c);f.map(c);h.map(c);return d};return d};
s.compass=function(){function d(v){n.setAttribute("class","compass active");I||(I=setInterval(a,l));L&&E.panBy(L);H=Date.now();return r(v)}function a(){L&&Date.now()>H+D&&E.panBy(L)}function e(){n.setAttribute("class","compass");if(I){clearInterval(I);I=0}}function f(v){return function(){v?this.setAttribute("class","active"):this.removeAttribute("class");L=v}}function h(v){return function(z){n.setAttribute("class","compass active");var A=E.zoom();E.zoom(v<0?Math.ceil(A)-1:Math.floor(A)+1);return r(z)}}
function c(v){return function(z){E.zoom(v);return r(z)}}function i(){this.setAttribute("class","active")}function j(){this.removeAttribute("class")}function r(v){v.stopPropagation();v.preventDefault();return false}function u(v){var z=Math.SQRT1_2*x,A=x*0.7,C=x*0.2,F=s.svg("g"),J=F.appendChild(s.svg("path")),K=F.appendChild(s.svg("path"));J.setAttribute("class","direction");J.setAttribute("pointer-events","all");J.setAttribute("d","M0,0L"+z+","+z+"A"+x+","+x+" 0 0,1 "+-z+","+z+"Z");K.setAttribute("class",
"chevron");K.setAttribute("d","M"+C+","+(A-C)+"L0,"+A+" "+-C+","+(A-C));K.setAttribute("pointer-events","none");F.addEventListener("mousedown",d,false);F.addEventListener("mouseover",f(v),false);F.addEventListener("mouseout",f(null),false);F.addEventListener("dblclick",r,false);return F}function m(v){var z=x*0.4,A=z/2,C=s.svg("g"),F=C.appendChild(s.svg("path")),J=C.appendChild(s.svg("path")),K=C.appendChild(s.svg("path")),P=C.appendChild(s.svg("path"));F.setAttribute("class","back");F.setAttribute("d",
"M"+-z+",0V"+-z+"A"+z+","+z+" 0 1,1 "+z+","+-z+"V0Z");J.setAttribute("class","direction");J.setAttribute("d",F.getAttribute("d"));K.setAttribute("class","chevron");K.setAttribute("d","M"+-A+","+-z+"H"+A+(v>0?"M0,"+(-z-A)+"V"+-A:""));P.setAttribute("class","fore");P.setAttribute("fill","none");P.setAttribute("d",F.getAttribute("d"));C.addEventListener("mousedown",h(v),false);C.addEventListener("mouseover",i,false);C.addEventListener("mouseout",j,false);C.addEventListener("dblclick",r,false);return C}
function o(v){var z=x*0.2,A=x*0.4,C=s.svg("g"),F=C.appendChild(s.svg("rect")),J=C.appendChild(s.svg("path"));F.setAttribute("pointer-events","all");F.setAttribute("fill","none");F.setAttribute("x",-A);F.setAttribute("y",-0.75*A);F.setAttribute("width",2*A);F.setAttribute("height",1.5*A);J.setAttribute("class","chevron");J.setAttribute("d","M"+-z+",0H"+z);C.addEventListener("mousedown",c(v),false);C.addEventListener("dblclick",r,false);return C}function g(){var v=x+6,z=v,A=E.size();switch(t){case "top-left":break;
case "top-right":v=A.x-v;break;case "bottom-left":z=A.y-z;break;case "bottom-right":v=A.x-v;z=A.y-z;break}n.setAttribute("transform","translate("+v+","+z+")");for(var C in w)C==E.zoom()?w[C].setAttribute("class","active"):w[C].removeAttribute("class")}function k(){for(;n.lastChild;)n.removeChild(n.lastChild);if(B!="none"){var v=n.appendChild(s.svg("g"));v.setAttribute("class","pan");var z=v.appendChild(s.svg("circle"));z.setAttribute("class","back");z.setAttribute("r",x);v.appendChild(u({x:0,y:-G})).setAttribute("transform",
"rotate(0)");v.appendChild(u({x:G,y:0})).setAttribute("transform","rotate(90)");v.appendChild(u({x:0,y:G})).setAttribute("transform","rotate(180)");v.appendChild(u({x:-G,y:0})).setAttribute("transform","rotate(270)");v=v.appendChild(s.svg("circle"));v.setAttribute("fill","none");v.setAttribute("class","fore");v.setAttribute("r",x)}if(y!="none"){v=n.appendChild(s.svg("g"));v.setAttribute("class","zoom");z=-0.5;if(y=="big"){w={};var A=E.zoomRange()[0];for(z=0;A<=E.zoomRange()[1];A++,z++)(w[A]=v.appendChild(o(A))).setAttribute("transform",
"translate(0,"+-(z+0.75)*x*0.4+")")}A=B=="none"?0.4:2;v.setAttribute("transform","translate(0,"+x*(/^top-/.test(t)?A+(z+0.5)*0.4:-A)+")");v.appendChild(m(+1)).setAttribute("transform","translate(0,"+-(z+0.5)*x*0.4+")");v.appendChild(m(-1)).setAttribute("transform","scale(-1)")}g()}var q={},n=s.svg("g"),w={},x=30,G=16,H=0,D=250,l=50,t="top-left",y="small",B="small",I,L,E;n.setAttribute("class","compass");q.radius=function(v){if(!arguments.length)return x;x=v;E&&k();return q};q.speed=function(v){if(!arguments.length)return x;
G=v;return q};q.position=function(v){if(!arguments.length)return t;t=v;E&&k();return q};q.pan=function(v){if(!arguments.length)return B;B=v;E&&k();return q};q.zoom=function(v){if(!arguments.length)return y;y=v;E&&k();return q};q.map=function(v){if(!arguments.length)return E;if(E){n.parentNode.removeChild(n);E.off("move",g).off("resize",g);window.removeEventListener("mouseup",e,false)}if(E=v){window.addEventListener("mouseup",e,false);E.on("move",g).on("resize",g);E.container().appendChild(n);k()}return q};
return q};s.grid=function(){function d(){var h=f.firstChild,c=e.size(),i=e.pointLocation(S);e.pointLocation(c);var j=Math.pow(2,4-Math.round(e.zoom()));i.lat=Math.floor(i.lat/j)*j;i.lon=Math.ceil(i.lon/j)*j;for(var r;(r=e.locationPoint(i).x)<=c.x;i.lon+=j){h||(h=f.appendChild(s.svg("line")));h.setAttribute("x1",r);h.setAttribute("x2",r);h.setAttribute("y1",0);h.setAttribute("y2",c.y);h=h.nextSibling}for(;(r=e.locationPoint(i).y)<=c.y;i.lat-=j){h||(h=f.appendChild(s.svg("line")));h.setAttribute("y1",
r);h.setAttribute("y2",r);h.setAttribute("x1",0);h.setAttribute("x2",c.x);h=h.nextSibling}for(;h;){c=h.nextSibling;f.removeChild(h);h=c}}var a={},e,f=s.svg("g");f.setAttribute("class","grid");a.map=function(h){if(!arguments.length)return e;if(e){f.parentNode.removeChild(f);e.off("move",d).off("resize",d)}if(e=h){e.on("move",d).on("resize",d);e.container().appendChild(f);e.dispatch({type:"move"})}return a};return a}})(org.polymaps);
