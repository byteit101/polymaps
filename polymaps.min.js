if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(o){function L(){for(var e=0;e<L.maps.length;e++)L.maps[e].resize()}function R(e){return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function S(e){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360))}function X(e,f){if(e.row>f.row){var a=e;e=f;f=a}return{x0:e.column,y0:e.row,x1:f.column,y1:f.row,dx:f.column-e.column,dy:f.row-e.row}}function ca(e,f,a,h,i){a=Math.max(a,Math.floor(f.y0));h=Math.min(h,Math.ceil(f.y1));if(e.x0==f.x0&&e.y0==f.y0?e.x0+f.dy/e.dy*e.dx<f.x1:e.x1-f.dy/
e.dy*e.dx<f.x0){var c=e;e=f;f=c}c=e.dx/e.dy;var d=f.dx/f.dy,j=e.dx>0,n=f.dx<0;for(a=a;a<h;a++){var q=c*Math.max(0,Math.min(e.dy,a+j-e.y0))+e.x0;i(Math.floor(d*Math.max(0,Math.min(f.dy,a+n-f.y0))+f.x0),Math.ceil(q),a)}}function da(e,f,a,h,i,c){var d=X(e,f);f=X(f,a);e=X(a,e);if(d.dy>f.dy){a=d;d=f;f=a}if(d.dy>e.dy){a=d;d=e;e=a}if(f.dy>e.dy){a=f;f=e;e=a}d.dy&&ca(e,d,h,i,c);f.dy&&ca(e,f,h,i,c)}o.version="2.0+1.3+2";var U={x:0,y:0};o.id=function(){var e=0;return function(){return++e}}();o.svg=function(e){return document.createElementNS(o.ns.svg,
e)};o.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};o.transform=function(e,f,a,h,i,c){var d={},j,n,q;if(!arguments.length){e=1;f=i=a=0;h=1;c=0}d.zoomFraction=function(m){if(!arguments.length)return n;n=m;j=Math.floor(n+Math.log(Math.sqrt(e*e+f*f+a*a+h*h))/Math.log(2));q=Math.pow(2,-j);return d};d.apply=function(m){var l=Math.pow(2,-m.zoom),u=Math.pow(2,m.zoom-j);return{column:(e*m.column*l+a*m.row*l+i)*u,row:(f*m.column*l+h*m.row*l+c)*u,zoom:m.zoom-j}};d.unapply=function(m){var l=
Math.pow(2,-m.zoom),u=Math.pow(2,m.zoom+j);return{column:(m.column*l*h-m.row*l*a-i*h+c*a)/(e*h-f*a)*u,row:(m.column*l*f-m.row*l*e-i*f+c*e)/(a*f-h*e)*u,zoom:m.zoom+j}};d.toString=function(){return"matrix("+[e*q,f*q,a*q,h*q].join(" ")+" 0 0)"};return d.zoomFraction(0)};o.cache=function(e,f){function a(l){m--;f&&f(l);delete d[l.key];if(l.next)l.next.prev=l.prev;else if(n=l.prev)n.next=null;if(l.prev)l.prev.next=l.next;else if(j=l.next)j.prev=null}function h(){for(var l=n;m>q;l=l.prev){if(!l)break;l.lock||
a(l)}}var i={},c={},d={},j=null,n=null,q=64,m=0;i.peek=function(l){return d[[l.zoom,l.column,l.row].join("/")]};i.load=function(l,u){var v=[l.zoom,l.column,l.row].join("/"),t=d[v];if(t){if(t.prev){if(t.prev.next=t.next)t.next.prev=t.prev;else n=t.prev;t.prev=null;t.next=j;j=j.prev=t}t.lock=1;return c[v]=t}t={key:v,column:l.column,row:l.row,zoom:l.zoom,next:j,prev:null,lock:1};e.call(null,t,u);c[v]=d[v]=t;if(j)j.prev=t;else n=t;j=t;m++;h();return t};i.unload=function(l){if(!(l in c))return false;var u=
c[l];u.lock=0;delete c[l];u.request&&u.request.abort(false)?a(u):h();return u};i.locks=function(){return c};i.size=function(l){if(!arguments.length)return q;q=l;h();return i};return i};o.url=function(e){function f(h){var i=h.zoom<0?1:1<<h.zoom,c=h.column%i;if(c<0)c+=i;return e.replace(/{(.)}/g,function(d,j){switch(j){case "S":return a[(Math.abs(h.zoom)+h.row+c)%a.length];case "Z":return h.zoom;case "X":return c;case "Y":return h.row;case "B":var n=o.map.coordinateLocation({row:h.row,column:c,zoom:h.zoom}),
q=o.map.coordinateLocation({row:h.row+1,column:c+1,zoom:h.zoom}),m=Math.ceil(Math.log(h.zoom)/Math.LN2);return q.lat.toFixed(m)+","+n.lon.toFixed(m)+","+n.lat.toFixed(m)+","+q.lon.toFixed(m)}return j})}var a=[];f.template=function(h){if(!arguments.length)return e;e=h;return f};f.hosts=function(h){if(!arguments.length)return a;a=h;return f};return f};o.dispatch=function(e){var f={};e.on=function(a,h){for(var i=f[a]||(f[a]=[]),c=0;c<i.length;c++)if(i[c].handler==h)return e;i.push({handler:h,on:true});
return e};e.off=function(a,h){var i=f[a];if(i)for(var c=0;c<i.length;c++){var d=i[c];if(d.handler==h){d.on=false;i.splice(c,1);break}}return e};return function(a){var h=f[a.type];if(h){h=h.slice();for(var i=0;i<h.length;i++){var c=h[i];c.on&&c.handler.call(e,a)}}}};o.queue=function(){function e(){if(!(i>=c||!h.length)){i++;h.pop()()}}function f(d){for(var j=0;j<h.length;j++)if(h[j]==d){h.splice(j,1);return true}return false}function a(d,j,n){function q(){m=new XMLHttpRequest;n&&m.overrideMimeType(n);
m.open("GET",d,true);m.onreadystatechange=function(){if(m.readyState==4){i--;m.status<300&&j(m);e()}};m.send(null)}var m;h.push(q);e();return{abort:function(l){if(f(q))return true;if(l&&m){m.abort();return true}return false}}}var h=[],i=0,c=6;return{text:function(d,j,n){return a(d,function(q){q.responseText&&j(q.responseText)},n)},xml:function(d,j){return a(d,function(n){n.responseXML&&j(n.responseXML)},"application/xml")},json:function(d,j){return a(d,function(n){n.responseText&&j(JSON.parse(n.responseText))},
"application/json")},image:function(d,j,n){function q(){m=document.createElement("img");m.onerror=function(){i--;e()};m.onload=function(){i--;n(m);e()};m.src=j;d.setAttributeNS(o.ns.xlink,"href",j)}var m;h.push(q);e();return{abort:function(l){if(f(q))return true;if(l&&m){m.src="about:";return true}return false}}}}}();o.map=function(){function e(){if(u)if(q<u[0])q=u[0];else if(q>u[1])q=u[1];m=q-(q=Math.round(q));l=Math.pow(2,m)}function f(){if(r){var k=45/Math.pow(2,q+m-3),C=Math.max(Math.abs(z*d.x+
t*d.y),Math.abs(g*d.x+J*d.y)),A=R(w-C*k/j.y);C=R(x+C*k/j.y);n.lat=Math.max(A,Math.min(C,n.lat));A=Math.max(Math.abs(z*d.y+t*d.x),Math.abs(g*d.y+J*d.x));n.lon=Math.max(r[0].lon-A*k/j.x,Math.min(r[1].lon+A*k/j.x,n.lon))}}var a={},h,i,c=U,d=U,j={x:256,y:256},n={lat:37.76487,lon:-122.41948},q=12,m=0,l=1,u=[1,18],v=0,t=1,z=0,J=1,g=0,w=-180,x=180,r=[{lat:R(w),lon:-Infinity},{lat:R(x),lon:Infinity}];a.locationCoordinate=function(k){k=o.map.locationCoordinate(k);var C=Math.pow(2,q);k.column*=C;k.row*=C;k.zoom+=
q;return k};a.coordinateLocation=o.map.coordinateLocation;a.coordinatePoint=function(k,C){var A=Math.pow(2,q-C.zoom),F=Math.pow(2,q-k.zoom),B=(C.column*A-k.column*F)*j.x*l;A=(C.row*A-k.row*F)*j.y*l;return{x:d.x+t*B-z*A,y:d.y+z*B+t*A}};a.pointCoordinate=function(k,C){var A=Math.pow(2,q-k.zoom),F=(C.x-d.x)/l,B=(C.y-d.y)/l;return{column:k.column*A+(J*F-g*B)/j.x,row:k.row*A+(g*F+J*B)/j.y,zoom:q}};a.locationPoint=function(k){var C=Math.pow(2,q+m-3)/45,A=(k.lon-n.lon)*C*j.x;k=(S(n.lat)-S(k.lat))*C*j.y;
return{x:d.x+t*A-z*k,y:d.y+z*A+t*k}};a.pointLocation=function(k){var C=45/Math.pow(2,q+m-3),A=(k.x-d.x)*C;k=(k.y-d.y)*C;return{lon:n.lon+(J*A-g*k)/j.x,lat:R(S(n.lat)-(g*A+J*k)/j.y)}};var y=o.svg("rect");y.setAttribute("visibility","hidden");y.setAttribute("pointer-events","all");a.container=function(k){if(!arguments.length)return h;h=k;h.setAttribute("class","map");h.appendChild(y);return a.resize()};a.focusableParent=function(){for(var k=h;k;k=k.parentNode)if(k.tabIndex>=0)return k;return window};
a.mouse=function(k){var C=(h.ownerSVGElement||h).createSVGPoint();if(Y<0&&(window.scrollX||window.scrollY)){var A=document.body.appendChild(o.svg("svg"));A.style.position="absolute";A.style.top=A.style.left="0px";var F=A.getScreenCTM();Y=!(F.f||F.e);document.body.removeChild(A)}if(Y){C.x=k.pageX;C.y=k.pageY}else{C.x=k.clientX;C.y=k.clientY}return C.matrixTransform(h.getScreenCTM().inverse())};a.size=function(k){if(!arguments.length)return c;i=k;return a.resize()};a.resize=function(){if(i){c=i;L.remove(a)}else{var k=
h.ownerSVGElement||h;if(k.offsetWidth==null){y.setAttribute("width","100%");y.setAttribute("height","100%");k=y}b=k.getBoundingClientRect();c={x:b.width,y:b.height};L.add(a)}y.setAttribute("width",c.x);y.setAttribute("height",c.y);d={x:c.x/2,y:c.y/2};f();a.dispatch({type:"resize"});return a};a.tileSize=function(k){if(!arguments.length)return j;j=k;a.dispatch({type:"move"});return a};a.center=function(k){if(!arguments.length)return n;n=k;f();a.dispatch({type:"move"});return a};a.panBy=function(k){var C=
45/Math.pow(2,q+m-3),A=k.x*C;k=k.y*C;return a.center({lon:n.lon+(g*k-J*A)/j.x,lat:R(S(n.lat)+(g*A+J*k)/j.y)})};a.centerRange=function(k){if(!arguments.length)return r;if(r=k){w=r[0].lat>-90?S(r[0].lat):-Infinity;x=r[0].lat<90?S(r[1].lat):Infinity}else{w=-Infinity;x=Infinity}f();a.dispatch({type:"move"});return a};a.zoom=function(k){if(!arguments.length)return q+m;q=k;e();return a.center(n)};a.zoomBy=function(k,C,A){if(arguments.length<2)return a.zoom(q+m+k);if(arguments.length<3)A=a.pointLocation(C);
q=q+m+k;e();var F=a.locationPoint(A);return a.panBy({x:C.x-F.x,y:C.y-F.y})};a.zoomRange=function(k){if(!arguments.length)return u;u=k;return a.zoom(q+m)};a.angle=function(k){if(!arguments.length)return v;v=k;t=Math.cos(v);z=Math.sin(v);J=Math.cos(-v);g=Math.sin(-v);f();a.dispatch({type:"move"});return a};a.add=function(k){k.map(a);return a};a.remove=function(k){k.map(null);return a};a.dispatch=o.dispatch(a);return a};L.maps=[];L.add=function(e){for(var f=0;f<L.maps.length;f++)if(L.maps[f]==e)return;
L.maps.push(e)};L.remove=function(e){for(var f=0;f<L.maps.length;f++)if(L.maps[f]==e){L.maps.splice(f,1);return}};window.addEventListener("resize",L,false);o.map.locationCoordinate=function(e){var f=1/360;return{column:(e.lon+180)*f,row:(180-S(e.lat))*f,zoom:0}};o.map.coordinateLocation=function(e){var f=45/Math.pow(2,e.zoom-3);return{lon:f*e.column-180,lat:R(180-f*e.row)}};var Y=/WebKit/.test(navigator.userAgent)?-1:0;o.layer=function(e,f){function a(g){for(var w=z[0].nextSibling;t<g;t++){u.insertBefore(z[-4],
w);u.insertBefore(z[2],w);u.insertBefore(z[1],w);for(var x=z[-4],r=-4;r<2;)z[r]=z[++r];z[r]=x}}function h(g){for(var w=z[0].nextSibling;t>g;t--){u.insertBefore(z[-1],w);u.insertBefore(z[2],z[-4]);for(var x=z[2],r=2;r>-4;)z[r]=z[--r];z[r]=x}}function i(){function g(I){var K=I.zoom,M=K<0?1:1<<K,P=I.column%M,Z=I.row;if(P<0)P+=M;return{locationPoint:function(T){T=o.map.locationCoordinate(T);var Q=Math.pow(2,K-T.zoom);return{x:A.x*(Q*T.column-P),y:A.y*(Q*T.row-Z)}}}}function w(I,K,M){var P=s.zoom,Z=2-
D,T=4+D;for(I=I;I<K;I++){var Q=d.load({column:I,row:M,zoom:P},g);if(!Q.ready&&!(Q.key in E)){Q.proxyRefs={};for(var V,W,N,O=1;O<=Z;O++){W=true;for(var $=0,ea=1<<O;$<=ea;$++)for(var aa=0;aa<=ea;aa++)if((N=d.peek(V={column:(I<<O)+aa,row:(M<<O)+$,zoom:P+O}))&&N.ready){E[N.key]=d.load(V);N.proxyCount++;Q.proxyRefs[N.key]=N}else W=false;if(W)break}if(!W)for(O=1;O<=T;O++)if((N=d.peek(V={column:I>>O,row:M>>O,zoom:P-O}))&&N.ready){E[N.key]=d.load(V);N.proxyCount++;Q.proxyRefs[N.key]=N;break}}E[Q.key]=Q}}
var x=c.map(),r=x.zoom(),y=r-(r=Math.round(r)),k=x.size(),C=x.angle(),A=x.tileSize(),F=x.locationCoordinate(x.center());n?u.removeAttribute("visibility"):u.setAttribute("visibility","hidden");if(t!=r){if(t<r)a(r);else if(t>r)h(r);else t=r;for(var B=-4;B<=2;B++){var G=z[B];G.setAttribute("class","zoom"+(B<0?"":"+")+B+" zoom"+(r+B));G.setAttribute("transform","scale("+Math.pow(2,-B)+")")}}u.setAttribute("transform","translate("+k.x/2+","+k.y/2+")"+(C?"rotate("+C/Math.PI*180+")":"")+(y?"scale("+Math.pow(2,
y)+")":"")+(v?v.zoomFraction(y):""));var s=x.pointCoordinate(F,U);B=x.pointCoordinate(F,{x:k.x,y:0});G=x.pointCoordinate(F,k);x=x.pointCoordinate(F,{x:0,y:k.y});if(!y&&!C&&!v){F.column=(Math.round(A.x*F.column)+(k.x&1)/2)/A.x;F.row=(Math.round(A.y*F.row)+(k.y&1)/2)/A.y}var D=q?q(r)-r:0;if(D){y=Math.pow(2,D);s.column*=y;s.row*=y;B.column*=y;B.row*=y;G.column*=y;G.row*=y;x.column*=y;x.row*=y;s.zoom=B.zoom=G.zoom=x.zoom+=D}if(v){s=v.unapply(s);B=v.unapply(B);G=v.unapply(G);x=v.unapply(x);F=v.unapply(F)}r=
d.locks();var E={};for(var H in r)r[H].proxyCount=0;if(n&&D>-5&&D<3){y=s.zoom<0?1:1<<s.zoom;if(j){da(s,B,G,0,y,w);da(G,x,s,0,y,w)}else{G=Math.floor((s.column+G.column)/2);x=Math.max(0,Math.min(y-1,Math.floor((B.row+x.row)/2)));B=Math.min(4,s.zoom);G=G>>B<<B;x=x>>B<<B;w(G,G+1,x)}}for(H in E){B=E[H];y=Math.pow(2,B.level=B.zoom-F.zoom);G=A.x*(B.column-F.column*y);x=A.y*(B.row-F.row*y);B.element.setAttribute("transform","translate("+G+","+x+")")}for(H in r)if(!(H in E)){B=d.unload(H);B.element.parentNode.removeChild(B.element);
delete B.proxyRefs}for(H in E){B=E[H];if(B.element.parentNode!=z[B.level]){z[B.level].appendChild(B.element);c.show&&c.show(B)}}}var c={},d=c.cache=o.cache(e,f).size(512),j=true,n=true,q,m,l,u=o.svg("g"),v,t,z={};u.setAttribute("class","layer");for(var J=-4;J<=-1;J++)z[J]=u.appendChild(o.svg("g"));for(J=2;J>=1;J--)z[J]=u.appendChild(o.svg("g"));z[0]=u.appendChild(o.svg("g"));c.map=function(g){if(!arguments.length)return l;if(l){if(l==g){u.parentNode.appendChild(u);return c}l.off("move",i).off("resize",
i);u.parentNode.removeChild(u)}if(l=g){l.container().appendChild(u);c.init&&c.init(u);l.on("move",i).on("resize",i);i()}return c};c.container=function(){return u};c.id=function(g){if(!arguments.length)return m;m=g;return c};c.visible=function(g){if(!arguments.length)return n;n=g;l&&i();return c};c.transform=function(g){if(!arguments.length)return v;v=g;l&&i();return c};c.zoom=function(g){if(!arguments.length)return q;q=typeof g=="function"||g==null?g:function(){return g};return c};c.tile=function(g){if(!arguments.length)return j;
j=g;return c};c.dispatch=o.dispatch(c);c.on("load",function(g){if(g.tile.proxyRefs){for(var w in g.tile.proxyRefs){var x=g.tile.proxyRefs[w];--x.proxyCount<=0&&d.unload(w)&&x.element.parentNode.removeChild(x.element)}delete g.tile.proxyRefs}});return c};o.image=function(){var e=o.layer(function(a){var h=a.element=o.svg("image"),i=e.map().tileSize();h.setAttribute("preserveAspectRatio","none");h.setAttribute("width",i.x);h.setAttribute("height",i.y);h.setAttribute("opacity",0);if(typeof f=="function")a.request=
o.queue.image(h,f(a),function(c){delete a.request;a.ready=true;a.img=c;h.removeAttribute("opacity");e.dispatch({type:"load",tile:a})});else{a.ready=true;h.setAttributeNS(o.ns.xlink,"href",f);e.dispatch({type:"load",tile:a})}},function(a){a.request&&a.request.abort(true)}),f="about:blank";e.url=function(a){if(!arguments.length)return f;f=typeof a=="string"&&/{.}/.test(a)?o.url(a):a;return e};return e};o.geoJson=function(e){function f(g,w){return g&&g.type in z&&z[g.type](g,w)}function a(g,w){var x=
w({lat:g[1],lon:g[0]}),r=o.svg("circle");r.setAttribute("r",4.5);r.setAttribute("cx",x.x);r.setAttribute("cy",x.y);return r}function h(g,w,x,r){r.push("M");for(var y=0;y<g.length-w;y++){p=x({lat:g[y][1],lon:g[y][0]});r.push(p.x);r.push(",");r.push(p.y);r.push("L")}r.pop()}function i(g,w,x,r){for(var y=0;y<g.length;y++)h(g[y],w,x,r);w&&r.push("Z")}function c(g,w,x,r){for(var y=[],k=0;k<w.length;k++)g(w[k],x,r,y);if(y.length){g=o.svg("path");g.setAttribute("d",y.join(""));return g}}var d=o.layer(function(g,
w){function x(y){var k=[];if(y.next)g.request=e(y.next.href,x);switch(y.type){case "FeatureCollection":for(var C=0;C<y.features.length;C++){var A=y.features[C],F=f(A.geometry,w.locationPoint);F&&k.push({element:r.appendChild(F),data:A})}break;case "Feature":(F=f(y.geometry,w.locationPoint))&&k.push({element:r.appendChild(F),data:y});break;default:(F=f(y,w.locationPoint))&&k.push({element:r.appendChild(F),data:{type:"Feature",geometry:y}});break}g.ready=true;k.push.apply(v[g.key]||(v[g.key]=[]),k);
d.dispatch({type:"load",tile:g,features:k})}var r=g.element=o.svg("g");w=w(g);if(t)x({type:"FeatureCollection",features:t});else g.request=e(typeof n=="function"?n(g):n,x);m&&r.setAttribute("clip-path","url(#"+m+")")},function(g){g.request&&g.request.abort(true);delete v[g.key]}),j=d.container(),n="about:blank",q=true,m,l,u,v={},t;j.setAttribute("fill-rule","evenodd");if(!arguments.length)e=o.queue.json;var z={Point:function(g,w){return a(g.coordinates,w)},MultiPoint:function(g,w){for(var x=o.svg("g"),
r=0;r<g.coordinates.length;r++)x.appendChild(a(g.coordinates[r],w));return x},LineString:function(g,w){return c(h,[g.coordinates],0,w)},MultiLineString:function(g,w){return c(h,g.coordinates,0,w)},Polygon:function(g,w){return c(i,[g.coordinates],1,w)},MultiPolygon:function(g,w){return c(i,g.coordinates||g.coords,1,w)},GeometryCollection:function(g,w){for(var x=o.svg("g"),r=0;r<g.geometries.length;r++){var y=f(g.geometries[r],w);y&&x.appendChild(y)}return x}};d.url=function(g){if(!arguments.length)return n;
n=typeof g=="string"&&/{.}/.test(g)?o.url(g):g;typeof n=="string"&&d.tile(false);return d};d.features=function(g){if(!arguments.length)return t;g&&d.tile(false);t=g;return d};d.clip=function(g){if(!arguments.length)return q;q=g;return d};var J=d.map;d.map=function(g){if(g)if(q&&d.tile()){if(!l){l=j.insertBefore(o.svg("clipPath"),j.firstChild);u=l.appendChild(o.svg("rect"));l.setAttribute("id",m="org.polymaps."+o.id())}var w=g.tileSize();u.setAttribute("width",w.x);u.setAttribute("height",w.y)}else if(l){j.removeChild(l);
l=u=m=null}return J.apply(this,arguments)};d.show=function(g){d.dispatch({type:"show",tile:g,features:v[g.key]||[]})};d.reshow=function(){var g=d.cache.locks();for(var w in g)d.show(g[w])};return d};o.dblclick=function(){function e(c){var d=h.zoom();d=c.shiftKey?Math.ceil(d)-d-1:1-d+Math.floor(d);a==="mouse"?h.zoomBy(d,h.mouse(c)):h.zoomBy(d)}var f={},a="mouse",h,i;f.zoom=function(c){if(!arguments.length)return a;a=c;return f};f.map=function(c){if(!arguments.length)return h;if(h){i.removeEventListener("dblclick",
e,false);i=null}if(h=c){i=h.container();i.addEventListener("dblclick",e,false)}return f};return f};o.drag=function(){function e(j){d={x:j.clientX,y:j.clientY};h.focusableParent().focus();j.preventDefault();c=document.body.style.cursor;document.body.style.cursor="move"}function f(j){if(d){h.panBy({x:j.clientX-d.x,y:j.clientY-d.y});d.x=j.clientX;d.y=j.clientY}}var a={},h,i,c,d;a.map=function(j){if(!arguments.length)return h;if(h){i.removeEventListener("mousedown",e,false);i=null}if(h=j){i=h.container();
i.addEventListener("mousedown",e,false)}return a};window.addEventListener("mousemove",f,false);window.addEventListener("mouseup",function(j){if(d){f(j);d=null;document.body.style.cursor=c}},false);return a};o.wheel=function(){function e(){j=null}function f(m){var l=(m.wheelDelta/120||-m.detail)*0.1,u=n.mouse(m);if(ba<0){var v=Date.now(),t=v-i;if(t>9&&Math.abs(m.wheelDelta)/t>=50)ba=1;i=v}if(ba==1)l*=0.03;j||(j=n.pointLocation(u));n.off("move",e);if(c)d==="mouse"?n.zoomBy(l,u,j):n.zoomBy(l);else if(l){v=
Date.now();if(v-h>200){l=l>0?+1:-1;d==="mouse"?n.zoomBy(l,u,j):n.zoomBy(l);h=v}}n.on("move",e);m.preventDefault();return false}var a={},h=0,i=0,c=true,d="mouse",j,n,q;a.smooth=function(m){if(!arguments.length)return c;c=m;return a};a.zoom=function(m){if(!arguments.length)return d;d=m;return a};a.map=function(m){if(!arguments.length)return n;if(n){q.removeEventListener("mousemove",e,false);q.removeEventListener("mousewheel",f,false);q.removeEventListener("DOMMouseScroll",f,false);q=null;n.off("move",
e)}if(n=m){n.on("move",e);q=n.container();q.addEventListener("mousemove",e,false);q.addEventListener("mousewheel",f,false);q.addEventListener("DOMMouseScroll",f,false)}return a};return a};var ba=/WebKit\/533/.test(navigator.userAgent)?-1:0;o.arrow=function(){function e(v){if(!(v.ctrlKey||v.altKey||v.metaKey)){var t=Date.now(),z=0,J=0;switch(v.keyCode){case 37:if(!c.left){d=t;c.left=1;c.right||(z=m)}break;case 39:if(!c.right){d=t;c.right=1;c.left||(z=-m)}break;case 38:if(!c.up){d=t;c.up=1;c.down||
(J=m)}break;case 40:if(!c.down){d=t;c.down=1;c.up||(J=-m)}break;default:return}if(z||J)l.panBy({x:z,y:J});if(!j&&c.left|c.right|c.up|c.down)j=setInterval(h,q);v.preventDefault()}}function f(v){d=Date.now();switch(v.keyCode){case 37:c.left=0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;default:return}if(j&&!(c.left|c.right|c.up|c.down))j=clearInterval(j);v.preventDefault()}function a(v){switch(v.charCode){case 45:case 95:l.zoom(Math.ceil(l.zoom())-1);break;case 43:case 61:l.zoom(Math.floor(l.zoom())+
1);break;default:return}v.preventDefault()}function h(){if(l)if(!(Date.now()<d+n)){var v=(c.left-c.right)*m,t=(c.up-c.down)*m;if(v||t)l.panBy({x:v,y:t})}}var i={},c={left:0,right:0,up:0,down:0},d=0,j,n=250,q=50,m=16,l,u;i.map=function(v){if(!arguments.length)return l;if(l){u.removeEventListener("keypress",a,false);u.removeEventListener("keydown",e,false);u.removeEventListener("keyup",f,false);u=null}if(l=v){u=l.focusableParent();u.addEventListener("keypress",a,false);u.addEventListener("keydown",
e,false);u.addEventListener("keyup",f,false)}return i};i.speed=function(v){if(!arguments.length)return m;m=v;return i};return i};o.hash=function(){function e(){var d=c.center(),j=c.zoom(),n=Math.max(0,Math.ceil(Math.log(j)/Math.LN2));d="#"+j.toFixed(2)+"/"+d.lat.toFixed(n)+"/"+d.lon.toFixed(n);if(h!==d)location.replace(h=d)}function f(){if(location.hash!==h){var d=(h=location.hash).substring(1).split("/").map(Number);if(d.length<3||d.some(isNaN))e();else{var j=c.size();c.zoomBy(d[0]-c.zoom(),{x:j.x/
2,y:j.y/2},{lat:Math.min(i,Math.max(-i,d[1])),lon:d[2]})}}}var a={},h,i=89.99999999,c;a.map=function(d){if(!arguments.length)return c;if(c){c.off("move",e);window.removeEventListener("hashchange",f,false)}if(c=d){c.on("move",e);window.addEventListener("hashchange",f,false);location.hash?f():e()}return a};return a};o.interact=function(){var e={},f=o.drag(),a=o.wheel(),h=o.dblclick(),i=o.arrow();e.map=function(c){f.map(c);a.map(c);h.map(c);i.map(c);return e};return e};o.compass=function(){function e(s){z.setAttribute("class",
"compass active");F||(F=setInterval(f,y));B&&G.panBy(B);x=Date.now();return n(s)}function f(){B&&Date.now()>x+r&&G.panBy(B)}function a(){z.setAttribute("class","compass");if(F){clearInterval(F);F=0}}function h(s){return function(){s?this.setAttribute("class","active"):this.removeAttribute("class");B=s}}function i(s){return function(D){z.setAttribute("class","compass active");var E=G.zoom();G.zoom(s<0?Math.ceil(E)-1:Math.floor(E)+1);return n(D)}}function c(s){return function(D){G.zoom(s);return n(D)}}
function d(){this.setAttribute("class","active")}function j(){this.removeAttribute("class")}function n(s){s.stopPropagation();s.preventDefault();return false}function q(s){var D=Math.SQRT1_2*g,E=g*0.7,H=g*0.2,I=o.svg("g"),K=I.appendChild(o.svg("path")),M=I.appendChild(o.svg("path"));K.setAttribute("class","direction");K.setAttribute("pointer-events","all");K.setAttribute("d","M0,0L"+D+","+D+"A"+g+","+g+" 0 0,1 "+-D+","+D+"Z");M.setAttribute("class","chevron");M.setAttribute("d","M"+H+","+(E-H)+"L0,"+
E+" "+-H+","+(E-H));M.setAttribute("pointer-events","none");I.addEventListener("mousedown",e,false);I.addEventListener("mouseover",h(s),false);I.addEventListener("mouseout",h(null),false);I.addEventListener("dblclick",n,false);return I}function m(s){var D=g*0.4,E=D/2,H=o.svg("g"),I=H.appendChild(o.svg("path")),K=H.appendChild(o.svg("path")),M=H.appendChild(o.svg("path")),P=H.appendChild(o.svg("path"));I.setAttribute("class","back");I.setAttribute("d","M"+-D+",0V"+-D+"A"+D+","+D+" 0 1,1 "+D+","+-D+
"V0Z");K.setAttribute("class","direction");K.setAttribute("d",I.getAttribute("d"));M.setAttribute("class","chevron");M.setAttribute("d","M"+-E+","+-D+"H"+E+(s>0?"M0,"+(-D-E)+"V"+-E:""));P.setAttribute("class","fore");P.setAttribute("fill","none");P.setAttribute("d",I.getAttribute("d"));H.addEventListener("mousedown",i(s),false);H.addEventListener("mouseover",d,false);H.addEventListener("mouseout",j,false);H.addEventListener("dblclick",n,false);return H}function l(s){var D=g*0.2,E=g*0.4,H=o.svg("g"),
I=H.appendChild(o.svg("rect")),K=H.appendChild(o.svg("path"));I.setAttribute("pointer-events","all");I.setAttribute("fill","none");I.setAttribute("x",-E);I.setAttribute("y",-0.75*E);I.setAttribute("width",2*E);I.setAttribute("height",1.5*E);K.setAttribute("class","chevron");K.setAttribute("d","M"+-D+",0H"+D);H.addEventListener("mousedown",c(s),false);H.addEventListener("dblclick",n,false);return H}function u(){var s=g+6,D=s,E=G.size();switch(k){case "top-left":break;case "top-right":s=E.x-s;break;
case "bottom-left":D=E.y-D;break;case "bottom-right":s=E.x-s;D=E.y-D;break}z.setAttribute("transform","translate("+s+","+D+")");for(var H in J)H==G.zoom()?J[H].setAttribute("class","active"):J[H].removeAttribute("class")}function v(){for(;z.lastChild;)z.removeChild(z.lastChild);if(A!="none"){var s=z.appendChild(o.svg("g"));s.setAttribute("class","pan");var D=s.appendChild(o.svg("circle"));D.setAttribute("class","back");D.setAttribute("r",g);s.appendChild(q({x:0,y:-w})).setAttribute("transform","rotate(0)");
s.appendChild(q({x:w,y:0})).setAttribute("transform","rotate(90)");s.appendChild(q({x:0,y:w})).setAttribute("transform","rotate(180)");s.appendChild(q({x:-w,y:0})).setAttribute("transform","rotate(270)");s=s.appendChild(o.svg("circle"));s.setAttribute("fill","none");s.setAttribute("class","fore");s.setAttribute("r",g)}if(C!="none"){s=z.appendChild(o.svg("g"));s.setAttribute("class","zoom");D=-0.5;if(C=="big"){J={};var E=G.zoomRange()[0];for(D=0;E<=G.zoomRange()[1];E++,D++)(J[E]=s.appendChild(l(E))).setAttribute("transform",
"translate(0,"+-(D+0.75)*g*0.4+")")}E=A=="none"?0.4:2;s.setAttribute("transform","translate(0,"+g*(/^top-/.test(k)?E+(D+0.5)*0.4:-E)+")");s.appendChild(m(+1)).setAttribute("transform","translate(0,"+-(D+0.5)*g*0.4+")");s.appendChild(m(-1)).setAttribute("transform","scale(-1)")}u()}var t={},z=o.svg("g"),J={},g=30,w=16,x=0,r=250,y=50,k="top-left",C="small",A="small",F,B,G;z.setAttribute("class","compass");t.radius=function(s){if(!arguments.length)return g;g=s;G&&v();return t};t.speed=function(s){if(!arguments.length)return g;
w=s;return t};t.position=function(s){if(!arguments.length)return k;k=s;G&&v();return t};t.pan=function(s){if(!arguments.length)return A;A=s;G&&v();return t};t.zoom=function(s){if(!arguments.length)return C;C=s;G&&v();return t};t.map=function(s){if(!arguments.length)return G;if(G){z.parentNode.removeChild(z);G.off("move",u).off("resize",u);window.removeEventListener("mouseup",a,false)}if(G=s){window.addEventListener("mouseup",a,false);G.on("move",u).on("resize",u);G.container().appendChild(z);v()}return t};
return t};o.grid=function(){function e(){var i=h.firstChild,c=a.size(),d=a.pointLocation(U);a.pointLocation(c);var j=Math.pow(2,4-Math.round(a.zoom()));d.lat=Math.floor(d.lat/j)*j;d.lon=Math.ceil(d.lon/j)*j;for(var n;(n=a.locationPoint(d).x)<=c.x;d.lon+=j){i||(i=h.appendChild(o.svg("line")));i.setAttribute("x1",n);i.setAttribute("x2",n);i.setAttribute("y1",0);i.setAttribute("y2",c.y);i=i.nextSibling}for(;(n=a.locationPoint(d).y)<=c.y;d.lat-=j){i||(i=h.appendChild(o.svg("line")));i.setAttribute("y1",
n);i.setAttribute("y2",n);i.setAttribute("x1",0);i.setAttribute("x2",c.x);i=i.nextSibling}for(;i;){c=i.nextSibling;h.removeChild(i);i=c}}var f={},a,h=o.svg("g");h.setAttribute("class","grid");f.map=function(i){if(!arguments.length)return a;if(a){h.parentNode.removeChild(h);a.off("move",e).off("resize",e)}if(a=i){a.on("move",e).on("resize",e);a.container().appendChild(h);a.dispatch({type:"move"})}return f};return f}})(org.polymaps);
