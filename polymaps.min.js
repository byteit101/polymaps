if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(s){function M(){for(var e=0;e<M.maps.length;e++)M.maps[e].resize()}function Q(e){return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function R(e){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360))}function U(e,g){if(e.row>g.row){var a=e;e=g;g=a}return{x0:e.column,y0:e.row,x1:g.column,y1:g.row,dx:g.column-e.column,dy:g.row-e.row}}function Z(e,g,a,c,d){a=Math.max(a,Math.floor(g.y0));c=Math.min(c,Math.ceil(g.y1));if(e.x0==g.x0&&e.y0==g.y0?e.x0+g.dy/e.dy*e.dx<g.x1:e.x1-g.dy/
e.dy*e.dx<g.x0){var h=e;e=g;g=h}h=e.dx/e.dy;var j=g.dx/g.dy,k=e.dx>0,t=g.dx<0;for(a=a;a<c;a++){var o=h*Math.max(0,Math.min(e.dy,a+k-e.y0))+e.x0;d(Math.floor(j*Math.max(0,Math.min(g.dy,a+t-g.y0))+g.x0),Math.ceil(o),a)}}function $(e,g,a,c,d,h){var j=U(e,g);g=U(g,a);e=U(a,e);if(j.dy>g.dy){a=j;j=g;g=a}if(j.dy>e.dy){a=j;j=e;e=a}if(g.dy>e.dy){a=g;g=e;e=a}j.dy&&Z(e,j,c,d,h);g.dy&&Z(e,g,c,d,h)}s.version="2.0.2+8";var S={x:0,y:0};s.id=function(){var e=0;return function(){return++e}}();s.svg=function(e){return document.createElementNS(s.ns.svg,
e)};s.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};s.transform=function(e,g,a,c,d,h){var j={},k,t,o;if(!arguments.length){e=1;g=d=a=0;c=1;h=0}j.zoomFraction=function(l){if(!arguments.length)return t;t=l;k=Math.floor(t+Math.log(Math.sqrt(e*e+g*g+a*a+c*c))/Math.log(2));o=Math.pow(2,-k);return j};j.apply=function(l){var r=Math.pow(2,-l.zoom),f=Math.pow(2,l.zoom-k);return{column:(e*l.column*r+a*l.row*r+d)*f,row:(g*l.column*r+c*l.row*r+h)*f,zoom:l.zoom-k}};j.unapply=function(l){var r=
Math.pow(2,-l.zoom),f=Math.pow(2,l.zoom+k);return{column:(l.column*r*c-l.row*r*a-d*c+h*a)/(e*c-g*a)*f,row:(l.column*r*g-l.row*r*e-d*g+h*e)/(a*g-c*e)*f,zoom:l.zoom+k}};j.toString=function(){return"matrix("+[e*o,g*o,a*o,c*o].join(" ")+" 0 0)"};return j.zoomFraction(0)};s.cache=function(e,g){function a(r){l--;g&&g(r);delete j[r.key];if(r.next)r.next.prev=r.prev;else if(t=r.prev)t.next=null;if(r.prev)r.prev.next=r.next;else if(k=r.next)k.prev=null}function c(){for(var r=t;l>o;r=r.prev){if(!r)break;r.lock||
a(r)}}var d={},h={},j={},k=null,t=null,o=64,l=0;d.peek=function(r){return j[[r.zoom,r.column,r.row].join("/")]};d.load=function(r,f){var m=[r.zoom,r.column,r.row].join("/"),q=j[m];if(q){if(q.prev){if(q.prev.next=q.next)q.next.prev=q.prev;else t=q.prev;q.prev=null;q.next=k;k=k.prev=q}q.lock=1;return h[m]=q}q={key:m,column:r.column,row:r.row,zoom:r.zoom,next:k,prev:null,lock:1};e.call(null,q,f);h[m]=j[m]=q;if(k)k.prev=q;else t=q;k=q;l++;c();return q};d.unload=function(r){if(!(r in h))return false;var f=
h[r];f.lock=0;delete h[r];f.request&&f.request.abort(false)?a(f):c();return f};d.locks=function(){return h};d.size=function(r){if(!arguments.length)return o;o=r;c();return d};return d};s.url=function(e){function g(c){var d=c.zoom<0?1:1<<c.zoom,h=c.column%d;if(h<0)h+=d;return e.replace(/{(.)}/g,function(j,k){switch(k){case "S":return a[(Math.abs(c.zoom)+c.row+h)%a.length];case "Z":return c.zoom;case "X":return h;case "Y":return c.row;case "B":var t=s.map.coordinateLocation({row:c.row,column:h,zoom:c.zoom}),
o=s.map.coordinateLocation({row:c.row+1,column:h+1,zoom:c.zoom}),l=Math.ceil(Math.log(c.zoom)/Math.LN2);return o.lat.toFixed(l)+","+t.lon.toFixed(l)+","+t.lat.toFixed(l)+","+o.lon.toFixed(l)}return k})}var a=[];g.template=function(c){if(!arguments.length)return e;e=c;return g};g.hosts=function(c){if(!arguments.length)return a;a=c;return g};return g};s.dispatch=function(e){var g={};e.on=function(a,c){for(var d=g[a]||(g[a]=[]),h=0;h<d.length;h++)if(d[h].handler==c)return e;d.push({handler:c,on:true});
return e};e.off=function(a,c){var d=g[a];if(d)for(var h=0;h<d.length;h++){var j=d[h];if(j.handler==c){j.on=false;d.splice(h,1);break}}return e};return function(a){var c=g[a.type];if(c){c=c.slice();for(var d=0;d<c.length;d++){var h=c[d];h.on&&h.handler.call(e,a)}}}};s.queue=function(){function e(){if(!(d>=h||!c.length)){d++;c.pop()()}}function g(j){for(var k=0;k<c.length;k++)if(c[k]==j){c.splice(k,1);return true}return false}function a(j,k,t){function o(){l=new XMLHttpRequest;t&&l.overrideMimeType(t);
l.open("GET",j,true);l.onreadystatechange=function(){if(l.readyState==4){d--;l.status<300&&k(l);e()}};l.send(null)}var l;c.push(o);e();return{abort:function(r){if(g(o))return true;if(r&&l){l.abort();return true}return false}}}var c=[],d=0,h=6;return{text:function(j,k,t){return a(j,function(o){o.responseText&&k(o.responseText)},t)},xml:function(j,k){return a(j,function(t){t.responseXML&&k(t.responseXML)},"application/xml")},json:function(j,k){return a(j,function(t){t.responseText&&k(JSON.parse(t.responseText))},
"application/json")},image:function(j,k,t){function o(){l=document.createElement("img");l.onerror=function(){d--;e()};l.onload=function(){d--;t(l);e()};l.src=k;j.setAttributeNS(s.ns.xlink,"href",k)}var l;c.push(o);e();return{abort:function(r){if(g(o))return true;if(r&&l){l.src="about:";return true}return false}}}}}();s.map=function(){function e(){if(f)if(o<f[0])o=f[0];else if(o>f[1])o=f[1];l=o-(o=Math.round(o));r=Math.pow(2,l)}function g(){if(C){var i=45/Math.pow(2,o+l-3),y=Math.max(Math.abs(n*j.x+
q*j.y),Math.abs(v*j.x+w*j.y)),x=Q(H-y*i/k.y);y=Q(L+y*i/k.y);t.lat=Math.max(x,Math.min(y,t.lat));x=Math.max(Math.abs(n*j.y+q*j.x),Math.abs(v*j.y+w*j.x));t.lon=Math.max(C[0].lon-x*i/k.x,Math.min(C[1].lon+x*i/k.x,t.lon))}}var a={},c,d,h=S,j=S,k={x:256,y:256},t={lat:37.76487,lon:-122.41948},o=12,l=0,r=1,f=[1,18],m=0,q=1,n=0,w=1,v=0,H=-180,L=180,C=[{lat:Q(H),lon:-Infinity},{lat:Q(L),lon:Infinity}];a.locationCoordinate=function(i){i=s.map.locationCoordinate(i);var y=Math.pow(2,o);i.column*=y;i.row*=y;i.zoom+=
o;return i};a.coordinateLocation=s.map.coordinateLocation;a.coordinatePoint=function(i,y){var x=Math.pow(2,o-y.zoom),F=Math.pow(2,o-i.zoom),I=(y.column*x-i.column*F)*k.x*r;x=(y.row*x-i.row*F)*k.y*r;return{x:j.x+q*I-n*x,y:j.y+n*I+q*x}};a.pointCoordinate=function(i,y){var x=Math.pow(2,o-i.zoom),F=(y.x-j.x)/r,I=(y.y-j.y)/r;return{column:i.column*x+(w*F-v*I)/k.x,row:i.row*x+(v*F+w*I)/k.y,zoom:o}};a.locationPoint=function(i){var y=Math.pow(2,o+l-3)/45,x=(i.lon-t.lon)*y*k.x;i=(R(t.lat)-R(i.lat))*y*k.y;
return{x:j.x+q*x-n*i,y:j.y+n*x+q*i}};a.pointLocation=function(i){var y=45/Math.pow(2,o+l-3),x=(i.x-j.x)*y;i=(i.y-j.y)*y;return{lon:t.lon+(w*x-v*i)/k.x,lat:Q(R(t.lat)-(v*x+w*i)/k.y)}};var E=s.svg("rect");E.setAttribute("visibility","hidden");E.setAttribute("pointer-events","all");a.container=function(i){if(!arguments.length)return c;c=i;c.setAttribute("class","map");c.appendChild(E);return a.resize()};a.focusableParent=function(){for(var i=c;i;i=i.parentNode)if(i.tabIndex>=0)return i;return window};
a.mouse=function(i){var y=(c.ownerSVGElement||c).createSVGPoint();if(V<0&&(window.scrollX||window.scrollY)){var x=document.body.appendChild(s.svg("svg"));x.style.position="absolute";x.style.top=x.style.left="0px";var F=x.getScreenCTM();V=!(F.f||F.e);document.body.removeChild(x)}if(V){y.x=i.pageX;y.y=i.pageY}else{y.x=i.clientX;y.y=i.clientY}return y.matrixTransform(c.getScreenCTM().inverse())};a.size=function(i){if(!arguments.length)return h;d=i;return a.resize()};a.resize=function(){if(d){h=d;M.remove(a)}else{var i=
c.ownerSVGElement||c;if(i.offsetWidth==null){E.setAttribute("width","100%");E.setAttribute("height","100%");i=E}b=i.getBoundingClientRect();h={x:b.width,y:b.height};M.add(a)}E.setAttribute("width",h.x);E.setAttribute("height",h.y);j={x:h.x/2,y:h.y/2};g();a.dispatch({type:"resize"});return a};a.tileSize=function(i){if(!arguments.length)return k;k=i;a.dispatch({type:"move"});return a};a.center=function(i){if(!arguments.length)return t;t=i;g();a.dispatch({type:"move"});return a};a.panBy=function(i){var y=
45/Math.pow(2,o+l-3),x=i.x*y;i=i.y*y;return a.center({lon:t.lon+(v*i-w*x)/k.x,lat:Q(R(t.lat)+(v*x+w*i)/k.y)})};a.centerRange=function(i){if(!arguments.length)return C;if(C=i){H=C[0].lat>-90?R(C[0].lat):-Infinity;L=C[0].lat<90?R(C[1].lat):Infinity}else{H=-Infinity;L=Infinity}g();a.dispatch({type:"move"});return a};a.zoom=function(i){if(!arguments.length)return o+l;o=i;e();return a.center(t)};a.zoomBy=function(i,y,x){if(arguments.length<2)return a.zoom(o+l+i);if(arguments.length<3)x=a.pointLocation(y);
o=o+l+i;e();var F=a.locationPoint(x);return a.panBy({x:y.x-F.x,y:y.y-F.y})};a.zoomRange=function(i){if(!arguments.length)return f;f=i;return a.zoom(o+l)};a.angle=function(i){if(!arguments.length)return m;m=i;q=Math.cos(m);n=Math.sin(m);w=Math.cos(-m);v=Math.sin(-m);g();a.dispatch({type:"move"});return a};a.add=function(i){i.map(a);return a};a.remove=function(i){i.map(null);return a};a.dispatch=s.dispatch(a);return a};M.maps=[];M.add=function(e){for(var g=0;g<M.maps.length;g++)if(M.maps[g]==e)return;
M.maps.push(e)};M.remove=function(e){for(var g=0;g<M.maps.length;g++)if(M.maps[g]==e){M.maps.splice(g,1);return}};window.addEventListener("resize",M,false);s.map.locationCoordinate=function(e){var g=1/360;return{column:(e.lon+180)*g,row:(180-R(e.lat))*g,zoom:0}};s.map.coordinateLocation=function(e){var g=45/Math.pow(2,e.zoom-3);return{lon:g*e.column-180,lat:Q(180-g*e.row)}};var V=/WebKit/.test(navigator.userAgent)?-1:0;s.layer=function(e,g){function a(){function m(u){var z=u.zoom,A=z<0?1:1<<z,B=u.column%
A,G=u.row;if(B<0)B+=A;return{locationPoint:function(J){J=s.map.locationCoordinate(J);var K=Math.pow(2,z-J.zoom);return{x:C.x*(K*J.column-B),y:C.y*(K*J.row-G)}}}}function q(u,z,A){var B=y.zoom,G=2-F,J=4+F;for(u=u;u<z;u++){var K=d.load({column:u,row:A,zoom:B},m);if(!K.ready&&!(K.key in I)){K.proxyRefs={};for(var P,T,N,O=1;O<=G;O++){T=true;for(var W=0,aa=1<<O;W<=aa;W++)for(var X=0;X<=aa;X++)if((N=d.peek(P={column:(u<<O)+X,row:(A<<O)+W,zoom:B+O}))&&N.ready){I[N.key]=d.load(P);N.proxyCount++;K.proxyRefs[N.key]=
N}else T=false;if(T)break}if(!T)for(O=1;O<=J;O++)if((N=d.peek(P={column:u>>O,row:A>>O,zoom:B-O}))&&N.ready){I[N.key]=d.load(P);N.proxyCount++;K.proxyRefs[N.key]=N;break}}I[K.key]=K}}var n=c.map(),w=n.zoom(),v=w-(w=Math.round(w)),H=n.size(),L=n.angle(),C=n.tileSize(),E=n.locationCoordinate(n.center());j?l.removeAttribute("visibility"):l.setAttribute("visibility","hidden");for(var i=-4;i<=2;i++)f[i].setAttribute("class","zoom"+(i<0?"":"+")+i+" zoom"+(w+i));l.setAttribute("transform","translate("+H.x/
2+","+H.y/2+")"+(L?"rotate("+L/Math.PI*180+")":"")+(v?"scale("+Math.pow(2,v)+")":"")+(r?r.zoomFraction(v):""));var y=n.pointCoordinate(E,S);i=n.pointCoordinate(E,{x:H.x,y:0});var x=n.pointCoordinate(E,H);n=n.pointCoordinate(E,{x:0,y:H.y});if(!v&&!L&&!r){E.column=(Math.round(C.x*E.column)+(H.x&1)/2)/C.x;E.row=(Math.round(C.y*E.row)+(H.y&1)/2)/C.y}var F=k?k(w)-w:0;if(F){v=Math.pow(2,F);y.column*=v;y.row*=v;i.column*=v;i.row*=v;x.column*=v;x.row*=v;n.column*=v;n.row*=v;y.zoom=i.zoom=x.zoom=n.zoom+=F}if(r){y=
r.unapply(y);i=r.unapply(i);x=r.unapply(x);n=r.unapply(n);E=r.unapply(E)}w=d.locks();var I={};for(var D in w)w[D].proxyCount=0;if(j&&F>-5&&F<3){v=y.zoom<0?1:1<<y.zoom;if(h){$(y,i,x,0,v,q);$(x,n,y,0,v,q)}else{x=Math.floor((y.column+x.column)/2);n=Math.max(0,Math.min(v-1,Math.floor((i.row+n.row)/2)));i=Math.min(4,y.zoom);x=x>>i<<i;n=n>>i<<i;q(x,x+1,n)}}for(D in I){i=I[D];v=Math.pow(2,i.level=i.zoom-E.zoom);x=C.x*(i.column-E.column*v);n=C.y*(i.row-E.row*v);i.element.setAttribute("transform","translate("+
x+","+n+")")}for(D in w)if(!(D in I)){i=d.unload(D);i.element.parentNode.removeChild(i.element);delete i.proxyRefs}for(D in I){i=I[D];if(i.element.parentNode!=f[i.level]){f[i.level].appendChild(i.element);c.show&&c.show(i)}}}var c={},d=c.cache=s.cache(e,g).size(512),h=true,j=true,k,t,o,l,r,f;c.map=function(m){if(!arguments.length)return o;if(o){if(o==m){l.parentNode.appendChild(l);return c}o.off("move",a).off("resize",a);l.parentNode.removeChild(l);l=f=null}if(o=m){l=o.container().appendChild(s.svg("g"));
t&&l.setAttribute("id",t);l.setAttribute("class","layer");f={};for(var q=-4;q<=-1;q++)(f[q]=l.appendChild(s.svg("g"))).setAttribute("transform","scale("+Math.pow(2,-q)+")");for(q=2;q>=1;q--)(f[q]=l.appendChild(s.svg("g"))).setAttribute("transform","scale("+Math.pow(2,-q)+")");f[0]=l.appendChild(s.svg("g"));c.init&&c.init(l);o.on("move",a).on("resize",a);a()}return c};c.container=function(){return l};c.id=function(m){if(!arguments.length)return t;t=m;return c};c.visible=function(m){if(!arguments.length)return j;
j=m;o&&a();return c};c.transform=function(m){if(!arguments.length)return r;r=m;o&&a();return c};c.zoom=function(m){if(!arguments.length)return k;k=typeof m=="function"||m==null?m:function(){return m};return c};c.tile=function(m){if(!arguments.length)return h;h=m;return c};c.dispatch=s.dispatch(c);c.on("load",function(m){if(m.tile.proxyRefs){for(var q in m.tile.proxyRefs){var n=m.tile.proxyRefs[q];--n.proxyCount<=0&&d.unload(q)&&n.element.parentNode.removeChild(n.element)}delete m.tile.proxyRefs}});
return c};s.image=function(){var e=s.layer(function(a){var c=a.element=s.svg("image"),d=e.map().tileSize();c.setAttribute("preserveAspectRatio","none");c.setAttribute("width",d.x);c.setAttribute("height",d.y);c.setAttribute("opacity",0);if(typeof g=="function")a.request=s.queue.image(c,g(a),function(){delete a.request;a.ready=true;c.removeAttribute("opacity");e.dispatch({type:"load",tile:a})});else{a.ready=true;c.setAttributeNS(s.ns.xlink,"href",g);e.dispatch({type:"load",tile:a})}},function(a){a.request&&
a.request.abort(true)}),g="about:blank";e.url=function(a){if(!arguments.length)return g;g=typeof a=="string"&&/{.}/.test(a)?s.url(a):a;return e};return e};s.geoJson=function(e){function g(f,m){var q=m({lat:f[1],lon:f[0]}),n=s.svg("circle");n.setAttribute("r",4.5);n.setAttribute("cx",q.x);n.setAttribute("cy",q.y);return n}function a(f,m,q,n){n.push("M");for(var w=0;w<f.length-m;w++){p=q({lat:f[w][1],lon:f[w][0]});n.push(p.x);n.push(",");n.push(p.y);n.push("L")}n.pop()}function c(f,m,q,n){for(var w=
0;w<f.length;w++)a(f[w],m,q,n);m&&n.push("Z")}function d(f,m,q,n){for(var w=[],v=0;v<m.length;v++)f(m[v],q,n,w);if(w.length){f=s.svg("path");f.setAttribute("d",w.join(""));return f}}var h=s.layer(function(f,m){function q(w){var v=o[f.key]||(o[f.key]=[]),H=[];if(w.next)f.request=e(w.next.href,q);for(var L=0;L<w.features.length;L++){var C=w.features[L],E=C.geometry&&C.geometry.type in r&&r[C.geometry.type](C.geometry,m.locationPoint);if(E){C={element:n.appendChild(E),data:C};v.push(C);H.push(C)}}f.ready=
true;h.dispatch({type:"load",tile:f,features:H})}var n=f.element=s.svg("g");m=m(f);if(l)q({features:l});else f.request=e(typeof j=="function"?j(f):j,q);t&&n.setAttribute("clip-path","url(#"+t+")")},function(f){f.request&&f.request.abort(true);delete o[f.key]}),j="about:blank",k=true,t,o={},l;if(!arguments.length)e=s.queue.json;var r={Point:function(f,m){return g(f.coordinates,m)},MultiPoint:function(f,m){for(var q=s.svg("g"),n=0;n<f.coordinates.length;n++)q.appendChild(g(f.coordinates[n],m));return q},
LineString:function(f,m){return d(a,[f.coordinates],0,m)},MultiLineString:function(f,m){return d(a,f.coordinates,0,m)},Polygon:function(f,m){return d(c,[f.coordinates],1,m)},MultiPolygon:function(f,m){return d(c,f.coordinates||f.coords,1,m)},GeometryCollection:function(f,m){for(var q=s.svg("g"),n=0;n<f.geometries.length;n++){var w=f.geometries[n]&&f.geometries[n].type in r&&r[f.geometries[n].type](f.geometries[n],m);w&&q.appendChild(w)}return q}};h.url=function(f){if(!arguments.length)return j;j=
typeof f=="string"&&/{.}/.test(f)?s.url(f):f;typeof j=="string"&&h.tile(false);return h};h.features=function(f){if(!arguments.length)return l;f&&h.tile(false);l=f;return h};h.clip=function(f){if(!arguments.length)return k;k=f;return h};h.init=function(f){if(k&&h.tile()){var m=h.map().tileSize(),q=f.insertBefore(s.svg("clipPath"),f.firstChild),n=q.appendChild(s.svg("rect"));q.setAttribute("id",t="org.polymaps."+s.id());n.setAttribute("width",m.x);n.setAttribute("height",m.y)}f.setAttribute("fill-rule",
"evenodd")};h.show=function(f){h.dispatch({type:"show",tile:f,features:o[f.key]||[]})};h.reshow=function(){var f=h.cache.locks();for(var m in f)h.show(f[m])};return h};s.dblclick=function(){function e(d){var h=a.zoom();h=d.shiftKey?Math.ceil(h)-h-1:1-h+Math.floor(h);a.zoomBy(h,a.mouse(d))}var g={},a,c;g.map=function(d){if(!arguments.length)return a;if(a){c.removeEventListener("dblclick",e,false);c=null}if(a=d){c=a.container();c.addEventListener("dblclick",e,false)}return g};return g};s.drag=function(){function e(k){j=
{x:k.clientX,y:k.clientY};c.focusableParent().focus();k.preventDefault();h=document.body.style.cursor;document.body.style.cursor="move"}function g(k){if(j){c.panBy({x:k.clientX-j.x,y:k.clientY-j.y});j.x=k.clientX;j.y=k.clientY}}var a={},c,d,h,j;a.map=function(k){if(!arguments.length)return c;if(c){d.removeEventListener("mousedown",e,false);d=null}if(c=k){d=c.container();d.addEventListener("mousedown",e,false)}return a};window.addEventListener("mousemove",g,false);window.addEventListener("mouseup",
function(k){if(j){g(k);j=null;document.body.style.cursor=h}},false);return a};s.wheel=function(){function e(){j=null}function g(o){var l=(o.wheelDelta/120||-o.detail)*0.1,r=k.mouse(o);if(Y<0){var f=Date.now(),m=f-d;if(m>9&&Math.abs(o.wheelDelta)/m>=50)Y=1;d=f}if(Y==1)l*=0.03;j||(j=k.pointLocation(r));k.off("move",e);if(h)k.zoomBy(l,r,j);else if(l){f=Date.now();if(f-c>200){k.zoomBy(l>0?+1:-1,r,j);c=f}}k.on("move",e);o.preventDefault();return false}var a={},c=0,d=0,h=true,j,k,t;a.smooth=function(o){if(!arguments.length)return h;
h=o;return a};a.map=function(o){if(!arguments.length)return k;if(k){t.removeEventListener("mousemove",e,false);t.removeEventListener("mousewheel",g,false);t.removeEventListener("DOMMouseScroll",g,false);t=null;k.off("move",e)}if(k=o){k.on("move",e);t=k.container();t.addEventListener("mousemove",e,false);t.addEventListener("mousewheel",g,false);t.addEventListener("DOMMouseScroll",g,false)}return a};return a};var Y=/WebKit\/533/.test(navigator.userAgent)?-1:0;s.arrow=function(){function e(f){if(!(f.ctrlKey||
f.altKey||f.metaKey)){var m=Date.now(),q=0,n=0,w=0;switch(f.keyCode){case 37:if(!d.left){h=m;d.left=1;d.right||(q=o)}break;case 39:if(!d.right){h=m;d.right=1;d.left||(q=-o)}break;case 38:if(!d.up){h=m;d.up=1;d.down||(n=o)}break;case 40:if(!d.down){h=m;d.down=1;d.up||(n=-o)}break;case 109:case 189:if(!d.plus){h=m;d.plus=1;d.minus||(w=-1)}break;case 61:case 187:if(!d.minus){h=m;d.minus=1;d.plus||(w=1)}break;default:return}if(w){m=l.zoom();l.zoom(w<0?Math.ceil(m)-1:Math.floor(m)+1)}else if(q||n)l.panBy({x:q,
y:n});if(!j&&d.left|d.right|d.up|d.down)j=setInterval(a,t);f.preventDefault()}}function g(f){h=Date.now();switch(f.keyCode){case 37:d.left=0;break;case 39:d.right=0;break;case 38:d.up=0;break;case 40:d.down=0;break;case 109:case 189:d.plus=0;break;case 61:case 187:d.minus=0;break;default:return}if(j&&!(d.left|d.right|d.up|d.down))j=clearInterval(j);f.preventDefault()}function a(){if(l)if(!(Date.now()<h+k)){var f=(d.left-d.right)*o,m=(d.up-d.down)*o;if(f||m)l.panBy({x:f,y:m})}}var c={},d={left:0,right:0,
up:0,down:0,plus:0,minus:0},h=0,j,k=250,t=50,o=16,l,r;c.map=function(f){if(!arguments.length)return l;if(l){r.removeEventListener("keydown",e,false);r.removeEventListener("keyup",g,false);r=null}if(l=f){r=l.focusableParent();r.addEventListener("keydown",e,false);r.addEventListener("keyup",g,false)}return c};c.speed=function(f){if(!arguments.length)return o;o=f;return c};return c};s.hash=function(){function e(){var j=h.center(),k=h.zoom(),t=Math.max(0,Math.ceil(Math.log(k)/Math.LN2));j="#"+k.toFixed(2)+
"/"+j.lat.toFixed(t)+"/"+j.lon.toFixed(t);if(c!==j)location.replace(c=j)}function g(){if(location.hash!==c){var j=(c=location.hash).substring(1).split("/").map(Number);if(j.length<3||j.some(isNaN))e();else{var k=h.size();h.zoomBy(j[0]-h.zoom(),{x:k.x/2,y:k.y/2},{lat:Math.min(d,Math.max(-d,j[1])),lon:j[2]})}}}var a={},c,d=89.99999999,h;a.map=function(j){if(!arguments.length)return h;if(h){h.off("move",e);window.removeEventListener("hashchange",g,false)}if(h=j){h.on("move",e);window.addEventListener("hashchange",
g,false);location.hash?g():e()}return a};return a};s.interact=function(){var e={},g=s.drag(),a=s.wheel(),c=s.dblclick(),d=s.arrow();e.map=function(h){g.map(h);a.map(h);c.map(h);d.map(h);return e};return e};s.compass=function(){function e(u){n.setAttribute("class","compass active");F||(F=setInterval(g,E));I&&D.panBy(I);L=Date.now();return t(u)}function g(){I&&Date.now()>L+C&&D.panBy(I)}function a(){n.setAttribute("class","compass");if(F){clearInterval(F);F=0}}function c(u){return function(){u?this.setAttribute("class",
"active"):this.removeAttribute("class");I=u}}function d(u){return function(z){n.setAttribute("class","compass active");var A=D.zoom();D.zoom(u<0?Math.ceil(A)-1:Math.floor(A)+1);return t(z)}}function h(u){return function(z){D.zoom(u);return t(z)}}function j(){this.setAttribute("class","active")}function k(){this.removeAttribute("class")}function t(u){u.stopPropagation();u.preventDefault();return false}function o(u){var z=Math.SQRT1_2*v,A=v*0.7,B=v*0.2,G=s.svg("g"),J=G.appendChild(s.svg("path")),K=
G.appendChild(s.svg("path"));J.setAttribute("class","direction");J.setAttribute("pointer-events","all");J.setAttribute("d","M0,0L"+z+","+z+"A"+v+","+v+" 0 0,1 "+-z+","+z+"Z");K.setAttribute("class","chevron");K.setAttribute("d","M"+B+","+(A-B)+"L0,"+A+" "+-B+","+(A-B));K.setAttribute("pointer-events","none");G.addEventListener("mousedown",e,false);G.addEventListener("mouseover",c(u),false);G.addEventListener("mouseout",c(null),false);G.addEventListener("dblclick",t,false);return G}function l(u){var z=
v*0.4,A=z/2,B=s.svg("g"),G=B.appendChild(s.svg("path")),J=B.appendChild(s.svg("path")),K=B.appendChild(s.svg("path")),P=B.appendChild(s.svg("path"));G.setAttribute("class","back");G.setAttribute("d","M"+-z+",0V"+-z+"A"+z+","+z+" 0 1,1 "+z+","+-z+"V0Z");J.setAttribute("class","direction");J.setAttribute("d",G.getAttribute("d"));K.setAttribute("class","chevron");K.setAttribute("d","M"+-A+","+-z+"H"+A+(u>0?"M0,"+(-z-A)+"V"+-A:""));P.setAttribute("class","fore");P.setAttribute("fill","none");P.setAttribute("d",
G.getAttribute("d"));B.addEventListener("mousedown",d(u),false);B.addEventListener("mouseover",j,false);B.addEventListener("mouseout",k,false);B.addEventListener("dblclick",t,false);return B}function r(u){var z=v*0.2,A=v*0.4,B=s.svg("g"),G=B.appendChild(s.svg("rect")),J=B.appendChild(s.svg("path"));G.setAttribute("pointer-events","all");G.setAttribute("fill","none");G.setAttribute("x",-A);G.setAttribute("y",-0.75*A);G.setAttribute("width",2*A);G.setAttribute("height",1.5*A);J.setAttribute("class",
"chevron");J.setAttribute("d","M"+-z+",0H"+z);B.addEventListener("mousedown",h(u),false);B.addEventListener("dblclick",t,false);return B}function f(){var u=v+6,z=u,A=D.size();switch(i){case "top-left":break;case "top-right":u=A.x-u;break;case "bottom-left":z=A.y-z;break;case "bottom-right":u=A.x-u;z=A.y-z;break}n.setAttribute("transform","translate("+u+","+z+")");for(var B in w)B==D.zoom()?w[B].setAttribute("class","active"):w[B].removeAttribute("class")}function m(){for(;n.lastChild;)n.removeChild(n.lastChild);
if(x!="none"){var u=n.appendChild(s.svg("g"));u.setAttribute("class","pan");var z=u.appendChild(s.svg("circle"));z.setAttribute("class","back");z.setAttribute("r",v);u.appendChild(o({x:0,y:-H})).setAttribute("transform","rotate(0)");u.appendChild(o({x:H,y:0})).setAttribute("transform","rotate(90)");u.appendChild(o({x:0,y:H})).setAttribute("transform","rotate(180)");u.appendChild(o({x:-H,y:0})).setAttribute("transform","rotate(270)");u=u.appendChild(s.svg("circle"));u.setAttribute("fill","none");u.setAttribute("class",
"fore");u.setAttribute("r",v)}if(y!="none"){u=n.appendChild(s.svg("g"));u.setAttribute("class","zoom");z=-0.5;if(y=="big"){w={};var A=D.zoomRange()[0];for(z=0;A<=D.zoomRange()[1];A++,z++)(w[A]=u.appendChild(r(A))).setAttribute("transform","translate(0,"+-(z+0.75)*v*0.4+")")}A=x=="none"?0.4:2;u.setAttribute("transform","translate(0,"+v*(/^top-/.test(i)?A+(z+0.5)*0.4:-A)+")");u.appendChild(l(+1)).setAttribute("transform","translate(0,"+-(z+0.5)*v*0.4+")");u.appendChild(l(-1)).setAttribute("transform",
"scale(-1)")}f()}var q={},n=s.svg("g"),w={},v=30,H=16,L=0,C=250,E=50,i="top-left",y="small",x="small",F,I,D;n.setAttribute("class","compass");q.radius=function(u){if(!arguments.length)return v;v=u;D&&m();return q};q.speed=function(u){if(!arguments.length)return v;H=u;return q};q.position=function(u){if(!arguments.length)return i;i=u;D&&m();return q};q.pan=function(u){if(!arguments.length)return x;x=u;D&&m();return q};q.zoom=function(u){if(!arguments.length)return y;y=u;D&&m();return q};q.map=function(u){if(!arguments.length)return D;
if(D){n.parentNode.removeChild(n);D.off("move",f).off("resize",f);window.removeEventListener("mouseup",a,false)}if(D=u){window.addEventListener("mouseup",a,false);D.on("move",f).on("resize",f);D.container().appendChild(n);m()}return q};return q};s.grid=function(){function e(){var d=c.firstChild,h=a.size(),j=a.pointLocation(S);a.pointLocation(h);var k=Math.pow(2,4-Math.round(a.zoom()));j.lat=Math.floor(j.lat/k)*k;j.lon=Math.ceil(j.lon/k)*k;for(var t;(t=a.locationPoint(j).x)<=h.x;j.lon+=k){d||(d=c.appendChild(s.svg("line")));
d.setAttribute("x1",t);d.setAttribute("x2",t);d.setAttribute("y1",0);d.setAttribute("y2",h.y);d=d.nextSibling}for(;(t=a.locationPoint(j).y)<=h.y;j.lat-=k){d||(d=c.appendChild(s.svg("line")));d.setAttribute("y1",t);d.setAttribute("y2",t);d.setAttribute("x1",0);d.setAttribute("x2",h.x);d=d.nextSibling}for(;d;){h=d.nextSibling;c.removeChild(d);d=h}}var g={},a,c=s.svg("g");c.setAttribute("class","grid");g.map=function(d){if(!arguments.length)return a;if(a){c.parentNode.removeChild(c);a.off("move",e).off("resize",
e)}if(a=d){a.on("move",e).on("resize",e);a.container().appendChild(c);a.dispatch({type:"move"})}return g};return g}})(org.polymaps);
