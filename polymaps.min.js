if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(r){function fa(d){var h=d.indexOf(":");return h<0?d:{space:r.ns[d.substring(0,h)],local:d.substring(h+1)}}function S(){for(var d=0;d<S.maps.length;d++)S.maps[d].resize()}function V(d){return 360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}function W(d){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}function Z(d,h){if(d.row>h.row){var a=d;d=h;h=a}return{x0:d.column,y0:d.row,x1:h.column,y1:h.row,dx:h.column-d.column,dy:h.row-d.row}}function ca(d,h,a,m,f){a=Math.max(a,Math.floor(h.y0));
m=Math.min(m,Math.ceil(h.y1));if(d.x0==h.x0&&d.y0==h.y0?d.x0+h.dy/d.dy*d.dx<h.x1:d.x1-h.dy/d.dy*d.dx<h.x0){var c=d;d=h;h=c}c=d.dx/d.dy;var g=h.dx/h.dy,j=d.dx>0,n=h.dx<0;for(a=a;a<m;a++){var o=c*Math.max(0,Math.min(d.dy,a+j-d.y0))+d.x0;f(Math.floor(g*Math.max(0,Math.min(h.dy,a+n-h.y0))+h.x0),Math.ceil(o),a)}}function da(d,h,a,m,f,c){var g=Z(d,h);h=Z(h,a);d=Z(a,d);if(g.dy>h.dy){a=g;g=h;h=a}if(g.dy>d.dy){a=g;g=d;d=a}if(h.dy>d.dy){a=h;h=d;d=a}g.dy&&ca(d,g,m,f,c);h.dy&&ca(d,h,m,f,c)}r.version="2.4.0+1";
var Y={x:0,y:0};r.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};r.id=function(){var d=0;return function(){return++d}}();r.svg=function(d){return document.createElementNS(r.ns.svg,d)};r.transform=function(d,h,a,m,f,c){var g={},j,n,o;if(!arguments.length){d=1;h=f=a=0;m=1;c=0}g.zoomFraction=function(l){if(!arguments.length)return n;n=l;j=Math.floor(n+Math.log(Math.sqrt(d*d+h*h+a*a+m*m))/Math.log(2));o=Math.pow(2,-j);return g};g.apply=function(l){var i=Math.pow(2,-l.zoom),
u=Math.pow(2,l.zoom-j);return{column:(d*l.column*i+a*l.row*i+f)*u,row:(h*l.column*i+m*l.row*i+c)*u,zoom:l.zoom-j}};g.unapply=function(l){var i=Math.pow(2,-l.zoom),u=Math.pow(2,l.zoom+j);return{column:(l.column*i*m-l.row*i*a-f*m+c*a)/(d*m-h*a)*u,row:(l.column*i*h-l.row*i*d-f*h+c*d)/(a*h-m*d)*u,zoom:l.zoom+j}};g.toString=function(){return"matrix("+[d*o,h*o,a*o,m*o].join(" ")+" 0 0)"};return g.zoomFraction(0)};r.cache=function(d,h){function a(i){l--;h&&h(i);delete g[i.key];if(i.next)i.next.prev=i.prev;
else if(n=i.prev)n.next=null;if(i.prev)i.prev.next=i.next;else if(j=i.next)j.prev=null}function m(){for(var i=n;l>o;i=i.prev){if(!i)break;i.lock||a(i)}}var f={},c={},g={},j=null,n=null,o=64,l=0;f.peek=function(i){return g[[i.zoom,i.column,i.row].join("/")]};f.load=function(i,u){var w=[i.zoom,i.column,i.row].join("/"),A=g[w];if(A){if(A.prev){if(A.prev.next=A.next)A.next.prev=A.prev;else n=A.prev;A.prev=null;A.next=j;j=j.prev=A}A.lock=1;return c[w]=A}A={key:w,column:i.column,row:i.row,zoom:i.zoom,next:j,
prev:null,lock:1};d.call(null,A,u);c[w]=g[w]=A;if(j)j.prev=A;else n=A;j=A;l++;return A};f.unload=function(i){if(!(i in c))return false;var u=c[i];u.lock=0;delete c[i];u.request&&u.request.abort(false)&&a(u);return u};f.locks=function(){return c};f.size=function(i){if(!arguments.length)return o;o=i;m();return f};f.flush=function(){m();return f};f.clear=function(){for(var i in g){var u=g[i];u.request&&u.request.abort(false);h&&h(g[i]);if(u.lock){u.lock=0;u.element.parentNode.removeChild(u.element)}}c=
{};g={};j=n=null;l=0;return f};return f};r.url=function(d){function h(f){var c=f.zoom<0?1:1<<f.zoom,g=f.column;if(m){g=f.column%c;if(g<0)g+=c}else if(g<0||g>=c)return null;return d.replace(/{(.)}/g,function(j,n){switch(n){case "S":return a[(Math.abs(f.zoom)+f.row+g)%a.length];case "Z":return f.zoom;case "X":return g;case "Y":return f.row;case "B":var o=r.map.coordinateLocation({row:f.row,column:g,zoom:f.zoom}),l=r.map.coordinateLocation({row:f.row+1,column:g+1,zoom:f.zoom}),i=Math.ceil(Math.log(f.zoom)/
Math.LN2);return l.lat.toFixed(i)+","+o.lon.toFixed(i)+","+o.lat.toFixed(i)+","+l.lon.toFixed(i)}return n})}var a=[],m=true;h.template=function(f){if(!arguments.length)return d;d=f;return h};h.hosts=function(f){if(!arguments.length)return a;a=f;return h};h.repeat=function(f){if(!arguments.length)return m;m=f;return h};return h};r.dispatch=function(d){var h={};d.on=function(a,m){for(var f=h[a]||(h[a]=[]),c=0;c<f.length;c++)if(f[c].handler==m)return d;f.push({handler:m,on:true});return d};d.off=function(a,
m){var f=h[a];if(f)for(var c=0;c<f.length;c++){var g=f[c];if(g.handler==m){g.on=false;f.splice(c,1);break}}return d};return function(a){var m=h[a.type];if(m){m=m.slice();for(var f=0;f<m.length;f++){var c=m[f];c.on&&c.handler.call(d,a)}}}};r.queue=function(){function d(){if(!(f>=c||!m.length)){f++;m.pop()()}}function h(g){for(var j=0;j<m.length;j++)if(m[j]==g){m.splice(j,1);return true}return false}function a(g,j,n){function o(){l=new XMLHttpRequest;n&&l.overrideMimeType(n);l.open("GET",g,true);l.onreadystatechange=
function(){if(l.readyState==4){f--;l.status<300&&j(l);d()}};l.send(null)}var l;m.push(o);d();return{abort:function(i){if(h(o))return true;if(i&&l){l.abort();return true}return false}}}var m=[],f=0,c=6;return{text:function(g,j,n){return a(g,function(o){o.responseText&&j(o.responseText)},n)},xml:function(g,j){return a(g,function(n){n.responseXML&&j(n.responseXML)},"application/xml")},json:function(g,j){return a(g,function(n){n.responseText&&j(JSON.parse(n.responseText))},"application/json")},image:function(g,
j,n){function o(){l=document.createElement("img");l.onerror=function(){f--;d()};l.onload=function(){f--;n(l);d()};l.src=j;g.setAttributeNS(r.ns.xlink,"href",j)}var l;m.push(o);d();return{abort:function(i){if(h(o))return true;if(i&&l){l.src="about:";return true}return false}}}}}();r.map=function(){function d(){if(u)if(o<u[0])o=u[0];else if(o>u[1])o=u[1];l=o-(o=Math.round(o));i=Math.pow(2,l)}function h(){if(q){var e=45/Math.pow(2,o+l-3),t=Math.max(Math.abs(C*g.x+A*g.y),Math.abs(B*g.x+E*g.y)),s=V(K-
t*e/j.y);t=V(k+t*e/j.y);n.lat=Math.max(s,Math.min(t,n.lat));s=Math.max(Math.abs(C*g.y+A*g.x),Math.abs(B*g.y+E*g.x));n.lon=Math.max(q[0].lon-s*e/j.x,Math.min(q[1].lon+s*e/j.x,n.lon))}}var a={},m,f,c=Y,g=Y,j={x:256,y:256},n={lat:37.76487,lon:-122.41948},o=12,l=0,i=1,u=[1,18],w=0,A=1,C=0,E=1,B=0,K=-180,k=180,q=[{lat:V(K),lon:-Infinity},{lat:V(k),lon:Infinity}];a.locationCoordinate=function(e){e=r.map.locationCoordinate(e);var t=Math.pow(2,o);e.column*=t;e.row*=t;e.zoom+=o;return e};a.coordinateLocation=
r.map.coordinateLocation;a.coordinatePoint=function(e,t){var s=Math.pow(2,o-t.zoom),z=Math.pow(2,o-e.zoom),v=(t.column*s-e.column*z)*j.x*i;s=(t.row*s-e.row*z)*j.y*i;return{x:g.x+A*v-C*s,y:g.y+C*v+A*s}};a.pointCoordinate=function(e,t){var s=Math.pow(2,o-e.zoom),z=(t.x-g.x)/i,v=(t.y-g.y)/i;return{column:e.column*s+(E*z-B*v)/j.x,row:e.row*s+(B*z+E*v)/j.y,zoom:o}};a.locationPoint=function(e){var t=Math.pow(2,o+l-3)/45,s=(e.lon-n.lon)*t*j.x;e=(W(n.lat)-W(e.lat))*t*j.y;return{x:g.x+A*s-C*e,y:g.y+C*s+A*
e}};a.pointLocation=function(e){var t=45/Math.pow(2,o+l-3),s=(e.x-g.x)*t;e=(e.y-g.y)*t;return{lon:n.lon+(E*s-B*e)/j.x,lat:V(W(n.lat)-(B*s+E*e)/j.y)}};var x=r.svg("rect");x.setAttribute("visibility","hidden");x.setAttribute("pointer-events","all");a.container=function(e){if(!arguments.length)return m;m=e;m.setAttribute("class","map");m.appendChild(x);return a.resize()};a.focusableParent=function(){for(var e=m;e;e=e.parentNode)if(e.tabIndex>=0)return e;return window};a.mouse=function(e){var t=(m.ownerSVGElement||
m).createSVGPoint();if($<0&&(window.scrollX||window.scrollY)){var s=document.body.appendChild(r.svg("svg"));s.style.position="absolute";s.style.top=s.style.left="0px";var z=s.getScreenCTM();$=!(z.f||z.e);document.body.removeChild(s)}if($){t.x=e.pageX;t.y=e.pageY}else{t.x=e.clientX;t.y=e.clientY}return t.matrixTransform(m.getScreenCTM().inverse())};a.size=function(e){if(!arguments.length)return c;f=e;return a.resize()};a.resize=function(){if(f){c=f;S.remove(a)}else{x.setAttribute("width","100%");x.setAttribute("height",
"100%");b=x.getBBox();c={x:b.width,y:b.height};S.add(a)}x.setAttribute("width",c.x);x.setAttribute("height",c.y);g={x:c.x/2,y:c.y/2};h();a.dispatch({type:"resize"});return a};a.tileSize=function(e){if(!arguments.length)return j;j=e;a.dispatch({type:"move"});return a};a.center=function(e){if(!arguments.length)return n;n=e;h();a.dispatch({type:"move"});return a};a.panBy=function(e){var t=45/Math.pow(2,o+l-3),s=e.x*t;e=e.y*t;return a.center({lon:n.lon+(B*e-E*s)/j.x,lat:V(W(n.lat)+(B*s+E*e)/j.y)})};a.centerRange=
function(e){if(!arguments.length)return q;if(q=e){K=q[0].lat>-90?W(q[0].lat):-Infinity;k=q[0].lat<90?W(q[1].lat):Infinity}else{K=-Infinity;k=Infinity}h();a.dispatch({type:"move"});return a};a.zoom=function(e){if(!arguments.length)return o+l;o=e;d();return a.center(n)};a.zoomBy=function(e,t,s){if(arguments.length<2)return a.zoom(o+l+e);if(arguments.length<3)s=a.pointLocation(t);o=o+l+e;d();var z=a.locationPoint(s);return a.panBy({x:t.x-z.x,y:t.y-z.y})};a.zoomRange=function(e){if(!arguments.length)return u;
u=e;return a.zoom(o+l)};a.extent=function(e){if(!arguments.length)return[a.pointLocation({x:0,y:c.y}),a.pointLocation({x:c.x,y:0})];var t=a.locationPoint(e[0]),s=a.locationPoint(e[1]),z=Math.max((s.x-t.x)/c.x,(t.y-s.y)/c.y);t=a.pointLocation({x:(t.x+s.x)/2,y:(t.y+s.y)/2});o=o+l-Math.log(z)/Math.log(2);d();return a.center(t)};a.angle=function(e){if(!arguments.length)return w;w=e;A=Math.cos(w);C=Math.sin(w);E=Math.cos(-w);B=Math.sin(-w);h();a.dispatch({type:"move"});return a};a.add=function(e){e.map(a);
return a};a.remove=function(e){e.map(null);return a};a.dispatch=r.dispatch(a);return a};S.maps=[];S.add=function(d){for(var h=0;h<S.maps.length;h++)if(S.maps[h]==d)return;S.maps.push(d)};S.remove=function(d){for(var h=0;h<S.maps.length;h++)if(S.maps[h]==d){S.maps.splice(h,1);return}};window.addEventListener("resize",S,false);r.map.locationCoordinate=function(d){var h=1/360;return{column:(d.lon+180)*h,row:(180-W(d.lat))*h,zoom:0}};r.map.coordinateLocation=function(d){var h=45/Math.pow(2,d.zoom-3);
return{lon:h*d.column-180,lat:V(180-h*d.row)}};var $=/WebKit/.test(navigator.userAgent)?-1:0;r.layer=function(d,h){function a(B){for(var K=C[0].nextSibling;A<B;A++){u.insertBefore(C[-4],K);u.insertBefore(C[2],K);u.insertBefore(C[1],K);for(var k=C[-4],q=-4;q<2;)C[q]=C[++q];C[q]=k}}function m(B){for(var K=C[0].nextSibling;A>B;A--){u.insertBefore(C[-1],K);u.insertBefore(C[2],C[-4]);for(var k=C[2],q=2;q>-4;)C[q]=C[--q];C[q]=k}}function f(){function B(N){var H=N.zoom,T=H<0?1:1<<H,U=N.column%T,y=N.row;
if(U<0)U+=T;return{locationPoint:function(D){D=r.map.locationCoordinate(D);var G=Math.pow(2,H-D.zoom);return{x:s.x*(G*D.column-U),y:s.y*(G*D.row-y)}}}}function K(N,H,T){var U=I.zoom,y=2-R,D=4+R;for(N=N;N<H;N++){var G=g.load({column:N,row:T,zoom:U},B);if(!G.ready&&!(G.key in O)){G.proxyRefs={};for(var J,M,P,Q=1;Q<=y;Q++){M=true;for(var X=0,ea=1<<Q;X<=ea;X++)for(var aa=0;aa<=ea;aa++)if((P=g.peek(J={column:(N<<Q)+aa,row:(T<<Q)+X,zoom:U+Q}))&&P.ready){O[P.key]=g.load(J);P.proxyCount++;G.proxyRefs[P.key]=
P}else M=false;if(M)break}if(!M)for(Q=1;Q<=D;Q++)if((P=g.peek(J={column:N>>Q,row:T>>Q,zoom:U-Q}))&&P.ready){O[P.key]=g.load(J);P.proxyCount++;G.proxyRefs[P.key]=P;break}}O[G.key]=G}}var k=c.map(),q=k.zoom(),x=q-(q=Math.round(q)),e=k.size(),t=k.angle(),s=k.tileSize(),z=k.locationCoordinate(k.center());if(A!=q){if(A<q)a(q);else if(A>q)m(q);else A=q;for(var v=-4;v<=2;v++){var L=C[v];L.setAttribute("class","zoom"+(v<0?"":"+")+v+" zoom"+(q+v));L.setAttribute("transform","scale("+Math.pow(2,-v)+")")}}u.setAttribute("transform",
"translate("+e.x/2+","+e.y/2+")"+(t?"rotate("+t/Math.PI*180+")":"")+(x?"scale("+Math.pow(2,x)+")":"")+(w?w.zoomFraction(x):""));var I=k.pointCoordinate(z,Y);v=k.pointCoordinate(z,{x:e.x,y:0});q=k.pointCoordinate(z,e);k=k.pointCoordinate(z,{x:0,y:e.y});if(!x&&!t&&!w){z.column=(Math.round(s.x*z.column)+(e.x&1)/2)/s.x;z.row=(Math.round(s.y*z.row)+(e.y&1)/2)/s.y}if(w){I=w.unapply(I);v=w.unapply(v);q=w.unapply(q);k=w.unapply(k);z=w.unapply(z)}var R=o?o(I.zoom)-I.zoom:0;if(R){e=Math.pow(2,R);I.column*=
e;I.row*=e;v.column*=e;v.row*=e;q.column*=e;q.row*=e;k.column*=e;k.row*=e;I.zoom=v.zoom=q.zoom=k.zoom+=R}x=g.locks();var O={};for(var F in x)x[F].proxyCount=0;if(n&&R>-5&&R<3){t=I.zoom<0?1:1<<I.zoom;if(j){da(I,v,q,0,t,K);da(q,k,I,0,t,K)}else{e=Math.floor((I.column+q.column)/2);t=Math.max(0,Math.min(t-1,Math.floor((v.row+k.row)/2)));v=Math.min(4,I.zoom);e=e>>v<<v;t=t>>v<<v;K(e,e+1,t)}}for(F in O){v=O[F];e=Math.pow(2,v.level=v.zoom-z.zoom);v.element.setAttribute("transform","translate("+(v.x=s.x*(v.column-
z.column*e))+","+(v.y=s.y*(v.row-z.row*e))+")")}for(F in x)if(!(F in O)){v=g.unload(F);v.element.parentNode.removeChild(v.element);delete v.proxyRefs}for(F in O){v=O[F];if(v.element.parentNode!=C[v.level]){C[v.level].appendChild(v.element);c.show&&c.show(v)}}g.flush();c.dispatch({type:"move"})}var c={},g=c.cache=r.cache(d,h).size(512),j=true,n=true,o,l,i,u=r.svg("g"),w,A,C={};u.setAttribute("class","layer");for(var E=-4;E<=-1;E++)C[E]=u.appendChild(r.svg("g"));for(E=2;E>=1;E--)C[E]=u.appendChild(r.svg("g"));
C[0]=u.appendChild(r.svg("g"));c.map=function(B){if(!arguments.length)return i;if(i){if(i==B){u.parentNode.appendChild(u);return c}i.off("move",f).off("resize",f);u.parentNode.removeChild(u)}if(i=B){i.container().appendChild(u);c.init&&c.init(u);i.on("move",f).on("resize",f);f()}return c};c.container=function(){return u};c.levels=function(){return C};c.id=function(B){if(!arguments.length)return l;l=B;u.setAttribute("id",B);return c};c.visible=function(B){if(!arguments.length)return n;(n=B)?u.removeAttribute("visibility"):
u.setAttribute("visibility","hidden");i&&f();return c};c.transform=function(B){if(!arguments.length)return w;w=B;i&&f();return c};c.zoom=function(B){if(!arguments.length)return o;o=typeof B=="function"||B==null?B:function(){return B};i&&f();return c};c.tile=function(B){if(!arguments.length)return j;j=B;i&&f();return c};c.reload=function(){g.clear();i&&f();return c};c.dispatch=r.dispatch(c);c.on("load",function(B){if(B.tile.proxyRefs){for(var K in B.tile.proxyRefs){var k=B.tile.proxyRefs[K];--k.proxyCount<=
0&&g.unload(K)&&k.element.parentNode.removeChild(k.element)}delete B.tile.proxyRefs}});return c};r.image=function(){var d=r.layer(function(a){var m=a.element=r.svg("image"),f=d.map().tileSize();m.setAttribute("preserveAspectRatio","none");m.setAttribute("width",f.x);m.setAttribute("height",f.y);if(typeof h=="function"){m.setAttribute("opacity",0);f=h(a);if(f!=null)a.request=r.queue.image(m,f,function(c){delete a.request;a.ready=true;a.img=c;m.removeAttribute("opacity");d.dispatch({type:"load",tile:a})});
else{a.ready=true;d.dispatch({type:"load",tile:a})}}else{a.ready=true;h!=null&&m.setAttributeNS(r.ns.xlink,"href",h);d.dispatch({type:"load",tile:a})}},function(a){a.request&&a.request.abort(true)}),h;d.url=function(a){if(!arguments.length)return h;h=typeof a=="string"&&/{.}/.test(a)?r.url(a):a;return d.reload()};return d};r.geoJson=function(d){function h(k){var q={lat:0,lon:0};return function(x){q.lat=x[1];q.lon=x[0];var e=k(q);x.x=e.x;x.y=e.y;return e}}function a(k,q){return k&&k.type in C&&C[k.type](k,
q)}function m(k,q,x){return k.type in E&&E[k.type](k,q,x)}function f(){var k=c.map().zoom(),q=c.cache.locks(),x,e,t,s,z,v,L;if(w=="fixed")for(x in q){if((e=q[x]).scale!=k){L="scale("+Math.pow(2,e.zoom-k)+")";s=-1;for(z=(t=e.features).length;++s<z;)m((v=t[s]).data.geometry,v.element,L);e.scale=k}}else for(x in q){s=-1;for(z=(t=(e=q[x]).features).length;++s<z;)m((v=t[s]).data.geometry,v.element,"");delete e.scale}}var c=r.layer(function(k,q){function x(t){var s=[];if(t.next)k.request=d(t.next.href,
x);switch(t.type){case "FeatureCollection":for(var z=0;z<t.features.length;z++){var v=t.features[z],L=a(v.geometry,q);L&&s.push({element:e.appendChild(L),data:v})}break;case "Feature":(L=a(t.geometry,q))&&s.push({element:e.appendChild(L),data:t});break;default:(L=a(t,q))&&s.push({element:e.appendChild(L),data:{type:"Feature",geometry:t}});break}k.ready=true;s.push.apply(k.features,s);c.dispatch({type:"load",tile:k,features:s})}var e=k.element=r.svg("g");k.features=[];q=h(q(k).locationPoint);if(j!=
null)k.request=d(typeof j=="function"?j(k):j,x);else x({type:"FeatureCollection",features:A||[]})},function(k){k.request&&k.request.abort(true)}),g=c.container(),j,n=true,o="org.polymaps."+r.id(),l="url(#"+o+")",i=g.insertBefore(r.svg("clipPath"),g.firstChild),u=i.appendChild(r.svg("rect")),w="auto",A;g.setAttribute("fill-rule","evenodd");i.setAttribute("id",o);if(!arguments.length)d=r.queue.json;var C={Point:function(k,q){var x=q(k.coordinates),e=r.svg("circle");e.setAttribute("r",4.5);e.setAttribute("transform",
"translate("+x.x+","+x.y+")");return e},MultiPoint:function(k,q){for(var x=r.svg("g"),e=k.coordinates,t,s,z=-1,v=e.length;++z<v;){s=x.appendChild(r.svg("circle"));s.setAttribute("r",4.5);s.setAttribute("transform","translate("+(t=q(e[z])).x+","+t.y+")")}return x},LineString:function(k,q){for(var x=r.svg("path"),e=["M"],t=k.coordinates,s,z=-1,v=t.length;++z<v;)e.push((s=q(t[z])).x,",",s.y,"L");e.pop();if(e.length){x.setAttribute("d",e.join(""));return x}},MultiLineString:function(k,q){for(var x=r.svg("path"),
e=[],t=k.coordinates,s,z=-1,v,L=t.length,I;++z<L;){s=t[z];v=-1;I=s.length;for(e.push("M");++v<I;)e.push((p=q(s[v])).x,",",p.y,"L");e.pop()}if(e.length){x.setAttribute("d",e.join(""));return x}},Polygon:function(k,q){for(var x=r.svg("path"),e=[],t=k.coordinates,s,z=-1,v,L=t.length,I;++z<L;){s=t[z];v=-1;I=s.length-1;for(e.push("M");++v<I;)e.push((p=q(s[v])).x,",",p.y,"L");e[e.length-1]="Z"}if(e.length){x.setAttribute("d",e.join(""));return x}},MultiPolygon:function(k,q){for(var x=r.svg("path"),e=[],
t=k.coordinates,s,z,v=-1,L,I,R=t.length,O,F;++v<R;){s=t[v];L=-1;for(O=s.length;++L<O;){z=s[L];I=-1;F=z.length-1;for(e.push("M");++I<F;)e.push((p=q(z[I])).x,",",p.y,"L");e[e.length-1]="Z"}}if(e.length){x.setAttribute("d",e.join(""));return x}},GeometryCollection:function(k,q){for(var x=r.svg("g"),e=-1,t=k.geometries,s=t.length,z;++e<s;)(z=a(t[e],q))&&x.appendChild(z);return x}},E={Point:function(k,q,x){k=k.coordinates;q.setAttribute("transform","translate("+k.x+","+k.y+")"+x)},MultiPoint:function(k,
q,x){k=k.coordinates;var e=-1,t=s.length;q=q.firstChild;for(var s;++e<t;){s=k[e];q.setAttribute("transform","translate("+s.x+","+s.y+")"+x);q=q.nextSibling}}};c.url=function(k){if(!arguments.length)return j;j=typeof k=="string"&&/{.}/.test(k)?r.url(k):k;if(j!=null)A=null;typeof j=="string"&&c.tile(false);return c.reload()};c.features=function(k){if(!arguments.length)return A;if(A=k){j=null;c.tile(false)}return c.reload()};c.clip=function(k){if(!arguments.length)return n;n&&g.removeChild(i);if(n=k)g.insertBefore(i,
g.firstChild);var q=c.cache.locks();for(var x in q)n?q[x].element.setAttribute("clip-path",l):q[x].element.removeAttribute("clip-path");return c};var B=c.tile;c.tile=function(k){arguments.length&&!k&&c.clip(k);return B.apply(c,arguments)};var K=c.map;c.map=function(k){if(k&&u){var q=k.tileSize();u.setAttribute("width",q.x);u.setAttribute("height",q.y)}return K.apply(c,arguments)};c.scale=function(k){if(!arguments.length)return w;(w=k)?c.on("move",f):c.off("move",f);c.map()&&f();return c};c.show=function(k){n?
k.element.setAttribute("clip-path",l):k.element.removeAttribute("clip-path");c.dispatch({type:"show",tile:k,features:k.features});return c};c.reshow=function(){var k=c.cache.locks();for(var q in k)c.show(k[q]);return c};return c};r.dblclick=function(){function d(c){var g=m.zoom();g=c.shiftKey?Math.ceil(g)-g-1:1-g+Math.floor(g);a==="mouse"?m.zoomBy(g,m.mouse(c)):m.zoomBy(g)}var h={},a="mouse",m,f;h.zoom=function(c){if(!arguments.length)return a;a=c;return h};h.map=function(c){if(!arguments.length)return m;
if(m){f.removeEventListener("dblclick",d,false);f=null}if(m=c){f=m.container();f.addEventListener("dblclick",d,false)}return h};return h};r.drag=function(){function d(g){if(!g.shiftKey){c={x:g.clientX,y:g.clientY};m.focusableParent().focus();g.preventDefault();document.body.style.setProperty("cursor","move",null)}}function h(g){if(c){m.panBy({x:g.clientX-c.x,y:g.clientY-c.y});c.x=g.clientX;c.y=g.clientY}}var a={},m,f,c;a.map=function(g){if(!arguments.length)return m;if(m){f.removeEventListener("mousedown",
d,false);f=null}if(m=g){f=m.container();f.addEventListener("mousedown",d,false)}return a};window.addEventListener("mousemove",h,false);window.addEventListener("mouseup",function(g){if(c){h(g);c=null;document.body.style.removeProperty("cursor")}},false);return a};r.wheel=function(){function d(){j=null}function h(l){var i=(l.wheelDelta/120||-l.detail)*0.1,u;if(ba<0){u=Date.now();var w=u-f;if(w>9&&Math.abs(l.wheelDelta)/w>=50)ba=1;f=u}if(ba==1)i*=0.03;if(!c&&i){u=Date.now();if(u-m>200){i=i>0?+1:-1;m=
u}else i=0}if(i)switch(g){case "mouse":u=n.mouse(l);j||(j=n.pointLocation(u));n.off("move",d).zoomBy(i,u,j).on("move",d);break;case "location":n.zoomBy(i,n.locationPoint(j),j);break;default:n.zoomBy(i);break}l.preventDefault();return false}var a={},m=0,f=0,c=true,g="mouse",j,n,o;a.smooth=function(l){if(!arguments.length)return c;c=l;return a};a.zoom=function(l,i){if(!arguments.length)return g;g=l;j=i;if(n)g=="mouse"?n.on("move",d):n.off("move",d);return a};a.map=function(l){if(!arguments.length)return n;
if(n){o.removeEventListener("mousemove",d,false);o.removeEventListener("mousewheel",h,false);o.removeEventListener("DOMMouseScroll",h,false);o=null;n.off("move",d)}if(n=l){g=="mouse"&&n.on("move",d);o=n.container();o.addEventListener("mousemove",d,false);o.addEventListener("mousewheel",h,false);o.addEventListener("DOMMouseScroll",h,false)}return a};return a};var ba=/WebKit\/533/.test(navigator.userAgent)?-1:0;r.arrow=function(){function d(w){if(!(w.ctrlKey||w.altKey||w.metaKey)){var A=Date.now(),
C=0,E=0;switch(w.keyCode){case 37:if(!c.left){g=A;c.left=1;c.right||(C=l)}break;case 39:if(!c.right){g=A;c.right=1;c.left||(C=-l)}break;case 38:if(!c.up){g=A;c.up=1;c.down||(E=l)}break;case 40:if(!c.down){g=A;c.down=1;c.up||(E=-l)}break;default:return}if(C||E)i.panBy({x:C,y:E});if(!j&&c.left|c.right|c.up|c.down)j=setInterval(m,o);w.preventDefault()}}function h(w){g=Date.now();switch(w.keyCode){case 37:c.left=0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;default:return}if(j&&
!(c.left|c.right|c.up|c.down))j=clearInterval(j);w.preventDefault()}function a(w){switch(w.charCode){case 45:case 95:i.zoom(Math.ceil(i.zoom())-1);break;case 43:case 61:i.zoom(Math.floor(i.zoom())+1);break;default:return}w.preventDefault()}function m(){if(i)if(!(Date.now()<g+n)){var w=(c.left-c.right)*l,A=(c.up-c.down)*l;if(w||A)i.panBy({x:w,y:A})}}var f={},c={left:0,right:0,up:0,down:0},g=0,j,n=250,o=50,l=16,i,u;f.map=function(w){if(!arguments.length)return i;if(i){u.removeEventListener("keypress",
a,false);u.removeEventListener("keydown",d,false);u.removeEventListener("keyup",h,false);u=null}if(i=w){u=i.focusableParent();u.addEventListener("keypress",a,false);u.addEventListener("keydown",d,false);u.addEventListener("keyup",h,false)}return f};f.speed=function(w){if(!arguments.length)return l;l=w;return f};return f};r.hash=function(){function d(){var j=g(f);if(m!==j)location.replace(m=j)}function h(){if(location.hash!==m)if(c(f,(m=location.hash).substring(1)))d()}var a={},m,f,c=function(j,n){var o=
n.split("/").map(Number);if(o.length<3||o.some(isNaN))return true;else{var l=j.size();j.zoomBy(o[0]-j.zoom(),{x:l.x/2,y:l.y/2},{lat:Math.min(89.99999999,Math.max(-89.99999999,o[1])),lon:o[2]})}},g=function(j){var n=j.center();j=j.zoom();var o=Math.max(0,Math.ceil(Math.log(j)/Math.LN2));return"#"+j.toFixed(2)+"/"+n.lat.toFixed(o)+"/"+n.lon.toFixed(o)};a.map=function(j){if(!arguments.length)return f;if(f){f.off("move",d);window.removeEventListener("hashchange",h,false)}if(f=j){f.on("move",d);window.addEventListener("hashchange",
h,false);location.hash?h():d()}return a};a.parser=function(j){if(!arguments.length)return c;c=j;return a};a.formatter=function(j){if(!arguments.length)return g;g=j;return a};return a};r.touch=function(){function d(j){var n=-1,o=j.touches.length,l=Date.now();if(o==1&&l-c<300){var i=a.zoom();a.zoomBy(1-i+Math.floor(i),a.mouse(j.touches[0]));j.preventDefault()}for(c=l;++n<o;){l=j.touches[n];g[l.identifier]=a.pointLocation(a.mouse(l))}}var h={},a,m,f=false,c=0,g={};window.addEventListener("touchmove",
function(j){switch(j.touches.length){case 1:var n=j.touches[0];a.zoomBy(0,a.mouse(n),g[n.identifier]);j.preventDefault();break;case 2:n=j.touches[0];var o=j.touches[1],l=a.mouse(n),i=a.mouse(o),u={x:(l.x+i.x)/2,y:(l.y+i.y)/2};n=r.map.locationCoordinate(g[n.identifier]);var w=r.map.locationCoordinate(g[o.identifier]);o=r.map.coordinateLocation({row:(n.row+w.row)/2,column:(n.column+w.column)/2,zoom:0});var A=l.x-i.x;l=l.y-i.y;i=n.column-w.column;n=n.row-w.row;a.zoomBy(Math.log(Math.sqrt(A*A+l*l)/256/
Math.sqrt(i*i+n*n))/Math.log(2)-a.zoom(),u,o);f&&a.angle(Math.atan2(i,n)-Math.atan2(A,l));j.preventDefault();break}},false);h.rotate=function(j){if(!arguments.length)return f;f=j;return h};h.map=function(j){if(!arguments.length)return a;if(a){m.removeEventListener("touchstart",d,false);m=null}if(a=j){m=a.container();m.addEventListener("touchstart",d,false)}return h};return h};r.interact=function(){var d={},h=r.drag(),a=r.wheel(),m=r.dblclick(),f=r.touch(),c=r.arrow();d.map=function(g){h.map(g);a.map(g);
m.map(g);f.map(g);c.map(g);return d};return d};r.compass=function(){function d(y){B.setAttribute("class","compass active");I||(I=setInterval(h,t));R&&H.panBy(R);x=Date.now();return l(y)}function h(){R&&Date.now()>x+e&&H.panBy(R)}function a(y){if(y.shiftKey){F={x0:H.mouse(y)};H.focusableParent().focus();return l(y)}}function m(y){if(F){F.x1=H.mouse(y);N.setAttribute("x",Math.min(F.x0.x,F.x1.x));N.setAttribute("y",Math.min(F.x0.y,F.x1.y));N.setAttribute("width",Math.abs(F.x0.x-F.x1.x));N.setAttribute("height",
Math.abs(F.x0.y-F.x1.y));N.removeAttribute("display")}}function f(){B.setAttribute("class","compass");if(F){if(F.x1){H.extent([H.pointLocation({x:Math.min(F.x0.x,F.x1.x),y:Math.max(F.x0.y,F.x1.y)}),H.pointLocation({x:Math.max(F.x0.x,F.x1.x),y:Math.min(F.x0.y,F.x1.y)})]);N.setAttribute("display","none")}F=null}if(I){clearInterval(I);I=0}}function c(y){return function(){y?this.setAttribute("class","active"):this.removeAttribute("class");R=y}}function g(y){return function(D){B.setAttribute("class","compass active");
var G=H.zoom();H.zoom(y<0?Math.ceil(G)-1:Math.floor(G)+1);return l(D)}}function j(y){return function(D){H.zoom(y);return l(D)}}function n(){this.setAttribute("class","active")}function o(){this.removeAttribute("class")}function l(y){y.stopPropagation();y.preventDefault();return false}function i(y){var D=Math.SQRT1_2*k,G=k*0.7,J=k*0.2,M=r.svg("g"),P=M.appendChild(r.svg("path")),Q=M.appendChild(r.svg("path"));P.setAttribute("class","direction");P.setAttribute("pointer-events","all");P.setAttribute("d",
"M0,0L"+D+","+D+"A"+k+","+k+" 0 0,1 "+-D+","+D+"Z");Q.setAttribute("class","chevron");Q.setAttribute("d","M"+J+","+(G-J)+"L0,"+G+" "+-J+","+(G-J));Q.setAttribute("pointer-events","none");M.addEventListener("mousedown",d,false);M.addEventListener("mouseover",c(y),false);M.addEventListener("mouseout",c(null),false);M.addEventListener("dblclick",l,false);return M}function u(y){var D=k*0.4,G=D/2,J=r.svg("g"),M=J.appendChild(r.svg("path")),P=J.appendChild(r.svg("path")),Q=J.appendChild(r.svg("path")),
X=J.appendChild(r.svg("path"));M.setAttribute("class","back");M.setAttribute("d","M"+-D+",0V"+-D+"A"+D+","+D+" 0 1,1 "+D+","+-D+"V0Z");P.setAttribute("class","direction");P.setAttribute("d",M.getAttribute("d"));Q.setAttribute("class","chevron");Q.setAttribute("d","M"+-G+","+-D+"H"+G+(y>0?"M0,"+(-D-G)+"V"+-G:""));X.setAttribute("class","fore");X.setAttribute("fill","none");X.setAttribute("d",M.getAttribute("d"));J.addEventListener("mousedown",g(y),false);J.addEventListener("mouseover",n,false);J.addEventListener("mouseout",
o,false);J.addEventListener("dblclick",l,false);return J}function w(y){var D=k*0.2,G=k*0.4,J=r.svg("g"),M=J.appendChild(r.svg("rect")),P=J.appendChild(r.svg("path"));M.setAttribute("pointer-events","all");M.setAttribute("fill","none");M.setAttribute("x",-G);M.setAttribute("y",-0.75*G);M.setAttribute("width",2*G);M.setAttribute("height",1.5*G);P.setAttribute("class","chevron");P.setAttribute("d","M"+-D+",0H"+D);J.addEventListener("mousedown",j(y),false);J.addEventListener("dblclick",l,false);return J}
function A(){var y=k+6,D=y,G=H.size();switch(s){case "top-left":break;case "top-right":y=G.x-y;break;case "bottom-left":D=G.y-D;break;case "bottom-right":y=G.x-y;D=G.y-D;break}B.setAttribute("transform","translate("+y+","+D+")");N.setAttribute("transform","translate("+-y+","+-D+")");for(var J in K)J==H.zoom()?K[J].setAttribute("class","active"):K[J].removeAttribute("class")}function C(){for(;B.lastChild;)B.removeChild(B.lastChild);B.appendChild(N);if(L!="none"){O=B.appendChild(r.svg("g"));O.setAttribute("class",
"pan");var y=O.appendChild(r.svg("circle"));y.setAttribute("class","back");y.setAttribute("r",k);O.appendChild(i({x:0,y:-q})).setAttribute("transform","rotate(0)");O.appendChild(i({x:q,y:0})).setAttribute("transform","rotate(90)");O.appendChild(i({x:0,y:q})).setAttribute("transform","rotate(180)");O.appendChild(i({x:-q,y:0})).setAttribute("transform","rotate(270)");y=O.appendChild(r.svg("circle"));y.setAttribute("fill","none");y.setAttribute("class","fore");y.setAttribute("r",k)}else O=null;if(z!=
"none"){v=B.appendChild(r.svg("g"));v.setAttribute("class","zoom");y=-0.5;if(z=="big"){K={};var D=H.zoomRange()[0];for(y=0;D<=H.zoomRange()[1];D++,y++)(K[D]=v.appendChild(w(D))).setAttribute("transform","translate(0,"+-(y+0.75)*k*0.4+")")}D=L=="none"?0.4:2;v.setAttribute("transform","translate(0,"+k*(/^top-/.test(s)?D+(y+0.5)*0.4:-D)+")");v.appendChild(u(+1)).setAttribute("transform","translate(0,"+-(y+0.5)*k*0.4+")");v.appendChild(u(-1)).setAttribute("transform","scale(-1)")}else v=null;A()}var E=
{},B=r.svg("g"),K={},k=30,q=16,x=0,e=250,t=50,s="top-left",z="small",v,L="small",I,R,O,F,N=r.svg("rect"),H,T,U;B.setAttribute("class","compass");N.setAttribute("class","back fore");N.setAttribute("pointer-events","none");N.setAttribute("display","none");E.radius=function(y){if(!arguments.length)return k;k=y;H&&C();return E};E.speed=function(y){if(!arguments.length)return k;q=y;return E};E.position=function(y){if(!arguments.length)return s;s=y;H&&C();return E};E.pan=function(y){if(!arguments.length)return L;
L=y;H&&C();return E};E.zoom=function(y){if(!arguments.length)return z;z=y;H&&C();return E};E.map=function(y){if(!arguments.length)return H;if(H){T.removeEventListener("mousedown",a,false);T.removeChild(B);T=null;U.removeEventListener("mousemove",m,false);U.removeEventListener("mouseup",f,false);U=null;H.off("move",A).off("resize",A)}if(H=y){T=H.container();T.appendChild(B);T.addEventListener("mousedown",a,false);U=T.ownerDocument.defaultView;U.addEventListener("mousemove",m,false);U.addEventListener("mouseup",
f,false);H.on("move",A).on("resize",A);C()}return E};return E};r.grid=function(){function d(){var f=m.firstChild,c=a.size(),g=a.pointLocation(Y);a.pointLocation(c);var j=Math.pow(2,4-Math.round(a.zoom()));g.lat=Math.floor(g.lat/j)*j;g.lon=Math.ceil(g.lon/j)*j;for(var n;(n=a.locationPoint(g).x)<=c.x;g.lon+=j){f||(f=m.appendChild(r.svg("line")));f.setAttribute("x1",n);f.setAttribute("x2",n);f.setAttribute("y1",0);f.setAttribute("y2",c.y);f=f.nextSibling}for(;(n=a.locationPoint(g).y)<=c.y;g.lat-=j){f||
(f=m.appendChild(r.svg("line")));f.setAttribute("y1",n);f.setAttribute("y2",n);f.setAttribute("x1",0);f.setAttribute("x2",c.x);f=f.nextSibling}for(;f;){c=f.nextSibling;m.removeChild(f);f=c}}var h={},a,m=r.svg("g");m.setAttribute("class","grid");h.map=function(f){if(!arguments.length)return a;if(a){m.parentNode.removeChild(m);a.off("move",d).off("resize",d)}if(a=f){a.on("move",d).on("resize",d);a.container().appendChild(m);a.dispatch({type:"move"})}return h};return h};r.stylist=function(){function d(f){var c=
f.features.length,g=h.length,j=a.length,n,o,l,i,u,w;for(u=0;u<c;++u)if(o=(n=f.features[u]).element){n=n.data;for(w=0;w<g;++w){i=(l=h[w]).value;if(typeof i==="function")i=i.call(null,n);i==null?l.name.local?o.removeAttributeNS(l.name.space,l.name.local):o.removeAttribute(l.name):l.name.local?o.setAttributeNS(l.name.space,l.name.local,i):o.setAttribute(l.name,i)}for(w=0;w<j;++w){i=(l=a[w]).value;if(typeof i==="function")i=i.call(null,n);i==null?o.style.removeProperty(l.name):o.style.setProperty(l.name,
i,l.priority)}if(i=m){if(typeof i==="function")i=i.call(null,n);for(;o.lastChild;)o.removeChild(o.lastChild);i!=null&&o.appendChild(r.svg("title")).appendChild(document.createTextNode(i))}}}var h=[],a=[],m;d.attr=function(f,c){h.push({name:fa(f),value:c});return d};d.style=function(f,c,g){a.push({name:f,value:c,priority:arguments.length<3?null:g});return d};d.title=function(f){m=f;return d};return d}})(org.polymaps);
