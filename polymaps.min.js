if(!window.org)window.org={};if(!org.polymaps)org.polymaps={};
(function(t){function ea(f){var i=f.indexOf(":");return i<0?f:{space:t.ns[f.substring(0,i)],local:f.substring(i+1)}}function R(){for(var f=0;f<R.maps.length;f++)R.maps[f].resize()}function X(f){return 360/Math.PI*Math.atan(Math.exp(f*Math.PI/180))-90}function Y(f){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360))}function $(f,i){if(f.row>i.row){var c=f;f=i;i=c}return{x0:f.column,y0:f.row,x1:i.column,y1:i.row,dx:i.column-f.column,dy:i.row-f.row}}function ba(f,i,c,m,g){c=Math.max(c,Math.floor(i.y0));
m=Math.min(m,Math.ceil(i.y1));if(f.x0==i.x0&&f.y0==i.y0?f.x0+i.dy/f.dy*f.dx<i.x1:f.x1-i.dy/f.dy*f.dx<i.x0){var a=f;f=i;i=a}a=f.dx/f.dy;var d=i.dx/i.dy,j=f.dx>0,u=i.dx<0;for(c=c;c<m;c++){var n=a*Math.max(0,Math.min(f.dy,c+j-f.y0))+f.x0;g(Math.floor(d*Math.max(0,Math.min(i.dy,c+u-i.y0))+i.x0),Math.ceil(n),c)}}function ca(f,i,c,m,g,a){var d=$(f,i);i=$(i,c);f=$(c,f);if(d.dy>i.dy){c=d;d=i;i=c}if(d.dy>f.dy){c=d;d=f;f=c}if(i.dy>f.dy){c=i;i=f;f=c}d.dy&&ba(f,d,m,g,a);i.dy&&ba(f,i,m,g,a)}t.version="2.5.1";
var Z={x:0,y:0};t.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};t.id=function(){var f=0;return function(){return++f}}();t.svg=function(f){return document.createElementNS(t.ns.svg,f)};t.transform=function(f,i,c,m,g,a){var d={},j,u,n;if(!arguments.length){f=1;i=g=c=0;m=1;a=0}d.zoomFraction=function(l){if(!arguments.length)return u;u=l;j=Math.floor(u+Math.log(Math.sqrt(f*f+i*i+c*c+m*m))/Math.LN2);n=Math.pow(2,-j);return d};d.apply=function(l){var k=Math.pow(2,-l.zoom),y=
Math.pow(2,l.zoom-j);return{column:(f*l.column*k+c*l.row*k+g)*y,row:(i*l.column*k+m*l.row*k+a)*y,zoom:l.zoom-j}};d.unapply=function(l){var k=Math.pow(2,-l.zoom),y=Math.pow(2,l.zoom+j);return{column:(l.column*k*m-l.row*k*c-g*m+a*c)/(f*m-i*c)*y,row:(l.column*k*i-l.row*k*f-g*i+a*f)/(c*i-m*f)*y,zoom:l.zoom+j}};d.toString=function(){return"matrix("+[f*n,i*n,c*n,m*n].join(" ")+" 0 0)"};return d.zoomFraction(0)};t.cache=function(f,i){function c(k){l--;i&&i(k);delete d[k.key];if(k.next)k.next.prev=k.prev;
else if(u=k.prev)u.next=null;if(k.prev)k.prev.next=k.next;else if(j=k.next)j.prev=null}function m(){for(var k=u;l>n;k=k.prev){if(!k)break;k.lock||c(k)}}var g={},a={},d={},j=null,u=null,n=64,l=0;g.peek=function(k){return d[[k.zoom,k.column,k.row].join("/")]};g.load=function(k,y){var r=[k.zoom,k.column,k.row].join("/"),o=d[r];if(o){if(o.prev){if(o.prev.next=o.next)o.next.prev=o.prev;else u=o.prev;o.prev=null;o.next=j;j=j.prev=o}o.lock=1;return a[r]=o}o={key:r,column:k.column,row:k.row,zoom:k.zoom,next:j,
prev:null,lock:1};f.call(null,o,y);a[r]=d[r]=o;if(j)j.prev=o;else u=o;j=o;l++;return o};g.unload=function(k){if(!(k in a))return false;var y=a[k];y.lock=0;delete a[k];y.request&&y.request.abort(false)&&c(y);return y};g.locks=function(){return a};g.size=function(k){if(!arguments.length)return n;n=k;m();return g};g.flush=function(){m();return g};g.clear=function(){for(var k in d){var y=d[k];y.request&&y.request.abort(false);i&&i(d[k]);if(y.lock){y.lock=0;y.element.parentNode.removeChild(y.element)}}a=
{};d={};j=u=null;l=0;return g};return g};t.url=function(f){function i(g){var a=g.zoom<0?1:1<<g.zoom,d=g.column;if(m){d=g.column%a;if(d<0)d+=a}else if(d<0||d>=a)return null;return f.replace(/{(.)}/g,function(j,u){switch(u){case "S":return c[(Math.abs(g.zoom)+g.row+d)%c.length];case "Z":return g.zoom;case "X":return d;case "Y":return g.row;case "B":var n=t.map.coordinateLocation({row:g.row,column:d,zoom:g.zoom}),l=t.map.coordinateLocation({row:g.row+1,column:d+1,zoom:g.zoom}),k=Math.ceil(Math.log(g.zoom)/
Math.LN2);return l.lat.toFixed(k)+","+n.lon.toFixed(k)+","+n.lat.toFixed(k)+","+l.lon.toFixed(k)}return u})}var c=[],m=true;i.template=function(g){if(!arguments.length)return f;f=g;return i};i.hosts=function(g){if(!arguments.length)return c;c=g;return i};i.repeat=function(g){if(!arguments.length)return m;m=g;return i};return i};t.dispatch=function(f){var i={};f.on=function(c,m){for(var g=i[c]||(i[c]=[]),a=0;a<g.length;a++)if(g[a].handler==m)return f;g.push({handler:m,on:true});return f};f.off=function(c,
m){var g=i[c];if(g)for(var a=0;a<g.length;a++){var d=g[a];if(d.handler==m){d.on=false;g.splice(a,1);break}}return f};return function(c){var m=i[c.type];if(m){m=m.slice();for(var g=0;g<m.length;g++){var a=m[g];a.on&&a.handler.call(f,c)}}}};t.queue=function(){function f(){if(!(g>=a||!m.length)){g++;m.pop()()}}function i(d){for(var j=0;j<m.length;j++)if(m[j]==d){m.splice(j,1);return true}return false}function c(d,j,u){function n(){l=new XMLHttpRequest;u&&l.overrideMimeType&&l.overrideMimeType(u);l.open("GET",
d,true);l.onreadystatechange=function(){if(l.readyState==4){g--;l.status<300&&j(l);f()}};l.send(null)}var l;m.push(n);f();return{abort:function(k){if(i(n))return true;if(k&&l){l.abort();return true}return false}}}var m=[],g=0,a=6;return{text:function(d,j,u){return c(d,function(n){n.responseText&&j(n.responseText)},u)},xml:function(d,j){return c(d,function(u){u.responseXML&&j(u.responseXML)},"application/xml")},json:function(d,j){return c(d,function(u){u.responseText&&j(JSON.parse(u.responseText))},
"application/json")},image:function(d,j,u){function n(){l=document.createElement("img");l.onerror=function(){g--;f()};l.onload=function(){g--;u(l);f()};l.src=j;d.setAttributeNS(t.ns.xlink,"href",j)}var l;m.push(n);f();return{abort:function(k){if(i(n))return true;if(k&&l){l.src="about:";return true}return false}}}}}();t.map=function(){function f(){if(y)if(n<y[0])n=y[0];else if(n>y[1])n=y[1];l=n-(n=Math.round(n));k=Math.pow(2,l)}function i(){if(s){var e=45/Math.pow(2,n+l-3),w=Math.max(Math.abs(A*d.x+
o*d.y),Math.abs(z*d.x+C*d.y)),q=X(I-w*e/j.y);w=X(h+w*e/j.y);u.lat=Math.max(q,Math.min(w,u.lat));q=Math.max(Math.abs(A*d.y+o*d.x),Math.abs(z*d.y+C*d.x));u.lon=Math.max(s[0].lon-q*e/j.x,Math.min(s[1].lon+q*e/j.x,u.lon))}}var c={},m,g,a=Z,d=Z,j={x:256,y:256},u={lat:37.76487,lon:-122.41948},n=12,l=0,k=1,y=[1,18],r=0,o=1,A=0,C=1,z=0,I=-180,h=180,s=[{lat:X(I),lon:-Infinity},{lat:X(h),lon:Infinity}];c.locationCoordinate=function(e){e=t.map.locationCoordinate(e);var w=Math.pow(2,n);e.column*=w;e.row*=w;e.zoom+=
n;return e};c.coordinateLocation=t.map.coordinateLocation;c.coordinatePoint=function(e,w){var q=Math.pow(2,n-w.zoom),x=Math.pow(2,n-e.zoom),E=(w.column*q-e.column*x)*j.x*k;q=(w.row*q-e.row*x)*j.y*k;return{x:d.x+o*E-A*q,y:d.y+A*E+o*q}};c.pointCoordinate=function(e,w){var q=Math.pow(2,n-e.zoom),x=(w.x-d.x)/k,E=(w.y-d.y)/k;return{column:e.column*q+(C*x-z*E)/j.x,row:e.row*q+(z*x+C*E)/j.y,zoom:n}};c.locationPoint=function(e){var w=Math.pow(2,n+l-3)/45,q=(e.lon-u.lon)*w*j.x;e=(Y(u.lat)-Y(e.lat))*w*j.y;
return{x:d.x+o*q-A*e,y:d.y+A*q+o*e}};c.pointLocation=function(e){var w=45/Math.pow(2,n+l-3),q=(e.x-d.x)*w;e=(e.y-d.y)*w;return{lon:u.lon+(C*q-z*e)/j.x,lat:X(Y(u.lat)-(z*q+C*e)/j.y)}};var v=t.svg("rect");v.setAttribute("visibility","hidden");v.setAttribute("pointer-events","all");c.container=function(e){if(!arguments.length)return m;m=e;m.setAttribute("class","map");m.appendChild(v);return c.resize()};c.focusableParent=function(){for(var e=m;e;e=e.parentNode)if(e.tabIndex>=0)return e;return window};
c.mouse=function(e){var w=(m.ownerSVGElement||m).createSVGPoint();if(aa<0&&(window.scrollX||window.scrollY)){var q=document.body.appendChild(t.svg("svg"));q.style.position="absolute";q.style.top=q.style.left="0px";var x=q.getScreenCTM();aa=!(x.f||x.e);document.body.removeChild(q)}if(aa){w.x=e.pageX;w.y=e.pageY}else{w.x=e.clientX;w.y=e.clientY}return w.matrixTransform(m.getScreenCTM().inverse())};c.size=function(e){if(!arguments.length)return a;g=e;return c.resize()};c.resize=function(){if(g){a=g;
R.remove(c)}else{v.setAttribute("width","100%");v.setAttribute("height","100%");b=v.getBBox();a={x:b.width,y:b.height};R.add(c)}v.setAttribute("width",a.x);v.setAttribute("height",a.y);d={x:a.x/2,y:a.y/2};i();c.dispatch({type:"resize"});return c};c.tileSize=function(e){if(!arguments.length)return j;j=e;c.dispatch({type:"move"});return c};c.center=function(e){if(!arguments.length)return u;u=e;i();c.dispatch({type:"move"});return c};c.panBy=function(e){var w=45/Math.pow(2,n+l-3),q=e.x*w;e=e.y*w;return c.center({lon:u.lon+
(z*e-C*q)/j.x,lat:X(Y(u.lat)+(z*q+C*e)/j.y)})};c.centerRange=function(e){if(!arguments.length)return s;if(s=e){I=s[0].lat>-90?Y(s[0].lat):-Infinity;h=s[0].lat<90?Y(s[1].lat):Infinity}else{I=-Infinity;h=Infinity}i();c.dispatch({type:"move"});return c};c.zoom=function(e){if(!arguments.length)return n+l;n=e;f();return c.center(u)};c.zoomBy=function(e,w,q){if(arguments.length<2)return c.zoom(n+l+e);if(arguments.length<3)q=c.pointLocation(w);n=n+l+e;f();var x=c.locationPoint(q);return c.panBy({x:w.x-x.x,
y:w.y-x.y})};c.zoomRange=function(e){if(!arguments.length)return y;y=e;return c.zoom(n+l)};c.extent=function(e){if(!arguments.length)return[c.pointLocation({x:0,y:a.y}),c.pointLocation({x:a.x,y:0})];var w=c.locationPoint(e[0]),q=c.locationPoint(e[1]),x=Math.max((q.x-w.x)/a.x,(w.y-q.y)/a.y);w=c.pointLocation({x:(w.x+q.x)/2,y:(w.y+q.y)/2});n=n+l-Math.log(x)/Math.LN2;f();return c.center(w)};c.angle=function(e){if(!arguments.length)return r;r=e;o=Math.cos(r);A=Math.sin(r);C=Math.cos(-r);z=Math.sin(-r);
i();c.dispatch({type:"move"});return c};c.add=function(e){e.map(c);return c};c.remove=function(e){e.map(null);return c};c.dispatch=t.dispatch(c);return c};R.maps=[];R.add=function(f){for(var i=0;i<R.maps.length;i++)if(R.maps[i]==f)return;R.maps.push(f)};R.remove=function(f){for(var i=0;i<R.maps.length;i++)if(R.maps[i]==f){R.maps.splice(i,1);return}};if(window.addEventListener){window.addEventListener("resize",R,false);window.addEventListener("load",R,false)}t.map.locationCoordinate=function(f){var i=
1/360;return{column:(f.lon+180)*i,row:(180-Y(f.lat))*i,zoom:0}};t.map.coordinateLocation=function(f){var i=45/Math.pow(2,f.zoom-3);return{lon:i*f.column-180,lat:X(180-i*f.row)}};var aa=/WebKit/.test(navigator.userAgent)?-1:0;t.layer=function(f,i){function c(h){for(var s=z[0].nextSibling;C<h;C++){o.insertBefore(z[-4],s);o.insertBefore(z[2],s);o.insertBefore(z[1],s);for(var v=z[-4],e=-4;e<2;)z[e]=z[++e];z[e]=v}}function m(h){for(var s=z[0].nextSibling;C>h;C--){o.insertBefore(z[-1],s);o.insertBefore(z[2],
z[-4]);for(var v=z[2],e=2;e>-4;)z[e]=z[--e];z[e]=v}}function g(h){var s=h.zoom,v=s<0?1:1<<s,e=h.column%v,w=h.row,q=r.tileSize();if(e<0)e+=v;return{locationPoint:function(x){x=t.map.locationCoordinate(x);var E=Math.pow(2,s-x.zoom);return{x:q.x*(E*x.column-e),y:q.y*(E*x.row-w)}}}}function a(){function h(Q){for(var V in Q){var W=Q[V],da=Math.pow(2,W.level=W.zoom-G.zoom);W.element.setAttribute("transform","translate("+(W.x=E.x*(W.column-G.column*da))+","+(W.y=E.y*(W.row-G.row*da))+")")}}function s(Q,
V,W){for(Q=Q;Q<V;Q++)U.push({column:Q,row:W,zoom:L})}var v=d.map(),e=v.zoom(),w=e-(e=Math.round(e)),q=v.size(),x=v.angle(),E=v.tileSize(),G=v.locationCoordinate(v.center());if(C!=e){if(C<e)c(e);else if(C>e)m(e);else C=e;for(var L=-4;L<=2;L++){var N=z[L];N.setAttribute("class","zoom"+(L<0?"":"+")+L+" zoom"+(e+L));N.setAttribute("transform","scale("+Math.pow(2,-L)+")")}}o.setAttribute("transform","translate("+q.x/2+","+q.y/2+")"+(x?"rotate("+x/Math.PI*180+")":"")+(w?"scale("+Math.pow(2,w)+")":"")+(A?
A.zoomFraction(w):""));var M=v.pointCoordinate(G,Z),H=v.pointCoordinate(G,{x:q.x,y:0});N=v.pointCoordinate(G,q);var P=v.pointCoordinate(G,{x:0,y:q.y});v=j.locks();e={};if(k)h(v);else{if(!w&&!x&&!A){G.column=(Math.round(E.x*G.column)+(q.x&1)/2)/E.x;G.row=(Math.round(E.y*G.row)+(q.y&1)/2)/E.y}if(A){M=A.unapply(M);H=A.unapply(H);N=A.unapply(N);P=A.unapply(P);G=A.unapply(G)}var D=l?l(M.zoom)-M.zoom:0;if(D){x=Math.pow(2,D);M.column*=x;M.row*=x;H.column*=x;H.row*=x;N.column*=x;N.row*=x;P.column*=x;P.row*=
x;M.zoom=H.zoom=N.zoom=P.zoom+=D}for(var S in v)v[S].proxyCount=0;var U=[];L=M.zoom;w=2-D;q=4+D;if(n&&D>-5&&D<3){x=M.zoom<0?1:1<<M.zoom;if(u){ca(M,H,N,0,x,s);ca(N,P,M,0,x,s)}else{N=Math.floor((M.column+N.column)/2);H=Math.max(0,Math.min(x-1,Math.floor((H.row+P.row)/2)));L=Math.min(4,M.zoom);N=N>>L<<L;H=H>>L<<L;s(N,N+1,H)}}U.sort(function(Q,V){return Math.abs(Q.row-G.row)+Math.abs(Q.column-G.column)-(Math.abs(V.row-G.row)+Math.abs(V.column-G.column))});M=0;for(P=U.length;M<P;M++){x=U[M];D=j.load(x,
g);if(!D.ready&&!(D.key in e)){N=x.column;H=x.row;D.proxyRefs={};for(var B,F,K,J=1;J<=w;J++){F=true;var O=0;for(x=1<<J;O<=x;O++)for(var T=0;T<=x;T++)if((K=j.peek(B={column:(N<<J)+T,row:(H<<J)+O,zoom:L+J}))&&K.ready){e[K.key]=j.load(B);K.proxyCount++;D.proxyRefs[K.key]=K}else F=false;if(F)break}if(!F)for(J=1;J<=q;J++)if((K=j.peek(B={column:N>>J,row:H>>J,zoom:L-J}))&&K.ready){e[K.key]=j.load(B);K.proxyCount++;D.proxyRefs[K.key]=K;break}}e[D.key]=D}h(e);for(S in v)if(!(S in e)){D=j.unload(S);D.element.parentNode.removeChild(D.element);
delete D.proxyRefs}for(S in e){D=e[S];if(D.element.parentNode!=z[D.level]){z[D.level].appendChild(D.element);d.show&&d.show(D)}}j.flush()}d.dispatch({type:"move"})}var d={},j=d.cache=t.cache(f,i).size(512),u=true,n=true,l,k,y,r,o=t.svg("g"),A,C,z={};o.setAttribute("class","layer");for(var I=-4;I<=-1;I++)z[I]=o.appendChild(t.svg("g"));for(I=2;I>=1;I--)z[I]=o.appendChild(t.svg("g"));z[0]=o.appendChild(t.svg("g"));d.map=function(h){if(!arguments.length)return r;if(r){if(r==h){o.parentNode.appendChild(o);
return d}r.off("move",a).off("resize",a);o.parentNode.removeChild(o)}if(r=h){r.container().appendChild(o);d.init&&d.init(o);r.on("move",a).on("resize",a);a()}return d};d.container=function(){return o};d.levels=function(){return z};d.id=function(h){if(!arguments.length)return y;y=h;o.setAttribute("id",h);return d};d.visible=function(h){if(!arguments.length)return n;(n=h)?o.removeAttribute("visibility"):o.setAttribute("visibility","hidden");r&&a();return d};d.transform=function(h){if(!arguments.length)return A;
A=h;r&&a();return d};d.zoom=function(h){if(!arguments.length)return l;l=typeof h=="function"||h==null?h:function(){return h};r&&a();return d};d.lockTiles=function(h){if(!arguments.length)return k;k=h;r&&a();return d};d.tile=function(h){if(!arguments.length)return u;u=h;r&&a();return d};d.reload=function(){j.clear();r&&a();return d};d.dispatch=t.dispatch(d);d.on("load",function(h){if(h.tile.proxyRefs){for(var s in h.tile.proxyRefs){var v=h.tile.proxyRefs[s];--v.proxyCount<=0&&j.unload(s)&&v.element.parentNode.removeChild(v.element)}delete h.tile.proxyRefs}});
return d};t.image=function(){var f=t.layer(function(c){var m=c.element=t.svg("image"),g=f.map().tileSize();m.setAttribute("preserveAspectRatio","none");m.setAttribute("width",g.x);m.setAttribute("height",g.y);if(typeof i=="function"){m.setAttribute("opacity",0);g=i(c);if(g!=null)c.request=t.queue.image(m,g,function(a){delete c.request;c.ready=true;c.img=a;m.removeAttribute("opacity");f.dispatch({type:"load",tile:c})});else{c.ready=true;f.dispatch({type:"load",tile:c})}}else{c.ready=true;i!=null&&
m.setAttributeNS(t.ns.xlink,"href",i);f.dispatch({type:"load",tile:c})}},function(c){c.request&&c.request.abort(true)}),i;f.url=function(c){if(!arguments.length)return i;i=typeof c=="string"&&/{.}/.test(c)?t.url(c):c;return f.reload()};return f};t.geoJson=function(f){function i(h){var s={lat:0,lon:0};return function(v){s.lat=v[1];s.lon=v[0];var e=h(s);v.x=e.x;v.y=e.y;return e}}function c(h,s){return h&&h.type in A&&A[h.type](h,s)}function m(h,s,v){return h.type in C&&C[h.type](h,s,v)}function g(){var h=
a.map().zoom(),s=a.cache.locks(),v,e,w,q,x,E,G;if(r=="fixed")for(v in s){if((e=s[v]).scale!=h){G="scale("+Math.pow(2,e.zoom-h)+")";q=-1;for(x=(w=e.features).length;++q<x;)m((E=w[q]).data.geometry,E.element,G);e.scale=h}}else for(v in s){q=-1;for(x=(w=(e=s[v]).features).length;++q<x;)m((E=w[q]).data.geometry,E.element,"");delete e.scale}}var a=t.layer(function(h,s){function v(w){var q=[];if(w.next)h.request=f(w.next.href,v);switch(w.type){case "FeatureCollection":for(var x=0;x<w.features.length;x++){var E=
w.features[x],G=c(E.geometry,s);G&&q.push({element:e.appendChild(G),data:E})}break;case "Feature":(G=c(w.geometry,s))&&q.push({element:e.appendChild(G),data:w});break;default:(G=c(w,s))&&q.push({element:e.appendChild(G),data:{type:"Feature",geometry:w}});break}h.ready=true;q.push.apply(h.features,q);a.dispatch({type:"load",tile:h,features:q})}var e=h.element=t.svg("g");h.features=[];s=i(s(h).locationPoint);if(j!=null)h.request=f(typeof j=="function"?j(h):j,v);else v({type:"FeatureCollection",features:o||
[]})},function(h){h.request&&h.request.abort(true)}),d=a.container(),j,u=true,n="org.polymaps."+t.id(),l="url(#"+n+")",k=d.insertBefore(t.svg("clipPath"),d.firstChild),y=k.appendChild(t.svg("rect")),r="auto",o;d.setAttribute("fill-rule","evenodd");k.setAttribute("id",n);if(!arguments.length)f=t.queue.json;var A={Point:function(h,s){var v=s(h.coordinates),e=t.svg("circle");e.setAttribute("r",4.5);e.setAttribute("transform","translate("+v.x+","+v.y+")");return e},MultiPoint:function(h,s){for(var v=
t.svg("g"),e=h.coordinates,w,q,x=-1,E=e.length;++x<E;){q=v.appendChild(t.svg("circle"));q.setAttribute("r",4.5);q.setAttribute("transform","translate("+(w=s(e[x])).x+","+w.y+")")}return v},LineString:function(h,s){for(var v=t.svg("path"),e=["M"],w=h.coordinates,q,x=-1,E=w.length;++x<E;)e.push((q=s(w[x])).x,",",q.y,"L");e.pop();if(e.length){v.setAttribute("d",e.join(""));return v}},MultiLineString:function(h,s){for(var v=t.svg("path"),e=[],w=h.coordinates,q,x=-1,E,G=w.length,L;++x<G;){q=w[x];E=-1;
L=q.length;for(e.push("M");++E<L;)e.push((p=s(q[E])).x,",",p.y,"L");e.pop()}if(e.length){v.setAttribute("d",e.join(""));return v}},Polygon:function(h,s){for(var v=t.svg("path"),e=[],w=h.coordinates,q,x=-1,E,G=w.length,L;++x<G;){q=w[x];E=-1;L=q.length-1;for(e.push("M");++E<L;)e.push((p=s(q[E])).x,",",p.y,"L");e[e.length-1]="Z"}if(e.length){v.setAttribute("d",e.join(""));return v}},MultiPolygon:function(h,s){for(var v=t.svg("path"),e=[],w=h.coordinates,q,x,E=-1,G,L,N=w.length,M,H;++E<N;){q=w[E];G=-1;
for(M=q.length;++G<M;){x=q[G];L=-1;H=x.length-1;for(e.push("M");++L<H;)e.push((p=s(x[L])).x,",",p.y,"L");e[e.length-1]="Z"}}if(e.length){v.setAttribute("d",e.join(""));return v}},GeometryCollection:function(h,s){for(var v=t.svg("g"),e=-1,w=h.geometries,q=w.length,x;++e<q;)(x=c(w[e],s))&&v.appendChild(x);return v}},C={Point:function(h,s,v){h=h.coordinates;s.setAttribute("transform","translate("+h.x+","+h.y+")"+v)},MultiPoint:function(h,s,v){h=h.coordinates;var e=-1,w=q.length;s=s.firstChild;for(var q;++e<
w;){q=h[e];s.setAttribute("transform","translate("+q.x+","+q.y+")"+v);s=s.nextSibling}}};a.url=function(h){if(!arguments.length)return j;j=typeof h=="string"&&/{.}/.test(h)?t.url(h):h;if(j!=null)o=null;typeof j=="string"&&a.tile(false);return a.reload()};a.features=function(h){if(!arguments.length)return o;if(o=h){j=null;a.tile(false)}return a.reload()};a.clip=function(h){if(!arguments.length)return u;u&&d.removeChild(k);if(u=h)d.insertBefore(k,d.firstChild);var s=a.cache.locks();for(var v in s)u?
s[v].element.setAttribute("clip-path",l):s[v].element.removeAttribute("clip-path");return a};var z=a.tile;a.tile=function(h){arguments.length&&!h&&a.clip(h);return z.apply(a,arguments)};var I=a.map;a.map=function(h){if(h&&y){var s=h.tileSize();y.setAttribute("width",s.x);y.setAttribute("height",s.y)}return I.apply(a,arguments)};a.scale=function(h){if(!arguments.length)return r;(r=h)?a.on("move",g):a.off("move",g);a.map()&&g();return a};a.show=function(h){u?h.element.setAttribute("clip-path",l):h.element.removeAttribute("clip-path");
a.dispatch({type:"show",tile:h,features:h.features});return a};a.reshow=function(){var h=a.cache.locks();for(var s in h)a.show(h[s]);return a};return a};t.dblclick=function(){function f(a){var d=m.zoom();d=a.shiftKey?Math.ceil(d)-d-1:1-d+Math.floor(d);c==="mouse"?m.zoomBy(d,m.mouse(a)):m.zoomBy(d)}var i={},c="mouse",m,g;i.zoom=function(a){if(!arguments.length)return c;c=a;return i};i.map=function(a){if(!arguments.length)return m;if(m){g.removeEventListener("dblclick",f,false);g=null}if(m=a){g=m.container();
g.addEventListener("dblclick",f,false)}return i};return i};t.drag=function(){function f(d){if(!d.shiftKey){a={x:d.clientX,y:d.clientY};m.focusableParent().focus();d.preventDefault();document.body.style.setProperty("cursor","move",null)}}function i(d){if(a){m.panBy({x:d.clientX-a.x,y:d.clientY-a.y});a.x=d.clientX;a.y=d.clientY}}var c={},m,g,a;c.map=function(d){if(!arguments.length)return m;if(m){g.removeEventListener("mousedown",f,false);g=null}if(m=d){g=m.container();g.addEventListener("mousedown",
f,false)}return c};window.addEventListener("mousemove",i,false);window.addEventListener("mouseup",function(d){if(a){i(d);a=null;document.body.style.removeProperty("cursor")}},false);return c};t.wheel=function(){function f(){d=null}function i(k){var y=k.wheelDelta||-k.detail,r;if(y)if(g){try{l.scrollTop=1E3;l.dispatchEvent(k);y=1E3-l.scrollTop}catch(o){}y*=0.005}else{r=Date.now();if(r-m>200){y=y>0?+1:-1;m=r}else y=0}if(y)switch(a){case "mouse":r=j.mouse(k);d||(d=j.pointLocation(r));j.off("move",f).zoomBy(y,
r,d).on("move",f);break;case "location":j.zoomBy(y,j.locationPoint(d),d);break;default:j.zoomBy(y);break}k.preventDefault();return false}var c={},m=0,g=true,a="mouse",d,j,u,n=document.createElement("div"),l=document.createElement("div");l.style.visibility="hidden";l.style.top="0px";l.style.height="0px";l.style.width="0px";l.style.overflowY="scroll";n.style.height="2000px";l.appendChild(n);document.body.appendChild(l);c.smooth=function(k){if(!arguments.length)return g;g=k;return c};c.zoom=function(k,
y){if(!arguments.length)return a;a=k;d=y;if(j)a=="mouse"?j.on("move",f):j.off("move",f);return c};c.map=function(k){if(!arguments.length)return j;if(j){u.removeEventListener("mousemove",f,false);u.removeEventListener("mousewheel",i,false);u.removeEventListener("MozMousePixelScroll",i,false);u=null;j.off("move",f)}if(j=k){a=="mouse"&&j.on("move",f);u=j.container();u.addEventListener("mousemove",f,false);u.addEventListener("mousewheel",i,false);u.addEventListener("MozMousePixelScroll",i,false)}return c};
return c};t.arrow=function(){function f(r){if(!(r.ctrlKey||r.altKey||r.metaKey)){var o=Date.now(),A=0,C=0;switch(r.keyCode){case 37:if(!a.left){d=o;a.left=1;a.right||(A=l)}break;case 39:if(!a.right){d=o;a.right=1;a.left||(A=-l)}break;case 38:if(!a.up){d=o;a.up=1;a.down||(C=l)}break;case 40:if(!a.down){d=o;a.down=1;a.up||(C=-l)}break;default:return}if(A||C)k.panBy({x:A,y:C});if(!j&&a.left|a.right|a.up|a.down)j=setInterval(m,n);r.preventDefault()}}function i(r){d=Date.now();switch(r.keyCode){case 37:a.left=
0;break;case 39:a.right=0;break;case 38:a.up=0;break;case 40:a.down=0;break;default:return}if(j&&!(a.left|a.right|a.up|a.down))j=clearInterval(j);r.preventDefault()}function c(r){switch(r.charCode){case 45:case 95:k.zoom(Math.ceil(k.zoom())-1);break;case 43:case 61:k.zoom(Math.floor(k.zoom())+1);break;default:return}r.preventDefault()}function m(){if(k)if(!(Date.now()<d+u)){var r=(a.left-a.right)*l,o=(a.up-a.down)*l;if(r||o)k.panBy({x:r,y:o})}}var g={},a={left:0,right:0,up:0,down:0},d=0,j,u=250,n=
50,l=16,k,y;g.map=function(r){if(!arguments.length)return k;if(k){y.removeEventListener("keypress",c,false);y.removeEventListener("keydown",f,false);y.removeEventListener("keyup",i,false);y=null}if(k=r){y=k.focusableParent();y.addEventListener("keypress",c,false);y.addEventListener("keydown",f,false);y.addEventListener("keyup",i,false)}return g};g.speed=function(r){if(!arguments.length)return l;l=r;return g};return g};t.hash=function(){function f(){var j=d(g);if(m!==j)location.replace(m=j)}function i(){if(location.hash!==
m)if(a(g,(m=location.hash).substring(1)))f()}var c={},m,g,a=function(j,u){var n=u.split("/").map(Number);if(n.length<3||n.some(isNaN))return true;else{var l=j.size();j.zoomBy(n[0]-j.zoom(),{x:l.x/2,y:l.y/2},{lat:Math.min(89.99999999,Math.max(-89.99999999,n[1])),lon:n[2]})}},d=function(j){var u=j.center();j=j.zoom();var n=Math.max(0,Math.ceil(Math.log(j)/Math.LN2));return"#"+j.toFixed(2)+"/"+u.lat.toFixed(n)+"/"+u.lon.toFixed(n)};c.map=function(j){if(!arguments.length)return g;if(g){g.off("move",f);
window.removeEventListener("hashchange",i,false)}if(g=j){g.on("move",f);window.addEventListener("hashchange",i,false);location.hash?i():f()}return c};c.parser=function(j){if(!arguments.length)return a;a=j;return c};c.formatter=function(j){if(!arguments.length)return d;d=j;return c};return c};t.touch=function(){function f(r,o){for(var A=-1,C=r.length;++A<C;){var z=r[A],I=z.identifier;switch(o){case "start":l[I]={};l[I].start=l[I].current=a.mouse(z);break;case "current":if(l[I])l[I].current=a.mouse(z);
break;case "finish":delete l[I];break}}k[o]=true;if(o==="current")y||(y=setTimeout(i,0))}function i(){if(k.start||k.finish){j=a.zoom();angle=a.angle();u=c("start")}k={};y=null;var r=c("current"),o=r.n>1?Math.log(r.r/u.r)/Math.LN2+j-a.zoom():0;r.n&&a.zoomBy(o,r,u.location);if(n&&"angle"in r){o=r.angle-u.angle;var A=a.center();a.center(r.location);a.angle(angle+o);a.center(A)}}function c(r){var o=[],A;for(A in l)l[A][r]&&o.push(l[A][r]);if(o.length){A=0;for(var C=o.length,z={x:o[0].x,y:o[0].y};++A<
C;){z.x+=o[A].x;z.y+=o[A].y}z.x/=C;z.y/=C;z.r=0;for(A=-1;++A<C;){var I=o[A].x-z.x,h=o[A].y-z.y;I=I*I+h*h;if(I>z.r)z.r=I}z.r=Math.sqrt(z.r);if(n&&C===2){I=o[1].x-o[0].x;h=o[1].y-o[0].y;z.angle=Math.atan2(h,I)}A=z}else A={};A=A;A.n=o.length;if(A&&(n||r!=="current"))A.location=a.pointLocation(A);return A}function m(r){function o(v){f(v.changedTouches,"current");v.preventDefault()}function A(v){f(v.changedTouches,"finish");s.removeEventListener("touchmove",o,false);s.removeEventListener("touchend",A,
false);s.removeEventListener("touchcancel",A,false);delete s.__polymaps_touch_listeners__}f(r.changedTouches,"start");for(var C={},z=-1,I=r.touches.length;++z<I;)C[r.touches[z].identifier]=true;for(var h in l)C[h]||delete l[h];var s=r.target;if(!s.__polymaps_touch_listeners__){s.addEventListener("touchmove",o,false);s.addEventListener("touchend",A,false);s.addEventListener("touchcancel",A,false);s.__polymaps_touch_listeners__=true}}var g={},a,d,j,u,n,l={},k={},y=null;g.rotate=function(r){if(!arguments.length)return n;
n=r;return g};g.map=function(r){if(!arguments.length)return a;if(a){d.removeEventListener("touchstart",m,false);d=null}if(a=r){d=a.container();d.addEventListener("touchstart",m,false)}return g};return g};t.interact=function(){var f={},i=t.drag(),c=t.wheel(),m=t.dblclick(),g=t.touch(),a=t.arrow();f.map=function(d){i.map(d);c.map(d);m.map(d);g.map(d);a.map(d);return f};return f};t.compass=function(){function f(B){z.setAttribute("class","compass active");L||(L=setInterval(i,w));N&&D.panBy(N);v=Date.now();
return l(B)}function i(){N&&Date.now()>v+e&&D.panBy(N)}function c(B){if(B.shiftKey){H={x0:D.mouse(B)};D.focusableParent().focus();return l(B)}}function m(B){if(H){H.x1=D.mouse(B);P.setAttribute("x",Math.min(H.x0.x,H.x1.x));P.setAttribute("y",Math.min(H.x0.y,H.x1.y));P.setAttribute("width",Math.abs(H.x0.x-H.x1.x));P.setAttribute("height",Math.abs(H.x0.y-H.x1.y));P.removeAttribute("display")}}function g(){z.setAttribute("class","compass");if(H){if(H.x1){D.extent([D.pointLocation({x:Math.min(H.x0.x,
H.x1.x),y:Math.max(H.x0.y,H.x1.y)}),D.pointLocation({x:Math.max(H.x0.x,H.x1.x),y:Math.min(H.x0.y,H.x1.y)})]);P.setAttribute("display","none")}H=null}if(L){clearInterval(L);L=0}}function a(B){return function(){B?this.setAttribute("class","active"):this.removeAttribute("class");N=B}}function d(B){return function(F){z.setAttribute("class","compass active");var K=D.zoom();D.zoom(B<0?Math.ceil(K)-1:Math.floor(K)+1);return l(F)}}function j(B){return function(F){D.zoom(B);return l(F)}}function u(){this.setAttribute("class",
"active")}function n(){this.removeAttribute("class")}function l(B){B.stopPropagation();B.preventDefault();return false}function k(B){var F=Math.SQRT1_2*h,K=h*0.7,J=h*0.2,O=t.svg("g"),T=O.appendChild(t.svg("path")),Q=O.appendChild(t.svg("path"));T.setAttribute("class","direction");T.setAttribute("pointer-events","all");T.setAttribute("d","M0,0L"+F+","+F+"A"+h+","+h+" 0 0,1 "+-F+","+F+"Z");Q.setAttribute("class","chevron");Q.setAttribute("d","M"+J+","+(K-J)+"L0,"+K+" "+-J+","+(K-J));Q.setAttribute("pointer-events",
"none");O.addEventListener("mousedown",f,false);O.addEventListener("mouseover",a(B),false);O.addEventListener("mouseout",a(null),false);O.addEventListener("dblclick",l,false);return O}function y(B){var F=h*0.4,K=F/2,J=t.svg("g"),O=J.appendChild(t.svg("path")),T=J.appendChild(t.svg("path")),Q=J.appendChild(t.svg("path")),V=J.appendChild(t.svg("path"));O.setAttribute("class","back");O.setAttribute("d","M"+-F+",0V"+-F+"A"+F+","+F+" 0 1,1 "+F+","+-F+"V0Z");T.setAttribute("class","direction");T.setAttribute("d",
O.getAttribute("d"));Q.setAttribute("class","chevron");Q.setAttribute("d","M"+-K+","+-F+"H"+K+(B>0?"M0,"+(-F-K)+"V"+-K:""));V.setAttribute("class","fore");V.setAttribute("fill","none");V.setAttribute("d",O.getAttribute("d"));J.addEventListener("mousedown",d(B),false);J.addEventListener("mouseover",u,false);J.addEventListener("mouseout",n,false);J.addEventListener("dblclick",l,false);return J}function r(B){var F=h*0.2,K=h*0.4,J=t.svg("g"),O=J.appendChild(t.svg("rect")),T=J.appendChild(t.svg("path"));
O.setAttribute("pointer-events","all");O.setAttribute("fill","none");O.setAttribute("x",-K);O.setAttribute("y",-0.75*K);O.setAttribute("width",2*K);O.setAttribute("height",1.5*K);T.setAttribute("class","chevron");T.setAttribute("d","M"+-F+",0H"+F);J.addEventListener("mousedown",j(B),false);J.addEventListener("dblclick",l,false);return J}function o(){var B=h+6,F=B,K=D.size();switch(q){case "top-left":break;case "top-right":B=K.x-B;break;case "bottom-left":F=K.y-F;break;case "bottom-right":B=K.x-B;
F=K.y-F;break}z.setAttribute("transform","translate("+B+","+F+")");P.setAttribute("transform","translate("+-B+","+-F+")");for(var J in I)J==D.zoom()?I[J].setAttribute("class","active"):I[J].removeAttribute("class")}function A(){for(;z.lastChild;)z.removeChild(z.lastChild);z.appendChild(P);if(G!="none"){M=z.appendChild(t.svg("g"));M.setAttribute("class","pan");var B=M.appendChild(t.svg("circle"));B.setAttribute("class","back");B.setAttribute("r",h);M.appendChild(k({x:0,y:-s})).setAttribute("transform",
"rotate(0)");M.appendChild(k({x:s,y:0})).setAttribute("transform","rotate(90)");M.appendChild(k({x:0,y:s})).setAttribute("transform","rotate(180)");M.appendChild(k({x:-s,y:0})).setAttribute("transform","rotate(270)");B=M.appendChild(t.svg("circle"));B.setAttribute("fill","none");B.setAttribute("class","fore");B.setAttribute("r",h)}else M=null;if(x!="none"){E=z.appendChild(t.svg("g"));E.setAttribute("class","zoom");B=-0.5;if(x=="big"){I={};var F=D.zoomRange()[0];for(B=0;F<=D.zoomRange()[1];F++,B++)(I[F]=
E.appendChild(r(F))).setAttribute("transform","translate(0,"+-(B+0.75)*h*0.4+")")}F=G=="none"?0.4:2;E.setAttribute("transform","translate(0,"+h*(/^top-/.test(q)?F+(B+0.5)*0.4:-F)+")");E.appendChild(y(+1)).setAttribute("transform","translate(0,"+-(B+0.5)*h*0.4+")");E.appendChild(y(-1)).setAttribute("transform","scale(-1)")}else E=null;o()}var C={},z=t.svg("g"),I={},h=30,s=16,v=0,e=250,w=50,q="top-left",x="small",E,G="small",L,N,M,H,P=t.svg("rect"),D,S,U;z.setAttribute("class","compass");P.setAttribute("class",
"back fore");P.setAttribute("pointer-events","none");P.setAttribute("display","none");C.radius=function(B){if(!arguments.length)return h;h=B;D&&A();return C};C.speed=function(B){if(!arguments.length)return h;s=B;return C};C.position=function(B){if(!arguments.length)return q;q=B;D&&A();return C};C.pan=function(B){if(!arguments.length)return G;G=B;D&&A();return C};C.zoom=function(B){if(!arguments.length)return x;x=B;D&&A();return C};C.map=function(B){if(!arguments.length)return D;if(D){S.removeEventListener("mousedown",
c,false);S.removeChild(z);S=null;U.removeEventListener("mousemove",m,false);U.removeEventListener("mouseup",g,false);U=null;D.off("move",o).off("resize",o)}if(D=B){S=D.container();S.appendChild(z);S.addEventListener("mousedown",c,false);U=S.ownerDocument.defaultView;U.addEventListener("mousemove",m,false);U.addEventListener("mouseup",g,false);D.on("move",o).on("resize",o);A()}return C};return C};t.grid=function(){function f(){var g=m.firstChild,a=c.size(),d=c.pointLocation(Z);c.pointLocation(a);var j=
Math.pow(2,4-Math.round(c.zoom()));d.lat=Math.floor(d.lat/j)*j;d.lon=Math.ceil(d.lon/j)*j;for(var u;(u=c.locationPoint(d).x)<=a.x;d.lon+=j){g||(g=m.appendChild(t.svg("line")));g.setAttribute("x1",u);g.setAttribute("x2",u);g.setAttribute("y1",0);g.setAttribute("y2",a.y);g=g.nextSibling}for(;(u=c.locationPoint(d).y)<=a.y;d.lat-=j){g||(g=m.appendChild(t.svg("line")));g.setAttribute("y1",u);g.setAttribute("y2",u);g.setAttribute("x1",0);g.setAttribute("x2",a.x);g=g.nextSibling}for(;g;){a=g.nextSibling;
m.removeChild(g);g=a}}var i={},c,m=t.svg("g");m.setAttribute("class","grid");i.map=function(g){if(!arguments.length)return c;if(c){m.parentNode.removeChild(m);c.off("move",f).off("resize",f)}if(c=g){c.on("move",f).on("resize",f);c.container().appendChild(m);c.dispatch({type:"move"})}return i};return i};t.stylist=function(){function f(g){var a=g.features.length,d=i.length,j=c.length,u,n,l,k,y,r;for(y=0;y<a;++y)if(n=(u=g.features[y]).element){u=u.data;for(r=0;r<d;++r){k=(l=i[r]).value;if(typeof k===
"function")k=k.call(null,u);k==null?l.name.local?n.removeAttributeNS(l.name.space,l.name.local):n.removeAttribute(l.name):l.name.local?n.setAttributeNS(l.name.space,l.name.local,k):n.setAttribute(l.name,k)}for(r=0;r<j;++r){k=(l=c[r]).value;if(typeof k==="function")k=k.call(null,u);k==null?n.style.removeProperty(l.name):n.style.setProperty(l.name,k,l.priority)}if(k=m){if(typeof k==="function")k=k.call(null,u);if(n.lastChild&&n.lastChild.nodeName!="path"&&n.lastChild.nodeName!="circle")for(;n.lastChild;)n.removeChild(n.lastChild);
if(k!=null)if(n.children.length)for(y=0;y<n.children.length;y++)n.children[y].appendChild(t.svg("title")).appendChild(document.createTextNode(k));else n.appendChild(t.svg("title")).appendChild(document.createTextNode(k))}}}var i=[],c=[],m;f.attr=function(g,a){i.push({name:ea(g),value:a});return f};f.style=function(g,a,d){c.push({name:g,value:a,priority:arguments.length<3?null:d});return f};f.title=function(g){m=g;return f};return f}})(org.polymaps);
