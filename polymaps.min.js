if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(o){function M(){for(var d=0;d<M.maps.length;d++)M.maps[d].resize()}function Q(d){return 360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}function R(d){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}function U(d,h){if(d.row>h.row){var a=d;d=h;h=a}return{x0:d.column,y0:d.row,x1:h.column,y1:h.row,dx:h.column-d.column,dy:h.row-d.row}}function Z(d,h,a,c,k){a=Math.max(a,Math.floor(h.y0));c=Math.min(c,Math.ceil(h.y1));if(d.x0==h.x0&&d.y0==h.y0?d.x0+h.dy/d.dy*d.dx<h.x1:d.x1-h.dy/
d.dy*d.dx<h.x0){var g=d;d=h;h=g}g=d.dx/d.dy;var f=h.dx/h.dy,j=d.dx>0,q=h.dx<0;for(a=a;a<c;a++){var r=g*Math.max(0,Math.min(d.dy,a+j-d.y0))+d.x0;k(Math.floor(f*Math.max(0,Math.min(h.dy,a+q-h.y0))+h.x0),Math.ceil(r),a)}}function $(d,h,a,c,k,g){var f=U(d,h);h=U(h,a);d=U(a,d);if(f.dy>h.dy){a=f;f=h;h=a}if(f.dy>d.dy){a=f;f=d;d=a}if(h.dy>d.dy){a=h;h=d;d=a}f.dy&&Z(d,f,c,k,g);h.dy&&Z(d,h,c,k,g)}o.version="2.0.3+1";var S={x:0,y:0};o.id=function(){var d=0;return function(){return++d}}();o.svg=function(d){return document.createElementNS(o.ns.svg,
d)};o.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};o.transform=function(d,h,a,c,k,g){var f={},j,q,r;if(!arguments.length){d=1;h=k=a=0;c=1;g=0}f.zoomFraction=function(m){if(!arguments.length)return q;q=m;j=Math.floor(q+Math.log(Math.sqrt(d*d+h*h+a*a+c*c))/Math.log(2));r=Math.pow(2,-j);return f};f.apply=function(m){var n=Math.pow(2,-m.zoom),w=Math.pow(2,m.zoom-j);return{column:(d*m.column*n+a*m.row*n+k)*w,row:(h*m.column*n+c*m.row*n+g)*w,zoom:m.zoom-j}};f.unapply=function(m){var n=
Math.pow(2,-m.zoom),w=Math.pow(2,m.zoom+j);return{column:(m.column*n*c-m.row*n*a-k*c+g*a)/(d*c-h*a)*w,row:(m.column*n*h-m.row*n*d-k*h+g*d)/(a*h-c*d)*w,zoom:m.zoom+j}};f.toString=function(){return"matrix("+[d*r,h*r,a*r,c*r].join(" ")+" 0 0)"};return f.zoomFraction(0)};o.cache=function(d,h){function a(n){m--;h&&h(n);delete f[n.key];if(n.next)n.next.prev=n.prev;else if(q=n.prev)q.next=null;if(n.prev)n.prev.next=n.next;else if(j=n.next)j.prev=null}function c(){for(var n=q;m>r;n=n.prev){if(!n)break;n.lock||
a(n)}}var k={},g={},f={},j=null,q=null,r=64,m=0;k.peek=function(n){return f[[n.zoom,n.column,n.row].join("/")]};k.load=function(n,w){var e=[n.zoom,n.column,n.row].join("/"),l=f[e];if(l){if(l.prev){if(l.prev.next=l.next)l.next.prev=l.prev;else q=l.prev;l.prev=null;l.next=j;j=j.prev=l}l.lock=1;return g[e]=l}l={key:e,column:n.column,row:n.row,zoom:n.zoom,next:j,prev:null,lock:1};d.call(null,l,w);g[e]=f[e]=l;if(j)j.prev=l;else q=l;j=l;m++;c();return l};k.unload=function(n){if(!(n in g))return false;var w=
g[n];w.lock=0;delete g[n];w.request&&w.request.abort(false)?a(w):c();return w};k.locks=function(){return g};k.size=function(n){if(!arguments.length)return r;r=n;c();return k};return k};o.url=function(d){function h(c){var k=c.zoom<0?1:1<<c.zoom,g=c.column%k;if(g<0)g+=k;return d.replace(/{(.)}/g,function(f,j){switch(j){case "S":return a[(Math.abs(c.zoom)+c.row+g)%a.length];case "Z":return c.zoom;case "X":return g;case "Y":return c.row;case "B":var q=o.map.coordinateLocation({row:c.row,column:g,zoom:c.zoom}),
r=o.map.coordinateLocation({row:c.row+1,column:g+1,zoom:c.zoom}),m=Math.ceil(Math.log(c.zoom)/Math.LN2);return r.lat.toFixed(m)+","+q.lon.toFixed(m)+","+q.lat.toFixed(m)+","+r.lon.toFixed(m)}return j})}var a=[];h.template=function(c){if(!arguments.length)return d;d=c;return h};h.hosts=function(c){if(!arguments.length)return a;a=c;return h};return h};o.dispatch=function(d){var h={};d.on=function(a,c){for(var k=h[a]||(h[a]=[]),g=0;g<k.length;g++)if(k[g].handler==c)return d;k.push({handler:c,on:true});
return d};d.off=function(a,c){var k=h[a];if(k)for(var g=0;g<k.length;g++){var f=k[g];if(f.handler==c){f.on=false;k.splice(g,1);break}}return d};return function(a){var c=h[a.type];if(c){c=c.slice();for(var k=0;k<c.length;k++){var g=c[k];g.on&&g.handler.call(d,a)}}}};o.queue=function(){function d(){if(!(k>=g||!c.length)){k++;c.pop()()}}function h(f){for(var j=0;j<c.length;j++)if(c[j]==f){c.splice(j,1);return true}return false}function a(f,j,q){function r(){m=new XMLHttpRequest;q&&m.overrideMimeType(q);
m.open("GET",f,true);m.onreadystatechange=function(){if(m.readyState==4){k--;m.status<300&&j(m);d()}};m.send(null)}var m;c.push(r);d();return{abort:function(n){if(h(r))return true;if(n&&m){m.abort();return true}return false}}}var c=[],k=0,g=6;return{text:function(f,j,q){return a(f,function(r){r.responseText&&j(r.responseText)},q)},xml:function(f,j){return a(f,function(q){q.responseXML&&j(q.responseXML)},"application/xml")},json:function(f,j){return a(f,function(q){q.responseText&&j(JSON.parse(q.responseText))},
"application/json")},image:function(f,j,q){function r(){m=document.createElement("img");m.onerror=function(){k--;d()};m.onload=function(){k--;q(m);d()};m.src=j;f.setAttributeNS(o.ns.xlink,"href",j)}var m;c.push(r);d();return{abort:function(n){if(h(r))return true;if(n&&m){m.src="about:";return true}return false}}}}}();o.map=function(){function d(){if(w)if(r<w[0])r=w[0];else if(r>w[1])r=w[1];m=r-(r=Math.round(r));n=Math.pow(2,m)}function h(){if(G){var i=45/Math.pow(2,r+m-3),y=Math.max(Math.abs(s*f.x+
l*f.y),Math.abs(t*f.x+v*f.y)),x=Q(D-y*i/j.y);y=Q(L+y*i/j.y);q.lat=Math.max(x,Math.min(y,q.lat));x=Math.max(Math.abs(s*f.y+l*f.x),Math.abs(t*f.y+v*f.x));q.lon=Math.max(G[0].lon-x*i/j.x,Math.min(G[1].lon+x*i/j.x,q.lon))}}var a={},c,k,g=S,f=S,j={x:256,y:256},q={lat:37.76487,lon:-122.41948},r=12,m=0,n=1,w=[1,18],e=0,l=1,s=0,v=1,t=0,D=-180,L=180,G=[{lat:Q(D),lon:-Infinity},{lat:Q(L),lon:Infinity}];a.locationCoordinate=function(i){i=o.map.locationCoordinate(i);var y=Math.pow(2,r);i.column*=y;i.row*=y;i.zoom+=
r;return i};a.coordinateLocation=o.map.coordinateLocation;a.coordinatePoint=function(i,y){var x=Math.pow(2,r-y.zoom),F=Math.pow(2,r-i.zoom),I=(y.column*x-i.column*F)*j.x*n;x=(y.row*x-i.row*F)*j.y*n;return{x:f.x+l*I-s*x,y:f.y+s*I+l*x}};a.pointCoordinate=function(i,y){var x=Math.pow(2,r-i.zoom),F=(y.x-f.x)/n,I=(y.y-f.y)/n;return{column:i.column*x+(v*F-t*I)/j.x,row:i.row*x+(t*F+v*I)/j.y,zoom:r}};a.locationPoint=function(i){var y=Math.pow(2,r+m-3)/45,x=(i.lon-q.lon)*y*j.x;i=(R(q.lat)-R(i.lat))*y*j.y;
return{x:f.x+l*x-s*i,y:f.y+s*x+l*i}};a.pointLocation=function(i){var y=45/Math.pow(2,r+m-3),x=(i.x-f.x)*y;i=(i.y-f.y)*y;return{lon:q.lon+(v*x-t*i)/j.x,lat:Q(R(q.lat)-(t*x+v*i)/j.y)}};var C=o.svg("rect");C.setAttribute("visibility","hidden");C.setAttribute("pointer-events","all");a.container=function(i){if(!arguments.length)return c;c=i;c.setAttribute("class","map");c.appendChild(C);return a.resize()};a.focusableParent=function(){for(var i=c;i;i=i.parentNode)if(i.tabIndex>=0)return i;return window};
a.mouse=function(i){var y=(c.ownerSVGElement||c).createSVGPoint();if(V<0&&(window.scrollX||window.scrollY)){var x=document.body.appendChild(o.svg("svg"));x.style.position="absolute";x.style.top=x.style.left="0px";var F=x.getScreenCTM();V=!(F.f||F.e);document.body.removeChild(x)}if(V){y.x=i.pageX;y.y=i.pageY}else{y.x=i.clientX;y.y=i.clientY}return y.matrixTransform(c.getScreenCTM().inverse())};a.size=function(i){if(!arguments.length)return g;k=i;return a.resize()};a.resize=function(){if(k){g=k;M.remove(a)}else{var i=
c.ownerSVGElement||c;if(i.offsetWidth==null){C.setAttribute("width","100%");C.setAttribute("height","100%");i=C}b=i.getBoundingClientRect();g={x:b.width,y:b.height};M.add(a)}C.setAttribute("width",g.x);C.setAttribute("height",g.y);f={x:g.x/2,y:g.y/2};h();a.dispatch({type:"resize"});return a};a.tileSize=function(i){if(!arguments.length)return j;j=i;a.dispatch({type:"move"});return a};a.center=function(i){if(!arguments.length)return q;q=i;h();a.dispatch({type:"move"});return a};a.panBy=function(i){var y=
45/Math.pow(2,r+m-3),x=i.x*y;i=i.y*y;return a.center({lon:q.lon+(t*i-v*x)/j.x,lat:Q(R(q.lat)+(t*x+v*i)/j.y)})};a.centerRange=function(i){if(!arguments.length)return G;if(G=i){D=G[0].lat>-90?R(G[0].lat):-Infinity;L=G[0].lat<90?R(G[1].lat):Infinity}else{D=-Infinity;L=Infinity}h();a.dispatch({type:"move"});return a};a.zoom=function(i){if(!arguments.length)return r+m;r=i;d();return a.center(q)};a.zoomBy=function(i,y,x){if(arguments.length<2)return a.zoom(r+m+i);if(arguments.length<3)x=a.pointLocation(y);
r=r+m+i;d();var F=a.locationPoint(x);return a.panBy({x:y.x-F.x,y:y.y-F.y})};a.zoomRange=function(i){if(!arguments.length)return w;w=i;return a.zoom(r+m)};a.angle=function(i){if(!arguments.length)return e;e=i;l=Math.cos(e);s=Math.sin(e);v=Math.cos(-e);t=Math.sin(-e);h();a.dispatch({type:"move"});return a};a.add=function(i){i.map(a);return a};a.remove=function(i){i.map(null);return a};a.dispatch=o.dispatch(a);return a};M.maps=[];M.add=function(d){for(var h=0;h<M.maps.length;h++)if(M.maps[h]==d)return;
M.maps.push(d)};M.remove=function(d){for(var h=0;h<M.maps.length;h++)if(M.maps[h]==d){M.maps.splice(h,1);return}};window.addEventListener("resize",M,false);o.map.locationCoordinate=function(d){var h=1/360;return{column:(d.lon+180)*h,row:(180-R(d.lat))*h,zoom:0}};o.map.coordinateLocation=function(d){var h=45/Math.pow(2,d.zoom-3);return{lon:h*d.column-180,lat:Q(180-h*d.row)}};var V=/WebKit/.test(navigator.userAgent)?-1:0;o.layer=function(d,h){function a(){function e(u){var z=u.zoom,A=z<0?1:1<<z,B=u.column%
A,H=u.row;if(B<0)B+=A;return{locationPoint:function(J){J=o.map.locationCoordinate(J);var K=Math.pow(2,z-J.zoom);return{x:G.x*(K*J.column-B),y:G.y*(K*J.row-H)}}}}function l(u,z,A){var B=y.zoom,H=2-F,J=4+F;for(u=u;u<z;u++){var K=k.load({column:u,row:A,zoom:B},e);if(!K.ready&&!(K.key in I)){K.proxyRefs={};for(var P,T,N,O=1;O<=H;O++){T=true;for(var W=0,aa=1<<O;W<=aa;W++)for(var X=0;X<=aa;X++)if((N=k.peek(P={column:(u<<O)+X,row:(A<<O)+W,zoom:B+O}))&&N.ready){I[N.key]=k.load(P);N.proxyCount++;K.proxyRefs[N.key]=
N}else T=false;if(T)break}if(!T)for(O=1;O<=J;O++)if((N=k.peek(P={column:u>>O,row:A>>O,zoom:B-O}))&&N.ready){I[N.key]=k.load(P);N.proxyCount++;K.proxyRefs[N.key]=N;break}}I[K.key]=K}}var s=c.map(),v=s.zoom(),t=v-(v=Math.round(v)),D=s.size(),L=s.angle(),G=s.tileSize(),C=s.locationCoordinate(s.center());f?m.removeAttribute("visibility"):m.setAttribute("visibility","hidden");for(var i=-4;i<=2;i++)w[i].setAttribute("class","zoom"+(i<0?"":"+")+i+" zoom"+(v+i));m.setAttribute("transform","translate("+D.x/
2+","+D.y/2+")"+(L?"rotate("+L/Math.PI*180+")":"")+(t?"scale("+Math.pow(2,t)+")":"")+(n?n.zoomFraction(t):""));var y=s.pointCoordinate(C,S);i=s.pointCoordinate(C,{x:D.x,y:0});var x=s.pointCoordinate(C,D);s=s.pointCoordinate(C,{x:0,y:D.y});if(!t&&!L&&!n){C.column=(Math.round(G.x*C.column)+(D.x&1)/2)/G.x;C.row=(Math.round(G.y*C.row)+(D.y&1)/2)/G.y}var F=j?j(v)-v:0;if(F){t=Math.pow(2,F);y.column*=t;y.row*=t;i.column*=t;i.row*=t;x.column*=t;x.row*=t;s.column*=t;s.row*=t;y.zoom=i.zoom=x.zoom=s.zoom+=F}if(n){y=
n.unapply(y);i=n.unapply(i);x=n.unapply(x);s=n.unapply(s);C=n.unapply(C)}v=k.locks();var I={};for(var E in v)v[E].proxyCount=0;if(f&&F>-5&&F<3){t=y.zoom<0?1:1<<y.zoom;if(g){$(y,i,x,0,t,l);$(x,s,y,0,t,l)}else{x=Math.floor((y.column+x.column)/2);s=Math.max(0,Math.min(t-1,Math.floor((i.row+s.row)/2)));i=Math.min(4,y.zoom);x=x>>i<<i;s=s>>i<<i;l(x,x+1,s)}}for(E in I){i=I[E];t=Math.pow(2,i.level=i.zoom-C.zoom);x=G.x*(i.column-C.column*t);s=G.y*(i.row-C.row*t);i.element.setAttribute("transform","translate("+
x+","+s+")")}for(E in v)if(!(E in I)){i=k.unload(E);i.element.parentNode.removeChild(i.element);delete i.proxyRefs}for(E in I){i=I[E];if(i.element.parentNode!=w[i.level]){w[i.level].appendChild(i.element);c.show&&c.show(i)}}}var c={},k=c.cache=o.cache(d,h).size(512),g=true,f=true,j,q,r,m,n,w;c.map=function(e){if(!arguments.length)return r;if(r){if(r==e){m.parentNode.appendChild(m);return c}r.off("move",a).off("resize",a);m.parentNode.removeChild(m);m=w=null}if(r=e){m=r.container().appendChild(o.svg("g"));
q&&m.setAttribute("id",q);m.setAttribute("class","layer");w={};for(var l=-4;l<=-1;l++)(w[l]=m.appendChild(o.svg("g"))).setAttribute("transform","scale("+Math.pow(2,-l)+")");for(l=2;l>=1;l--)(w[l]=m.appendChild(o.svg("g"))).setAttribute("transform","scale("+Math.pow(2,-l)+")");w[0]=m.appendChild(o.svg("g"));c.init&&c.init(m);r.on("move",a).on("resize",a);a()}return c};c.container=function(){return m};c.id=function(e){if(!arguments.length)return q;q=e;return c};c.visible=function(e){if(!arguments.length)return f;
f=e;r&&a();return c};c.transform=function(e){if(!arguments.length)return n;n=e;r&&a();return c};c.zoom=function(e){if(!arguments.length)return j;j=typeof e=="function"||e==null?e:function(){return e};return c};c.tile=function(e){if(!arguments.length)return g;g=e;return c};c.dispatch=o.dispatch(c);c.on("load",function(e){if(e.tile.proxyRefs){for(var l in e.tile.proxyRefs){var s=e.tile.proxyRefs[l];--s.proxyCount<=0&&k.unload(l)&&s.element.parentNode.removeChild(s.element)}delete e.tile.proxyRefs}});
return c};o.image=function(){var d=o.layer(function(a){var c=a.element=o.svg("image"),k=d.map().tileSize();c.setAttribute("preserveAspectRatio","none");c.setAttribute("width",k.x);c.setAttribute("height",k.y);c.setAttribute("opacity",0);if(typeof h=="function")a.request=o.queue.image(c,h(a),function(){delete a.request;a.ready=true;c.removeAttribute("opacity");d.dispatch({type:"load",tile:a})});else{a.ready=true;c.setAttributeNS(o.ns.xlink,"href",h);d.dispatch({type:"load",tile:a})}},function(a){a.request&&
a.request.abort(true)}),h="about:blank";d.url=function(a){if(!arguments.length)return h;h=typeof a=="string"&&/{.}/.test(a)?o.url(a):a;return d};return d};o.geoJson=function(d){function h(e,l){return e&&e.type in w&&w[e.type](e,l)}function a(e,l){var s=l({lat:e[1],lon:e[0]}),v=o.svg("circle");v.setAttribute("r",4.5);v.setAttribute("cx",s.x);v.setAttribute("cy",s.y);return v}function c(e,l,s,v){v.push("M");for(var t=0;t<e.length-l;t++){p=s({lat:e[t][1],lon:e[t][0]});v.push(p.x);v.push(",");v.push(p.y);
v.push("L")}v.pop()}function k(e,l,s,v){for(var t=0;t<e.length;t++)c(e[t],l,s,v);l&&v.push("Z")}function g(e,l,s,v){for(var t=[],D=0;D<l.length;D++)e(l[D],s,v,t);if(t.length){e=o.svg("path");e.setAttribute("d",t.join(""));return e}}var f=o.layer(function(e,l){function s(t){var D=[];if(t.next)e.request=d(t.next.href,s);switch(t.type){case "FeatureCollection":for(var L=0;L<t.features.length;L++){var G=t.features[L],C=h(G.geometry,l.locationPoint);C&&D.push({element:v.appendChild(C),data:G})}break;case "Feature":(C=
h(t.geometry,l.locationPoint))&&D.push({element:v.appendChild(C),data:t});break;default:(C=h(t,l.locationPoint))&&D.push({element:v.appendChild(C),data:{type:"Feature",geometry:t}});break}e.ready=true;D.push.apply(m[e.key]||(m[e.key]=[]),D);f.dispatch({type:"load",tile:e,features:D})}var v=e.element=o.svg("g");l=l(e);if(n)s({type:"FeatureCollection",features:n});else e.request=d(typeof j=="function"?j(e):j,s);r&&v.setAttribute("clip-path","url(#"+r+")")},function(e){e.request&&e.request.abort(true);
delete m[e.key]}),j="about:blank",q=true,r,m={},n;if(!arguments.length)d=o.queue.json;var w={Point:function(e,l){return a(e.coordinates,l)},MultiPoint:function(e,l){for(var s=o.svg("g"),v=0;v<e.coordinates.length;v++)s.appendChild(a(e.coordinates[v],l));return s},LineString:function(e,l){return g(c,[e.coordinates],0,l)},MultiLineString:function(e,l){return g(c,e.coordinates,0,l)},Polygon:function(e,l){return g(k,[e.coordinates],1,l)},MultiPolygon:function(e,l){return g(k,e.coordinates||e.coords,1,
l)},GeometryCollection:function(e,l){for(var s=o.svg("g"),v=0;v<e.geometries.length;v++){var t=h(e.geometries[v],l);t&&s.appendChild(t)}return s}};f.url=function(e){if(!arguments.length)return j;j=typeof e=="string"&&/{.}/.test(e)?o.url(e):e;typeof j=="string"&&f.tile(false);return f};f.features=function(e){if(!arguments.length)return n;e&&f.tile(false);n=e;return f};f.clip=function(e){if(!arguments.length)return q;q=e;return f};f.init=function(e){if(q&&f.tile()){var l=f.map().tileSize(),s=e.insertBefore(o.svg("clipPath"),
e.firstChild),v=s.appendChild(o.svg("rect"));s.setAttribute("id",r="org.polymaps."+o.id());v.setAttribute("width",l.x);v.setAttribute("height",l.y)}e.setAttribute("fill-rule","evenodd")};f.show=function(e){f.dispatch({type:"show",tile:e,features:m[e.key]||[]})};f.reshow=function(){var e=f.cache.locks();for(var l in e)f.show(e[l])};return f};o.dblclick=function(){function d(k){var g=a.zoom();g=k.shiftKey?Math.ceil(g)-g-1:1-g+Math.floor(g);a.zoomBy(g,a.mouse(k))}var h={},a,c;h.map=function(k){if(!arguments.length)return a;
if(a){c.removeEventListener("dblclick",d,false);c=null}if(a=k){c=a.container();c.addEventListener("dblclick",d,false)}return h};return h};o.drag=function(){function d(j){f={x:j.clientX,y:j.clientY};c.focusableParent().focus();j.preventDefault();g=document.body.style.cursor;document.body.style.cursor="move"}function h(j){if(f){c.panBy({x:j.clientX-f.x,y:j.clientY-f.y});f.x=j.clientX;f.y=j.clientY}}var a={},c,k,g,f;a.map=function(j){if(!arguments.length)return c;if(c){k.removeEventListener("mousedown",
d,false);k=null}if(c=j){k=c.container();k.addEventListener("mousedown",d,false)}return a};window.addEventListener("mousemove",h,false);window.addEventListener("mouseup",function(j){if(f){h(j);f=null;document.body.style.cursor=g}},false);return a};o.wheel=function(){function d(){f=null}function h(r){var m=(r.wheelDelta/120||-r.detail)*0.1,n=j.mouse(r);if(Y<0){var w=Date.now(),e=w-k;if(e>9&&Math.abs(r.wheelDelta)/e>=50)Y=1;k=w}if(Y==1)m*=0.03;f||(f=j.pointLocation(n));j.off("move",d);if(g)j.zoomBy(m,
n,f);else if(m){w=Date.now();if(w-c>200){j.zoomBy(m>0?+1:-1,n,f);c=w}}j.on("move",d);r.preventDefault();return false}var a={},c=0,k=0,g=true,f,j,q;a.smooth=function(r){if(!arguments.length)return g;g=r;return a};a.map=function(r){if(!arguments.length)return j;if(j){q.removeEventListener("mousemove",d,false);q.removeEventListener("mousewheel",h,false);q.removeEventListener("DOMMouseScroll",h,false);q=null;j.off("move",d)}if(j=r){j.on("move",d);q=j.container();q.addEventListener("mousemove",d,false);
q.addEventListener("mousewheel",h,false);q.addEventListener("DOMMouseScroll",h,false)}return a};return a};var Y=/WebKit\/533/.test(navigator.userAgent)?-1:0;o.arrow=function(){function d(e){if(!(e.ctrlKey||e.altKey||e.metaKey)){var l=Date.now(),s=0,v=0;switch(e.keyCode){case 37:if(!g.left){f=l;g.left=1;g.right||(s=m)}break;case 39:if(!g.right){f=l;g.right=1;g.left||(s=-m)}break;case 38:if(!g.up){f=l;g.up=1;g.down||(v=m)}break;case 40:if(!g.down){f=l;g.down=1;g.up||(v=-m)}break;default:return}if(s||
v)n.panBy({x:s,y:v});if(!j&&g.left|g.right|g.up|g.down)j=setInterval(c,r);e.preventDefault()}}function h(e){f=Date.now();switch(e.keyCode){case 37:g.left=0;break;case 39:g.right=0;break;case 38:g.up=0;break;case 40:g.down=0;break;default:return}if(j&&!(g.left|g.right|g.up|g.down))j=clearInterval(j);e.preventDefault()}function a(e){switch(e.charCode){case 45:case 95:n.zoom(Math.ceil(n.zoom())-1);break;case 43:case 61:n.zoom(Math.floor(n.zoom())+1);break;default:return}e.preventDefault()}function c(){if(n)if(!(Date.now()<
f+q)){var e=(g.left-g.right)*m,l=(g.up-g.down)*m;if(e||l)n.panBy({x:e,y:l})}}var k={},g={left:0,right:0,up:0,down:0},f=0,j,q=250,r=50,m=16,n,w;k.map=function(e){if(!arguments.length)return n;if(n){w.removeEventListener("keypress",a,false);w.removeEventListener("keydown",d,false);w.removeEventListener("keyup",h,false);w=null}if(n=e){w=n.focusableParent();w.addEventListener("keypress",a,false);w.addEventListener("keydown",d,false);w.addEventListener("keyup",h,false)}return k};k.speed=function(e){if(!arguments.length)return m;
m=e;return k};return k};o.hash=function(){function d(){var f=g.center(),j=g.zoom(),q=Math.max(0,Math.ceil(Math.log(j)/Math.LN2));f="#"+j.toFixed(2)+"/"+f.lat.toFixed(q)+"/"+f.lon.toFixed(q);if(c!==f)location.replace(c=f)}function h(){if(location.hash!==c){var f=(c=location.hash).substring(1).split("/").map(Number);if(f.length<3||f.some(isNaN))d();else{var j=g.size();g.zoomBy(f[0]-g.zoom(),{x:j.x/2,y:j.y/2},{lat:Math.min(k,Math.max(-k,f[1])),lon:f[2]})}}}var a={},c,k=89.99999999,g;a.map=function(f){if(!arguments.length)return g;
if(g){g.off("move",d);window.removeEventListener("hashchange",h,false)}if(g=f){g.on("move",d);window.addEventListener("hashchange",h,false);location.hash?h():d()}return a};return a};o.interact=function(){var d={},h=o.drag(),a=o.wheel(),c=o.dblclick(),k=o.arrow();d.map=function(g){h.map(g);a.map(g);c.map(g);k.map(g);return d};return d};o.compass=function(){function d(u){s.setAttribute("class","compass active");F||(F=setInterval(h,C));I&&E.panBy(I);L=Date.now();return q(u)}function h(){I&&Date.now()>
L+G&&E.panBy(I)}function a(){s.setAttribute("class","compass");if(F){clearInterval(F);F=0}}function c(u){return function(){u?this.setAttribute("class","active"):this.removeAttribute("class");I=u}}function k(u){return function(z){s.setAttribute("class","compass active");var A=E.zoom();E.zoom(u<0?Math.ceil(A)-1:Math.floor(A)+1);return q(z)}}function g(u){return function(z){E.zoom(u);return q(z)}}function f(){this.setAttribute("class","active")}function j(){this.removeAttribute("class")}function q(u){u.stopPropagation();
u.preventDefault();return false}function r(u){var z=Math.SQRT1_2*t,A=t*0.7,B=t*0.2,H=o.svg("g"),J=H.appendChild(o.svg("path")),K=H.appendChild(o.svg("path"));J.setAttribute("class","direction");J.setAttribute("pointer-events","all");J.setAttribute("d","M0,0L"+z+","+z+"A"+t+","+t+" 0 0,1 "+-z+","+z+"Z");K.setAttribute("class","chevron");K.setAttribute("d","M"+B+","+(A-B)+"L0,"+A+" "+-B+","+(A-B));K.setAttribute("pointer-events","none");H.addEventListener("mousedown",d,false);H.addEventListener("mouseover",
c(u),false);H.addEventListener("mouseout",c(null),false);H.addEventListener("dblclick",q,false);return H}function m(u){var z=t*0.4,A=z/2,B=o.svg("g"),H=B.appendChild(o.svg("path")),J=B.appendChild(o.svg("path")),K=B.appendChild(o.svg("path")),P=B.appendChild(o.svg("path"));H.setAttribute("class","back");H.setAttribute("d","M"+-z+",0V"+-z+"A"+z+","+z+" 0 1,1 "+z+","+-z+"V0Z");J.setAttribute("class","direction");J.setAttribute("d",H.getAttribute("d"));K.setAttribute("class","chevron");K.setAttribute("d",
"M"+-A+","+-z+"H"+A+(u>0?"M0,"+(-z-A)+"V"+-A:""));P.setAttribute("class","fore");P.setAttribute("fill","none");P.setAttribute("d",H.getAttribute("d"));B.addEventListener("mousedown",k(u),false);B.addEventListener("mouseover",f,false);B.addEventListener("mouseout",j,false);B.addEventListener("dblclick",q,false);return B}function n(u){var z=t*0.2,A=t*0.4,B=o.svg("g"),H=B.appendChild(o.svg("rect")),J=B.appendChild(o.svg("path"));H.setAttribute("pointer-events","all");H.setAttribute("fill","none");H.setAttribute("x",
-A);H.setAttribute("y",-0.75*A);H.setAttribute("width",2*A);H.setAttribute("height",1.5*A);J.setAttribute("class","chevron");J.setAttribute("d","M"+-z+",0H"+z);B.addEventListener("mousedown",g(u),false);B.addEventListener("dblclick",q,false);return B}function w(){var u=t+6,z=u,A=E.size();switch(i){case "top-left":break;case "top-right":u=A.x-u;break;case "bottom-left":z=A.y-z;break;case "bottom-right":u=A.x-u;z=A.y-z;break}s.setAttribute("transform","translate("+u+","+z+")");for(var B in v)B==E.zoom()?
v[B].setAttribute("class","active"):v[B].removeAttribute("class")}function e(){for(;s.lastChild;)s.removeChild(s.lastChild);if(x!="none"){var u=s.appendChild(o.svg("g"));u.setAttribute("class","pan");var z=u.appendChild(o.svg("circle"));z.setAttribute("class","back");z.setAttribute("r",t);u.appendChild(r({x:0,y:-D})).setAttribute("transform","rotate(0)");u.appendChild(r({x:D,y:0})).setAttribute("transform","rotate(90)");u.appendChild(r({x:0,y:D})).setAttribute("transform","rotate(180)");u.appendChild(r({x:-D,
y:0})).setAttribute("transform","rotate(270)");u=u.appendChild(o.svg("circle"));u.setAttribute("fill","none");u.setAttribute("class","fore");u.setAttribute("r",t)}if(y!="none"){u=s.appendChild(o.svg("g"));u.setAttribute("class","zoom");z=-0.5;if(y=="big"){v={};var A=E.zoomRange()[0];for(z=0;A<=E.zoomRange()[1];A++,z++)(v[A]=u.appendChild(n(A))).setAttribute("transform","translate(0,"+-(z+0.75)*t*0.4+")")}A=x=="none"?0.4:2;u.setAttribute("transform","translate(0,"+t*(/^top-/.test(i)?A+(z+0.5)*0.4:
-A)+")");u.appendChild(m(+1)).setAttribute("transform","translate(0,"+-(z+0.5)*t*0.4+")");u.appendChild(m(-1)).setAttribute("transform","scale(-1)")}w()}var l={},s=o.svg("g"),v={},t=30,D=16,L=0,G=250,C=50,i="top-left",y="small",x="small",F,I,E;s.setAttribute("class","compass");l.radius=function(u){if(!arguments.length)return t;t=u;E&&e();return l};l.speed=function(u){if(!arguments.length)return t;D=u;return l};l.position=function(u){if(!arguments.length)return i;i=u;E&&e();return l};l.pan=function(u){if(!arguments.length)return x;
x=u;E&&e();return l};l.zoom=function(u){if(!arguments.length)return y;y=u;E&&e();return l};l.map=function(u){if(!arguments.length)return E;if(E){s.parentNode.removeChild(s);E.off("move",w).off("resize",w);window.removeEventListener("mouseup",a,false)}if(E=u){window.addEventListener("mouseup",a,false);E.on("move",w).on("resize",w);E.container().appendChild(s);e()}return l};return l};o.grid=function(){function d(){var k=c.firstChild,g=a.size(),f=a.pointLocation(S);a.pointLocation(g);var j=Math.pow(2,
4-Math.round(a.zoom()));f.lat=Math.floor(f.lat/j)*j;f.lon=Math.ceil(f.lon/j)*j;for(var q;(q=a.locationPoint(f).x)<=g.x;f.lon+=j){k||(k=c.appendChild(o.svg("line")));k.setAttribute("x1",q);k.setAttribute("x2",q);k.setAttribute("y1",0);k.setAttribute("y2",g.y);k=k.nextSibling}for(;(q=a.locationPoint(f).y)<=g.y;f.lat-=j){k||(k=c.appendChild(o.svg("line")));k.setAttribute("y1",q);k.setAttribute("y2",q);k.setAttribute("x1",0);k.setAttribute("x2",g.x);k=k.nextSibling}for(;k;){g=k.nextSibling;c.removeChild(k);
k=g}}var h={},a,c=o.svg("g");c.setAttribute("class","grid");h.map=function(k){if(!arguments.length)return a;if(a){c.parentNode.removeChild(c);a.off("move",d).off("resize",d)}if(a=k){a.on("move",d).on("resize",d);a.container().appendChild(c);a.dispatch({type:"move"})}return h};return h}})(org.polymaps);
