if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(u){function ea(f){var i=f.indexOf(":");return i<0?f:{space:u.ns[f.substring(0,i)],local:f.substring(i+1)}}function R(){for(var f=0;f<R.maps.length;f++)R.maps[f].resize()}function X(f){return 360/Math.PI*Math.atan(Math.exp(f*Math.PI/180))-90}function Y(f){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360))}function $(f,i){if(f.row>i.row){var c=f;f=i;i=c}return{x0:f.column,y0:f.row,x1:i.column,y1:i.row,dx:i.column-f.column,dy:i.row-f.row}}function ba(f,i,c,m,g){c=Math.max(c,Math.floor(i.y0));
m=Math.min(m,Math.ceil(i.y1));if(f.x0==i.x0&&f.y0==i.y0?f.x0+i.dy/f.dy*f.dx<i.x1:f.x1-i.dy/f.dy*f.dx<i.x0){var a=f;f=i;i=a}a=f.dx/f.dy;var d=i.dx/i.dy,j=f.dx>0,t=i.dx<0;for(c=c;c<m;c++){var s=a*Math.max(0,Math.min(f.dy,c+j-f.y0))+f.x0;g(Math.floor(d*Math.max(0,Math.min(i.dy,c+t-i.y0))+i.x0),Math.ceil(s),c)}}function ca(f,i,c,m,g,a){var d=$(f,i);i=$(i,c);f=$(c,f);if(d.dy>i.dy){c=d;d=i;i=c}if(d.dy>f.dy){c=d;d=f;f=c}if(i.dy>f.dy){c=i;i=f;f=c}d.dy&&ba(f,d,m,g,a);i.dy&&ba(f,i,m,g,a)}u.version="2.5.1";
var Z={x:0,y:0};u.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};u.id=function(){var f=0;return function(){return++f}}();u.svg=function(f){return document.createElementNS(u.ns.svg,f)};u.transform=function(f,i,c,m,g,a){var d={},j,t,s;if(!arguments.length){f=1;i=g=c=0;m=1;a=0}d.zoomFraction=function(l){if(!arguments.length)return t;t=l;j=Math.floor(t+Math.log(Math.sqrt(f*f+i*i+c*c+m*m))/Math.LN2);s=Math.pow(2,-j);return d};d.apply=function(l){var k=Math.pow(2,-l.zoom),z=
Math.pow(2,l.zoom-j);return{column:(f*l.column*k+c*l.row*k+g)*z,row:(i*l.column*k+m*l.row*k+a)*z,zoom:l.zoom-j}};d.unapply=function(l){var k=Math.pow(2,-l.zoom),z=Math.pow(2,l.zoom+j);return{column:(l.column*k*m-l.row*k*c-g*m+a*c)/(f*m-i*c)*z,row:(l.column*k*i-l.row*k*f-g*i+a*f)/(c*i-m*f)*z,zoom:l.zoom+j}};d.toString=function(){return"matrix("+[f*s,i*s,c*s,m*s].join(" ")+" 0 0)"};return d.zoomFraction(0)};u.cache=function(f,i){function c(k){l--;i&&i(k);delete d[k.key];if(k.next)k.next.prev=k.prev;
else if(t=k.prev)t.next=null;if(k.prev)k.prev.next=k.next;else if(j=k.next)j.prev=null}function m(){for(var k=t;l>s;k=k.prev){if(!k)break;k.lock||c(k)}}var g={},a={},d={},j=null,t=null,s=64,l=0;g.peek=function(k){return d[[k.zoom,k.column,k.row].join("/")]};g.load=function(k,z){var r=[k.zoom,k.column,k.row].join("/"),o=d[r];if(o){if(o.prev){if(o.prev.next=o.next)o.next.prev=o.prev;else t=o.prev;o.prev=null;o.next=j;j=j.prev=o}o.lock=1;return a[r]=o}o={key:r,column:k.column,row:k.row,zoom:k.zoom,next:j,
prev:null,lock:1};f.call(null,o,z);a[r]=d[r]=o;if(j)j.prev=o;else t=o;j=o;l++;return o};g.unload=function(k){if(!(k in a))return false;var z=a[k];z.lock=0;delete a[k];z.request&&z.request.abort(false)&&c(z);return z};g.locks=function(){return a};g.size=function(k){if(!arguments.length)return s;s=k;m();return g};g.flush=function(){m();return g};g.clear=function(){for(var k in d){var z=d[k];z.request&&z.request.abort(false);i&&i(d[k]);if(z.lock){z.lock=0;z.element.parentNode.removeChild(z.element)}}a=
{};d={};j=t=null;l=0;return g};return g};u.url=function(f){function i(g){var a=g.zoom<0?1:1<<g.zoom,d=g.column;if(m){d=g.column%a;if(d<0)d+=a}else if(d<0||d>=a)return null;return f.replace(/{(.)}/g,function(j,t){switch(t){case "S":return c[(Math.abs(g.zoom)+g.row+d)%c.length];case "Z":return g.zoom;case "X":return d;case "Y":return g.row;case "B":var s=u.map.coordinateLocation({row:g.row,column:d,zoom:g.zoom}),l=u.map.coordinateLocation({row:g.row+1,column:d+1,zoom:g.zoom}),k=Math.ceil(Math.log(g.zoom)/
Math.LN2);return l.lat.toFixed(k)+","+s.lon.toFixed(k)+","+s.lat.toFixed(k)+","+l.lon.toFixed(k)}return t})}var c=[],m=true;i.template=function(g){if(!arguments.length)return f;f=g;return i};i.hosts=function(g){if(!arguments.length)return c;c=g;return i};i.repeat=function(g){if(!arguments.length)return m;m=g;return i};return i};u.dispatch=function(f){var i={};f.on=function(c,m){for(var g=i[c]||(i[c]=[]),a=0;a<g.length;a++)if(g[a].handler==m)return f;g.push({handler:m,on:true});return f};f.off=function(c,
m){var g=i[c];if(g)for(var a=0;a<g.length;a++){var d=g[a];if(d.handler==m){d.on=false;g.splice(a,1);break}}return f};return function(c){var m=i[c.type];if(m){m=m.slice();for(var g=0;g<m.length;g++){var a=m[g];a.on&&a.handler.call(f,c)}}}};u.queue=function(){function f(){if(!(g>=a||!m.length)){g++;m.pop()()}}function i(d){for(var j=0;j<m.length;j++)if(m[j]==d){m.splice(j,1);return true}return false}function c(d,j,t){function s(){l=new XMLHttpRequest;t&&l.overrideMimeType&&l.overrideMimeType(t);l.open("GET",
d,true);l.onreadystatechange=function(){if(l.readyState==4){g--;l.status<300&&j(l);f()}};l.send(null)}var l;m.push(s);f();return{abort:function(k){if(i(s))return true;if(k&&l){l.abort();return true}return false}}}var m=[],g=0,a=6;return{text:function(d,j,t){return c(d,function(s){s.responseText&&j(s.responseText)},t)},xml:function(d,j){return c(d,function(t){t.responseXML&&j(t.responseXML)},"application/xml")},json:function(d,j){return c(d,function(t){t.responseText&&j(JSON.parse(t.responseText))},
"application/json")},image:function(d,j,t){function s(){l=document.createElement("img");l.onerror=function(){g--;f()};l.onload=function(){g--;t(l);f()};l.src=j;d.setAttributeNS(u.ns.xlink,"href",j)}var l;m.push(s);f();return{abort:function(k){if(i(s))return true;if(k&&l){l.src="about:";return true}return false}}}}}();u.map=function(){function f(){if(z)if(s<z[0])s=z[0];else if(s>z[1])s=z[1];l=s-(s=Math.round(s));k=Math.pow(2,l)}function i(){if(q){var e=45/Math.pow(2,s+l-3),w=Math.max(Math.abs(A*d.x+
o*d.y),Math.abs(y*d.x+C*d.y)),n=X(I-w*e/j.y);w=X(h+w*e/j.y);t.lat=Math.max(n,Math.min(w,t.lat));n=Math.max(Math.abs(A*d.y+o*d.x),Math.abs(y*d.y+C*d.x));t.lon=Math.max(q[0].lon-n*e/j.x,Math.min(q[1].lon+n*e/j.x,t.lon))}}var c={},m,g,a=Z,d=Z,j={x:256,y:256},t={lat:37.76487,lon:-122.41948},s=12,l=0,k=1,z=[1,18],r=0,o=1,A=0,C=1,y=0,I=-180,h=180,q=[{lat:X(I),lon:-Infinity},{lat:X(h),lon:Infinity}];c.locationCoordinate=function(e){e=u.map.locationCoordinate(e);var w=Math.pow(2,s);e.column*=w;e.row*=w;e.zoom+=
s;return e};c.coordinateLocation=u.map.coordinateLocation;c.coordinatePoint=function(e,w){var n=Math.pow(2,s-w.zoom),x=Math.pow(2,s-e.zoom),E=(w.column*n-e.column*x)*j.x*k;n=(w.row*n-e.row*x)*j.y*k;return{x:d.x+o*E-A*n,y:d.y+A*E+o*n}};c.pointCoordinate=function(e,w){var n=Math.pow(2,s-e.zoom),x=(w.x-d.x)/k,E=(w.y-d.y)/k;return{column:e.column*n+(C*x-y*E)/j.x,row:e.row*n+(y*x+C*E)/j.y,zoom:s}};c.locationPoint=function(e){var w=Math.pow(2,s+l-3)/45,n=(e.lon-t.lon)*w*j.x;e=(Y(t.lat)-Y(e.lat))*w*j.y;
return{x:d.x+o*n-A*e,y:d.y+A*n+o*e}};c.pointLocation=function(e){var w=45/Math.pow(2,s+l-3),n=(e.x-d.x)*w;e=(e.y-d.y)*w;return{lon:t.lon+(C*n-y*e)/j.x,lat:X(Y(t.lat)-(y*n+C*e)/j.y)}};var v=u.svg("rect");v.setAttribute("visibility","hidden");v.setAttribute("pointer-events","all");c.container=function(e){if(!arguments.length)return m;m=e;m.setAttribute("class","map");m.appendChild(v);return c.resize()};c.focusableParent=function(){for(var e=m;e;e=e.parentNode)if(e.tabIndex>=0)return e;return window};
c.mouse=function(e){var w=(m.ownerSVGElement||m).createSVGPoint();if(aa<0&&(window.scrollX||window.scrollY)){var n=document.body.appendChild(u.svg("svg"));n.style.position="absolute";n.style.top=n.style.left="0px";var x=n.getScreenCTM();aa=!(x.f||x.e);document.body.removeChild(n)}if(aa){w.x=e.pageX;w.y=e.pageY}else{w.x=e.clientX;w.y=e.clientY}return w.matrixTransform(m.getScreenCTM().inverse())};c.size=function(e){if(!arguments.length)return a;g=e;return c.resize()};c.resize=function(){if(g){a=g;
R.remove(c)}else{v.setAttribute("width","100%");v.setAttribute("height","100%");b=v.getBBox();a={x:b.width,y:b.height};R.add(c)}v.setAttribute("width",a.x);v.setAttribute("height",a.y);d={x:a.x/2,y:a.y/2};i();c.dispatch({type:"resize"});return c};c.tileSize=function(e){if(!arguments.length)return j;j=e;c.dispatch({type:"move"});return c};c.center=function(e){if(!arguments.length)return t;t=e;i();c.dispatch({type:"move"});return c};c.panBy=function(e){var w=45/Math.pow(2,s+l-3),n=e.x*w;e=e.y*w;return c.center({lon:t.lon+
(y*e-C*n)/j.x,lat:X(Y(t.lat)+(y*n+C*e)/j.y)})};c.centerRange=function(e){if(!arguments.length)return q;if(q=e){I=q[0].lat>-90?Y(q[0].lat):-Infinity;h=q[0].lat<90?Y(q[1].lat):Infinity}else{I=-Infinity;h=Infinity}i();c.dispatch({type:"move"});return c};c.zoom=function(e){if(!arguments.length)return s+l;s=e;f();return c.center(t)};c.zoomBy=function(e,w,n){if(arguments.length<2)return c.zoom(s+l+e);if(arguments.length<3)n=c.pointLocation(w);s=s+l+e;f();var x=c.locationPoint(n);return c.panBy({x:w.x-x.x,
y:w.y-x.y})};c.zoomRange=function(e){if(!arguments.length)return z;z=e;return c.zoom(s+l)};c.extent=function(e){if(!arguments.length)return[c.pointLocation({x:0,y:a.y}),c.pointLocation({x:a.x,y:0})];var w=c.locationPoint(e[0]),n=c.locationPoint(e[1]),x=Math.max((n.x-w.x)/a.x,(w.y-n.y)/a.y);w=c.pointLocation({x:(w.x+n.x)/2,y:(w.y+n.y)/2});s=s+l-Math.log(x)/Math.LN2;f();return c.center(w)};c.angle=function(e){if(!arguments.length)return r;r=e;o=Math.cos(r);A=Math.sin(r);C=Math.cos(-r);y=Math.sin(-r);
i();c.dispatch({type:"move"});return c};c.add=function(e){e.map(c);return c};c.remove=function(e){e.map(null);return c};c.dispatch=u.dispatch(c);return c};R.maps=[];R.add=function(f){for(var i=0;i<R.maps.length;i++)if(R.maps[i]==f)return;R.maps.push(f)};R.remove=function(f){for(var i=0;i<R.maps.length;i++)if(R.maps[i]==f){R.maps.splice(i,1);return}};if(window.addEventListener){window.addEventListener("resize",R,false);window.addEventListener("load",R,false)}u.map.locationCoordinate=function(f){var i=
1/360;return{column:(f.lon+180)*i,row:(180-Y(f.lat))*i,zoom:0}};u.map.coordinateLocation=function(f){var i=45/Math.pow(2,f.zoom-3);return{lon:i*f.column-180,lat:X(180-i*f.row)}};var aa=/WebKit/.test(navigator.userAgent)?-1:0;u.layer=function(f,i){function c(h){for(var q=y[0].nextSibling;C<h;C++){o.insertBefore(y[-4],q);o.insertBefore(y[2],q);o.insertBefore(y[1],q);for(var v=y[-4],e=-4;e<2;)y[e]=y[++e];y[e]=v}}function m(h){for(var q=y[0].nextSibling;C>h;C--){o.insertBefore(y[-1],q);o.insertBefore(y[2],
y[-4]);for(var v=y[2],e=2;e>-4;)y[e]=y[--e];y[e]=v}}function g(h){var q=h.zoom,v=q<0?1:1<<q,e=h.column%v,w=h.row;if(e<0)e+=v;return{locationPoint:function(n){n=u.map.locationCoordinate(n);var x=Math.pow(2,q-n.zoom);return{x:tileSize.x*(x*n.column-e),y:tileSize.y*(x*n.row-w)}}}}function a(){function h(Q){for(var V in Q){var W=Q[V],da=Math.pow(2,W.level=W.zoom-G.zoom);W.element.setAttribute("transform","translate("+(W.x=E.x*(W.column-G.column*da))+","+(W.y=E.y*(W.row-G.row*da))+")")}}function q(Q,V,
W){for(Q=Q;Q<V;Q++)U.push({column:Q,row:W,zoom:L})}var v=d.map(),e=v.zoom(),w=e-(e=Math.round(e)),n=v.size(),x=v.angle(),E=v.tileSize(),G=v.locationCoordinate(v.center());if(C!=e){if(C<e)c(e);else if(C>e)m(e);else C=e;for(var L=-4;L<=2;L++){var N=y[L];N.setAttribute("class","zoom"+(L<0?"":"+")+L+" zoom"+(e+L));N.setAttribute("transform","scale("+Math.pow(2,-L)+")")}}o.setAttribute("transform","translate("+n.x/2+","+n.y/2+")"+(x?"rotate("+x/Math.PI*180+")":"")+(w?"scale("+Math.pow(2,w)+")":"")+(A?
A.zoomFraction(w):""));var M=v.pointCoordinate(G,Z),H=v.pointCoordinate(G,{x:n.x,y:0});N=v.pointCoordinate(G,n);var P=v.pointCoordinate(G,{x:0,y:n.y});v=j.locks();e={};if(k)h(v);else{if(!w&&!x&&!A){G.column=(Math.round(E.x*G.column)+(n.x&1)/2)/E.x;G.row=(Math.round(E.y*G.row)+(n.y&1)/2)/E.y}if(A){M=A.unapply(M);H=A.unapply(H);N=A.unapply(N);P=A.unapply(P);G=A.unapply(G)}var D=l?l(M.zoom)-M.zoom:0;if(D){x=Math.pow(2,D);M.column*=x;M.row*=x;H.column*=x;H.row*=x;N.column*=x;N.row*=x;P.column*=x;P.row*=
x;M.zoom=H.zoom=N.zoom=P.zoom+=D}for(var S in v)v[S].proxyCount=0;var U=[];L=M.zoom;w=2-D;n=4+D;if(s&&D>-5&&D<3){x=M.zoom<0?1:1<<M.zoom;if(t){ca(M,H,N,0,x,q);ca(N,P,M,0,x,q)}else{N=Math.floor((M.column+N.column)/2);H=Math.max(0,Math.min(x-1,Math.floor((H.row+P.row)/2)));L=Math.min(4,M.zoom);N=N>>L<<L;H=H>>L<<L;q(N,N+1,H)}}U.sort(function(Q,V){return Math.abs(Q.row-G.row)+Math.abs(Q.column-G.column)-(Math.abs(V.row-G.row)+Math.abs(V.column-G.column))});M=0;for(P=U.length;M<P;M++){x=U[M];D=j.load(x,
g);if(!D.ready&&!(D.key in e)){N=x.column;H=x.row;D.proxyRefs={};for(var B,F,K,J=1;J<=w;J++){F=true;var O=0;for(x=1<<J;O<=x;O++)for(var T=0;T<=x;T++)if((K=j.peek(B={column:(N<<J)+T,row:(H<<J)+O,zoom:L+J}))&&K.ready){e[K.key]=j.load(B);K.proxyCount++;D.proxyRefs[K.key]=K}else F=false;if(F)break}if(!F)for(J=1;J<=n;J++)if((K=j.peek(B={column:N>>J,row:H>>J,zoom:L-J}))&&K.ready){e[K.key]=j.load(B);K.proxyCount++;D.proxyRefs[K.key]=K;break}}e[D.key]=D}h(e);for(S in v)if(!(S in e)){D=j.unload(S);D.element.parentNode.removeChild(D.element);
delete D.proxyRefs}for(S in e){D=e[S];if(D.element.parentNode!=y[D.level]){y[D.level].appendChild(D.element);d.show&&d.show(D)}}j.flush()}d.dispatch({type:"move"})}var d={},j=d.cache=u.cache(f,i).size(512),t=true,s=true,l,k,z,r,o=u.svg("g"),A,C,y={};o.setAttribute("class","layer");for(var I=-4;I<=-1;I++)y[I]=o.appendChild(u.svg("g"));for(I=2;I>=1;I--)y[I]=o.appendChild(u.svg("g"));y[0]=o.appendChild(u.svg("g"));d.map=function(h){if(!arguments.length)return r;if(r){if(r==h){o.parentNode.appendChild(o);
return d}r.off("move",a).off("resize",a);o.parentNode.removeChild(o)}if(r=h){r.container().appendChild(o);d.init&&d.init(o);r.on("move",a).on("resize",a);a()}return d};d.container=function(){return o};d.levels=function(){return y};d.id=function(h){if(!arguments.length)return z;z=h;o.setAttribute("id",h);return d};d.visible=function(h){if(!arguments.length)return s;(s=h)?o.removeAttribute("visibility"):o.setAttribute("visibility","hidden");r&&a();return d};d.transform=function(h){if(!arguments.length)return A;
A=h;r&&a();return d};d.zoom=function(h){if(!arguments.length)return l;l=typeof h=="function"||h==null?h:function(){return h};r&&a();return d};d.lockTiles=function(h){if(!arguments.length)return k;k=h;r&&a();return d};d.tile=function(h){if(!arguments.length)return t;t=h;r&&a();return d};d.reload=function(){j.clear();r&&a();return d};d.dispatch=u.dispatch(d);d.on("load",function(h){if(h.tile.proxyRefs){for(var q in h.tile.proxyRefs){var v=h.tile.proxyRefs[q];--v.proxyCount<=0&&j.unload(q)&&v.element.parentNode.removeChild(v.element)}delete h.tile.proxyRefs}});
return d};u.image=function(){var f=u.layer(function(c){var m=c.element=u.svg("image"),g=f.map().tileSize();m.setAttribute("preserveAspectRatio","none");m.setAttribute("width",g.x);m.setAttribute("height",g.y);if(typeof i=="function"){m.setAttribute("opacity",0);g=i(c);if(g!=null)c.request=u.queue.image(m,g,function(a){delete c.request;c.ready=true;c.img=a;m.removeAttribute("opacity");f.dispatch({type:"load",tile:c})});else{c.ready=true;f.dispatch({type:"load",tile:c})}}else{c.ready=true;i!=null&&
m.setAttributeNS(u.ns.xlink,"href",i);f.dispatch({type:"load",tile:c})}},function(c){c.request&&c.request.abort(true)}),i;f.url=function(c){if(!arguments.length)return i;i=typeof c=="string"&&/{.}/.test(c)?u.url(c):c;return f.reload()};return f};u.geoJson=function(f){function i(h){var q={lat:0,lon:0};return function(v){q.lat=v[1];q.lon=v[0];var e=h(q);v.x=e.x;v.y=e.y;return e}}function c(h,q){return h&&h.type in A&&A[h.type](h,q)}function m(h,q,v){return h.type in C&&C[h.type](h,q,v)}function g(){var h=
a.map().zoom(),q=a.cache.locks(),v,e,w,n,x,E,G;if(r=="fixed")for(v in q){if((e=q[v]).scale!=h){G="scale("+Math.pow(2,e.zoom-h)+")";n=-1;for(x=(w=e.features).length;++n<x;)m((E=w[n]).data.geometry,E.element,G);e.scale=h}}else for(v in q){n=-1;for(x=(w=(e=q[v]).features).length;++n<x;)m((E=w[n]).data.geometry,E.element,"");delete e.scale}}var a=u.layer(function(h,q){function v(w){var n=[];if(w.next)h.request=f(w.next.href,v);switch(w.type){case "FeatureCollection":for(var x=0;x<w.features.length;x++){var E=
w.features[x],G=c(E.geometry,q);G&&n.push({element:e.appendChild(G),data:E})}break;case "Feature":(G=c(w.geometry,q))&&n.push({element:e.appendChild(G),data:w});break;default:(G=c(w,q))&&n.push({element:e.appendChild(G),data:{type:"Feature",geometry:w}});break}h.ready=true;n.push.apply(h.features,n);a.dispatch({type:"load",tile:h,features:n})}var e=h.element=u.svg("g");h.features=[];q=i(q(h).locationPoint);if(j!=null)h.request=f(typeof j=="function"?j(h):j,v);else v({type:"FeatureCollection",features:o||
[]})},function(h){h.request&&h.request.abort(true)}),d=a.container(),j,t=true,s="org.polymaps."+u.id(),l="url(#"+s+")",k=d.insertBefore(u.svg("clipPath"),d.firstChild),z=k.appendChild(u.svg("rect")),r="auto",o;d.setAttribute("fill-rule","evenodd");k.setAttribute("id",s);if(!arguments.length)f=u.queue.json;var A={Point:function(h,q){var v=q(h.coordinates),e=u.svg("circle");e.setAttribute("r",4.5);e.setAttribute("transform","translate("+v.x+","+v.y+")");return e},MultiPoint:function(h,q){for(var v=
u.svg("g"),e=h.coordinates,w,n,x=-1,E=e.length;++x<E;){n=v.appendChild(u.svg("circle"));n.setAttribute("r",4.5);n.setAttribute("transform","translate("+(w=q(e[x])).x+","+w.y+")")}return v},LineString:function(h,q){for(var v=u.svg("path"),e=["M"],w=h.coordinates,n,x=-1,E=w.length;++x<E;)e.push((n=q(w[x])).x,",",n.y,"L");e.pop();if(e.length){v.setAttribute("d",e.join(""));return v}},MultiLineString:function(h,q){for(var v=u.svg("path"),e=[],w=h.coordinates,n,x=-1,E,G=w.length,L;++x<G;){n=w[x];E=-1;
L=n.length;for(e.push("M");++E<L;)e.push((p=q(n[E])).x,",",p.y,"L");e.pop()}if(e.length){v.setAttribute("d",e.join(""));return v}},Polygon:function(h,q){for(var v=u.svg("path"),e=[],w=h.coordinates,n,x=-1,E,G=w.length,L;++x<G;){n=w[x];E=-1;L=n.length-1;for(e.push("M");++E<L;)e.push((p=q(n[E])).x,",",p.y,"L");e[e.length-1]="Z"}if(e.length){v.setAttribute("d",e.join(""));return v}},MultiPolygon:function(h,q){for(var v=u.svg("path"),e=[],w=h.coordinates,n,x,E=-1,G,L,N=w.length,M,H;++E<N;){n=w[E];G=-1;
for(M=n.length;++G<M;){x=n[G];L=-1;H=x.length-1;for(e.push("M");++L<H;)e.push((p=q(x[L])).x,",",p.y,"L");e[e.length-1]="Z"}}if(e.length){v.setAttribute("d",e.join(""));return v}},GeometryCollection:function(h,q){for(var v=u.svg("g"),e=-1,w=h.geometries,n=w.length,x;++e<n;)(x=c(w[e],q))&&v.appendChild(x);return v}},C={Point:function(h,q,v){h=h.coordinates;q.setAttribute("transform","translate("+h.x+","+h.y+")"+v)},MultiPoint:function(h,q,v){h=h.coordinates;var e=-1,w=n.length;q=q.firstChild;for(var n;++e<
w;){n=h[e];q.setAttribute("transform","translate("+n.x+","+n.y+")"+v);q=q.nextSibling}}};a.url=function(h){if(!arguments.length)return j;j=typeof h=="string"&&/{.}/.test(h)?u.url(h):h;if(j!=null)o=null;typeof j=="string"&&a.tile(false);return a.reload()};a.features=function(h){if(!arguments.length)return o;if(o=h){j=null;a.tile(false)}return a.reload()};a.clip=function(h){if(!arguments.length)return t;t&&d.removeChild(k);if(t=h)d.insertBefore(k,d.firstChild);var q=a.cache.locks();for(var v in q)t?
q[v].element.setAttribute("clip-path",l):q[v].element.removeAttribute("clip-path");return a};var y=a.tile;a.tile=function(h){arguments.length&&!h&&a.clip(h);return y.apply(a,arguments)};var I=a.map;a.map=function(h){if(h&&z){var q=h.tileSize();z.setAttribute("width",q.x);z.setAttribute("height",q.y)}return I.apply(a,arguments)};a.scale=function(h){if(!arguments.length)return r;(r=h)?a.on("move",g):a.off("move",g);a.map()&&g();return a};a.show=function(h){t?h.element.setAttribute("clip-path",l):h.element.removeAttribute("clip-path");
a.dispatch({type:"show",tile:h,features:h.features});return a};a.reshow=function(){var h=a.cache.locks();for(var q in h)a.show(h[q]);return a};return a};u.dblclick=function(){function f(a){var d=m.zoom();d=a.shiftKey?Math.ceil(d)-d-1:1-d+Math.floor(d);c==="mouse"?m.zoomBy(d,m.mouse(a)):m.zoomBy(d)}var i={},c="mouse",m,g;i.zoom=function(a){if(!arguments.length)return c;c=a;return i};i.map=function(a){if(!arguments.length)return m;if(m){g.removeEventListener("dblclick",f,false);g=null}if(m=a){g=m.container();
g.addEventListener("dblclick",f,false)}return i};return i};u.drag=function(){function f(d){if(!d.shiftKey){a={x:d.clientX,y:d.clientY};m.focusableParent().focus();d.preventDefault();document.body.style.setProperty("cursor","move",null)}}function i(d){if(a){m.panBy({x:d.clientX-a.x,y:d.clientY-a.y});a.x=d.clientX;a.y=d.clientY}}var c={},m,g,a;c.map=function(d){if(!arguments.length)return m;if(m){g.removeEventListener("mousedown",f,false);g=null}if(m=d){g=m.container();g.addEventListener("mousedown",
f,false)}return c};window.addEventListener("mousemove",i,false);window.addEventListener("mouseup",function(d){if(a){i(d);a=null;document.body.style.removeProperty("cursor")}},false);return c};u.wheel=function(){function f(){d=null}function i(k){var z=k.wheelDelta||-k.detail,r;if(z)if(g){try{l.scrollTop=1E3;l.dispatchEvent(k);z=1E3-l.scrollTop}catch(o){}z*=0.005}else{r=Date.now();if(r-m>200){z=z>0?+1:-1;m=r}else z=0}if(z)switch(a){case "mouse":r=j.mouse(k);d||(d=j.pointLocation(r));j.off("move",f).zoomBy(z,
r,d).on("move",f);break;case "location":j.zoomBy(z,j.locationPoint(d),d);break;default:j.zoomBy(z);break}k.preventDefault();return false}var c={},m=0,g=true,a="mouse",d,j,t,s=document.createElement("div"),l=document.createElement("div");l.style.visibility="hidden";l.style.top="0px";l.style.height="0px";l.style.width="0px";l.style.overflowY="scroll";s.style.height="2000px";l.appendChild(s);document.body.appendChild(l);c.smooth=function(k){if(!arguments.length)return g;g=k;return c};c.zoom=function(k,
z){if(!arguments.length)return a;a=k;d=z;if(j)a=="mouse"?j.on("move",f):j.off("move",f);return c};c.map=function(k){if(!arguments.length)return j;if(j){t.removeEventListener("mousemove",f,false);t.removeEventListener("mousewheel",i,false);t.removeEventListener("MozMousePixelScroll",i,false);t=null;j.off("move",f)}if(j=k){a=="mouse"&&j.on("move",f);t=j.container();t.addEventListener("mousemove",f,false);t.addEventListener("mousewheel",i,false);t.addEventListener("MozMousePixelScroll",i,false)}return c};
return c};u.arrow=function(){function f(r){if(!(r.ctrlKey||r.altKey||r.metaKey)){var o=Date.now(),A=0,C=0;switch(r.keyCode){case 37:if(!a.left){d=o;a.left=1;a.right||(A=l)}break;case 39:if(!a.right){d=o;a.right=1;a.left||(A=-l)}break;case 38:if(!a.up){d=o;a.up=1;a.down||(C=l)}break;case 40:if(!a.down){d=o;a.down=1;a.up||(C=-l)}break;default:return}if(A||C)k.panBy({x:A,y:C});if(!j&&a.left|a.right|a.up|a.down)j=setInterval(m,s);r.preventDefault()}}function i(r){d=Date.now();switch(r.keyCode){case 37:a.left=
0;break;case 39:a.right=0;break;case 38:a.up=0;break;case 40:a.down=0;break;default:return}if(j&&!(a.left|a.right|a.up|a.down))j=clearInterval(j);r.preventDefault()}function c(r){switch(r.charCode){case 45:case 95:k.zoom(Math.ceil(k.zoom())-1);break;case 43:case 61:k.zoom(Math.floor(k.zoom())+1);break;default:return}r.preventDefault()}function m(){if(k)if(!(Date.now()<d+t)){var r=(a.left-a.right)*l,o=(a.up-a.down)*l;if(r||o)k.panBy({x:r,y:o})}}var g={},a={left:0,right:0,up:0,down:0},d=0,j,t=250,s=
50,l=16,k,z;g.map=function(r){if(!arguments.length)return k;if(k){z.removeEventListener("keypress",c,false);z.removeEventListener("keydown",f,false);z.removeEventListener("keyup",i,false);z=null}if(k=r){z=k.focusableParent();z.addEventListener("keypress",c,false);z.addEventListener("keydown",f,false);z.addEventListener("keyup",i,false)}return g};g.speed=function(r){if(!arguments.length)return l;l=r;return g};return g};u.hash=function(){function f(){var j=d(g);if(m!==j)location.replace(m=j)}function i(){if(location.hash!==
m)if(a(g,(m=location.hash).substring(1)))f()}var c={},m,g,a=function(j,t){var s=t.split("/").map(Number);if(s.length<3||s.some(isNaN))return true;else{var l=j.size();j.zoomBy(s[0]-j.zoom(),{x:l.x/2,y:l.y/2},{lat:Math.min(89.99999999,Math.max(-89.99999999,s[1])),lon:s[2]})}},d=function(j){var t=j.center();j=j.zoom();var s=Math.max(0,Math.ceil(Math.log(j)/Math.LN2));return"#"+j.toFixed(2)+"/"+t.lat.toFixed(s)+"/"+t.lon.toFixed(s)};c.map=function(j){if(!arguments.length)return g;if(g){g.off("move",f);
window.removeEventListener("hashchange",i,false)}if(g=j){g.on("move",f);window.addEventListener("hashchange",i,false);location.hash?i():f()}return c};c.parser=function(j){if(!arguments.length)return a;a=j;return c};c.formatter=function(j){if(!arguments.length)return d;d=j;return c};return c};u.touch=function(){function f(r,o){for(var A=-1,C=r.length;++A<C;){var y=r[A],I=y.identifier;switch(o){case "start":l[I]={};l[I].start=l[I].current=a.mouse(y);break;case "current":if(l[I])l[I].current=a.mouse(y);
break;case "finish":delete l[I];break}}k[o]=true;if(o==="current")z||(z=setTimeout(i,0))}function i(){if(k.start||k.finish){j=a.zoom();angle=a.angle();t=c("start")}k={};z=null;var r=c("current"),o=r.n>1?Math.log(r.r/t.r)/Math.LN2+j-a.zoom():0;r.n&&a.zoomBy(o,r,t.location);if(s&&"angle"in r){o=r.angle-t.angle;var A=a.center();a.center(r.location);a.angle(angle+o);a.center(A)}}function c(r){var o=[],A;for(A in l)l[A][r]&&o.push(l[A][r]);if(o.length){A=0;for(var C=o.length,y={x:o[0].x,y:o[0].y};++A<
C;){y.x+=o[A].x;y.y+=o[A].y}y.x/=C;y.y/=C;y.r=0;for(A=-1;++A<C;){var I=o[A].x-y.x,h=o[A].y-y.y;I=I*I+h*h;if(I>y.r)y.r=I}y.r=Math.sqrt(y.r);if(s&&C===2){I=o[1].x-o[0].x;h=o[1].y-o[0].y;y.angle=Math.atan2(h,I)}A=y}else A={};A=A;A.n=o.length;if(A&&(s||r!=="current"))A.location=a.pointLocation(A);return A}function m(r){function o(v){f(v.changedTouches,"current");v.preventDefault()}function A(v){f(v.changedTouches,"finish");q.removeEventListener("touchmove",o,false);q.removeEventListener("touchend",A,
false);q.removeEventListener("touchcancel",A,false);delete q.__polymaps_touch_listeners__}f(r.changedTouches,"start");for(var C={},y=-1,I=r.touches.length;++y<I;)C[r.touches[y].identifier]=true;for(var h in l)C[h]||delete l[h];var q=r.target;if(!q.__polymaps_touch_listeners__){q.addEventListener("touchmove",o,false);q.addEventListener("touchend",A,false);q.addEventListener("touchcancel",A,false);q.__polymaps_touch_listeners__=true}}var g={},a,d,j,t,s,l={},k={},z=null;g.rotate=function(r){if(!arguments.length)return s;
s=r;return g};g.map=function(r){if(!arguments.length)return a;if(a){d.removeEventListener("touchstart",m,false);d=null}if(a=r){d=a.container();d.addEventListener("touchstart",m,false)}return g};return g};u.interact=function(){var f={},i=u.drag(),c=u.wheel(),m=u.dblclick(),g=u.touch(),a=u.arrow();f.map=function(d){i.map(d);c.map(d);m.map(d);g.map(d);a.map(d);return f};return f};u.compass=function(){function f(B){y.setAttribute("class","compass active");L||(L=setInterval(i,w));N&&D.panBy(N);v=Date.now();
return l(B)}function i(){N&&Date.now()>v+e&&D.panBy(N)}function c(B){if(B.shiftKey){H={x0:D.mouse(B)};D.focusableParent().focus();return l(B)}}function m(B){if(H){H.x1=D.mouse(B);P.setAttribute("x",Math.min(H.x0.x,H.x1.x));P.setAttribute("y",Math.min(H.x0.y,H.x1.y));P.setAttribute("width",Math.abs(H.x0.x-H.x1.x));P.setAttribute("height",Math.abs(H.x0.y-H.x1.y));P.removeAttribute("display")}}function g(){y.setAttribute("class","compass");if(H){if(H.x1){D.extent([D.pointLocation({x:Math.min(H.x0.x,
H.x1.x),y:Math.max(H.x0.y,H.x1.y)}),D.pointLocation({x:Math.max(H.x0.x,H.x1.x),y:Math.min(H.x0.y,H.x1.y)})]);P.setAttribute("display","none")}H=null}if(L){clearInterval(L);L=0}}function a(B){return function(){B?this.setAttribute("class","active"):this.removeAttribute("class");N=B}}function d(B){return function(F){y.setAttribute("class","compass active");var K=D.zoom();D.zoom(B<0?Math.ceil(K)-1:Math.floor(K)+1);return l(F)}}function j(B){return function(F){D.zoom(B);return l(F)}}function t(){this.setAttribute("class",
"active")}function s(){this.removeAttribute("class")}function l(B){B.stopPropagation();B.preventDefault();return false}function k(B){var F=Math.SQRT1_2*h,K=h*0.7,J=h*0.2,O=u.svg("g"),T=O.appendChild(u.svg("path")),Q=O.appendChild(u.svg("path"));T.setAttribute("class","direction");T.setAttribute("pointer-events","all");T.setAttribute("d","M0,0L"+F+","+F+"A"+h+","+h+" 0 0,1 "+-F+","+F+"Z");Q.setAttribute("class","chevron");Q.setAttribute("d","M"+J+","+(K-J)+"L0,"+K+" "+-J+","+(K-J));Q.setAttribute("pointer-events",
"none");O.addEventListener("mousedown",f,false);O.addEventListener("mouseover",a(B),false);O.addEventListener("mouseout",a(null),false);O.addEventListener("dblclick",l,false);return O}function z(B){var F=h*0.4,K=F/2,J=u.svg("g"),O=J.appendChild(u.svg("path")),T=J.appendChild(u.svg("path")),Q=J.appendChild(u.svg("path")),V=J.appendChild(u.svg("path"));O.setAttribute("class","back");O.setAttribute("d","M"+-F+",0V"+-F+"A"+F+","+F+" 0 1,1 "+F+","+-F+"V0Z");T.setAttribute("class","direction");T.setAttribute("d",
O.getAttribute("d"));Q.setAttribute("class","chevron");Q.setAttribute("d","M"+-K+","+-F+"H"+K+(B>0?"M0,"+(-F-K)+"V"+-K:""));V.setAttribute("class","fore");V.setAttribute("fill","none");V.setAttribute("d",O.getAttribute("d"));J.addEventListener("mousedown",d(B),false);J.addEventListener("mouseover",t,false);J.addEventListener("mouseout",s,false);J.addEventListener("dblclick",l,false);return J}function r(B){var F=h*0.2,K=h*0.4,J=u.svg("g"),O=J.appendChild(u.svg("rect")),T=J.appendChild(u.svg("path"));
O.setAttribute("pointer-events","all");O.setAttribute("fill","none");O.setAttribute("x",-K);O.setAttribute("y",-0.75*K);O.setAttribute("width",2*K);O.setAttribute("height",1.5*K);T.setAttribute("class","chevron");T.setAttribute("d","M"+-F+",0H"+F);J.addEventListener("mousedown",j(B),false);J.addEventListener("dblclick",l,false);return J}function o(){var B=h+6,F=B,K=D.size();switch(n){case "top-left":break;case "top-right":B=K.x-B;break;case "bottom-left":F=K.y-F;break;case "bottom-right":B=K.x-B;
F=K.y-F;break}y.setAttribute("transform","translate("+B+","+F+")");P.setAttribute("transform","translate("+-B+","+-F+")");for(var J in I)J==D.zoom()?I[J].setAttribute("class","active"):I[J].removeAttribute("class")}function A(){for(;y.lastChild;)y.removeChild(y.lastChild);y.appendChild(P);if(G!="none"){M=y.appendChild(u.svg("g"));M.setAttribute("class","pan");var B=M.appendChild(u.svg("circle"));B.setAttribute("class","back");B.setAttribute("r",h);M.appendChild(k({x:0,y:-q})).setAttribute("transform",
"rotate(0)");M.appendChild(k({x:q,y:0})).setAttribute("transform","rotate(90)");M.appendChild(k({x:0,y:q})).setAttribute("transform","rotate(180)");M.appendChild(k({x:-q,y:0})).setAttribute("transform","rotate(270)");B=M.appendChild(u.svg("circle"));B.setAttribute("fill","none");B.setAttribute("class","fore");B.setAttribute("r",h)}else M=null;if(x!="none"){E=y.appendChild(u.svg("g"));E.setAttribute("class","zoom");B=-0.5;if(x=="big"){I={};var F=D.zoomRange()[0];for(B=0;F<=D.zoomRange()[1];F++,B++)(I[F]=
E.appendChild(r(F))).setAttribute("transform","translate(0,"+-(B+0.75)*h*0.4+")")}F=G=="none"?0.4:2;E.setAttribute("transform","translate(0,"+h*(/^top-/.test(n)?F+(B+0.5)*0.4:-F)+")");E.appendChild(z(+1)).setAttribute("transform","translate(0,"+-(B+0.5)*h*0.4+")");E.appendChild(z(-1)).setAttribute("transform","scale(-1)")}else E=null;o()}var C={},y=u.svg("g"),I={},h=30,q=16,v=0,e=250,w=50,n="top-left",x="small",E,G="small",L,N,M,H,P=u.svg("rect"),D,S,U;y.setAttribute("class","compass");P.setAttribute("class",
"back fore");P.setAttribute("pointer-events","none");P.setAttribute("display","none");C.radius=function(B){if(!arguments.length)return h;h=B;D&&A();return C};C.speed=function(B){if(!arguments.length)return h;q=B;return C};C.position=function(B){if(!arguments.length)return n;n=B;D&&A();return C};C.pan=function(B){if(!arguments.length)return G;G=B;D&&A();return C};C.zoom=function(B){if(!arguments.length)return x;x=B;D&&A();return C};C.map=function(B){if(!arguments.length)return D;if(D){S.removeEventListener("mousedown",
c,false);S.removeChild(y);S=null;U.removeEventListener("mousemove",m,false);U.removeEventListener("mouseup",g,false);U=null;D.off("move",o).off("resize",o)}if(D=B){S=D.container();S.appendChild(y);S.addEventListener("mousedown",c,false);U=S.ownerDocument.defaultView;U.addEventListener("mousemove",m,false);U.addEventListener("mouseup",g,false);D.on("move",o).on("resize",o);A()}return C};return C};u.grid=function(){function f(){var g=m.firstChild,a=c.size(),d=c.pointLocation(Z);c.pointLocation(a);var j=
Math.pow(2,4-Math.round(c.zoom()));d.lat=Math.floor(d.lat/j)*j;d.lon=Math.ceil(d.lon/j)*j;for(var t;(t=c.locationPoint(d).x)<=a.x;d.lon+=j){g||(g=m.appendChild(u.svg("line")));g.setAttribute("x1",t);g.setAttribute("x2",t);g.setAttribute("y1",0);g.setAttribute("y2",a.y);g=g.nextSibling}for(;(t=c.locationPoint(d).y)<=a.y;d.lat-=j){g||(g=m.appendChild(u.svg("line")));g.setAttribute("y1",t);g.setAttribute("y2",t);g.setAttribute("x1",0);g.setAttribute("x2",a.x);g=g.nextSibling}for(;g;){a=g.nextSibling;
m.removeChild(g);g=a}}var i={},c,m=u.svg("g");m.setAttribute("class","grid");i.map=function(g){if(!arguments.length)return c;if(c){m.parentNode.removeChild(m);c.off("move",f).off("resize",f)}if(c=g){c.on("move",f).on("resize",f);c.container().appendChild(m);c.dispatch({type:"move"})}return i};return i};u.stylist=function(){function f(g){var a=g.features.length,d=i.length,j=c.length,t,s,l,k,z,r;for(z=0;z<a;++z)if(s=(t=g.features[z]).element){t=t.data;for(r=0;r<d;++r){k=(l=i[r]).value;if(typeof k===
"function")k=k.call(null,t);k==null?l.name.local?s.removeAttributeNS(l.name.space,l.name.local):s.removeAttribute(l.name):l.name.local?s.setAttributeNS(l.name.space,l.name.local,k):s.setAttribute(l.name,k)}for(r=0;r<j;++r){k=(l=c[r]).value;if(typeof k==="function")k=k.call(null,t);k==null?s.style.removeProperty(l.name):s.style.setProperty(l.name,k,l.priority)}if(k=m){if(typeof k==="function")k=k.call(null,t);for(;s.lastChild;)s.removeChild(s.lastChild);k!=null&&s.appendChild(u.svg("title")).appendChild(document.createTextNode(k))}}}
var i=[],c=[],m;f.attr=function(g,a){i.push({name:ea(g),value:a});return f};f.style=function(g,a,d){c.push({name:g,value:a,priority:arguments.length<3?null:d});return f};f.title=function(g){m=g;return f};return f}})(org.polymaps);
