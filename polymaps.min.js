if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(t){function fa(e){var f=e.indexOf(":");return f<0?e:{space:t.ns[e.substring(0,f)],local:e.substring(f+1)}}function S(){for(var e=0;e<S.maps.length;e++)S.maps[e].resize()}function V(e){return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function W(e){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360))}function Z(e,f){if(e.row>f.row){var c=e;e=f;f=c}return{x0:e.column,y0:e.row,x1:f.column,y1:f.row,dx:f.column-e.column,dy:f.row-e.row}}function ca(e,f,c,k,i){c=Math.max(c,Math.floor(f.y0));
k=Math.min(k,Math.ceil(f.y1));if(e.x0==f.x0&&e.y0==f.y0?e.x0+f.dy/e.dy*e.dx<f.x1:e.x1-f.dy/e.dy*e.dx<f.x0){var a=e;e=f;f=a}a=e.dx/e.dy;var g=f.dx/f.dy,n=e.dx>0,m=f.dx<0;for(c=c;c<k;c++){var s=a*Math.max(0,Math.min(e.dy,c+n-e.y0))+e.x0;i(Math.floor(g*Math.max(0,Math.min(f.dy,c+m-f.y0))+f.x0),Math.ceil(s),c)}}function da(e,f,c,k,i,a){var g=Z(e,f);f=Z(f,c);e=Z(c,e);if(g.dy>f.dy){c=g;g=f;f=c}if(g.dy>e.dy){c=g;g=e;e=c}if(f.dy>e.dy){c=f;f=e;e=c}g.dy&&ca(e,g,k,i,a);f.dy&&ca(e,f,k,i,a)}t.version="2.3.0";
var Y={x:0,y:0};t.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};t.id=function(){var e=0;return function(){return++e}}();t.svg=function(e){return document.createElementNS(t.ns.svg,e)};t.transform=function(e,f,c,k,i,a){var g={},n,m,s;if(!arguments.length){e=1;f=i=c=0;k=1;a=0}g.zoomFraction=function(l){if(!arguments.length)return m;m=l;n=Math.floor(m+Math.log(Math.sqrt(e*e+f*f+c*c+k*k))/Math.log(2));s=Math.pow(2,-n);return g};g.apply=function(l){var j=Math.pow(2,-l.zoom),
u=Math.pow(2,l.zoom-n);return{column:(e*l.column*j+c*l.row*j+i)*u,row:(f*l.column*j+k*l.row*j+a)*u,zoom:l.zoom-n}};g.unapply=function(l){var j=Math.pow(2,-l.zoom),u=Math.pow(2,l.zoom+n);return{column:(l.column*j*k-l.row*j*c-i*k+a*c)/(e*k-f*c)*u,row:(l.column*j*f-l.row*j*e-i*f+a*e)/(c*f-k*e)*u,zoom:l.zoom+n}};g.toString=function(){return"matrix("+[e*s,f*s,c*s,k*s].join(" ")+" 0 0)"};return g.zoomFraction(0)};t.cache=function(e,f){function c(j){l--;f&&f(j);delete g[j.key];if(j.next)j.next.prev=j.prev;
else if(m=j.prev)m.next=null;if(j.prev)j.prev.next=j.next;else if(n=j.next)n.prev=null}function k(){for(var j=m;l>s;j=j.prev){if(!j)break;j.lock||c(j)}}var i={},a={},g={},n=null,m=null,s=64,l=0;i.peek=function(j){return g[[j.zoom,j.column,j.row].join("/")]};i.load=function(j,u){var y=[j.zoom,j.column,j.row].join("/"),A=g[y];if(A){if(A.prev){if(A.prev.next=A.next)A.next.prev=A.prev;else m=A.prev;A.prev=null;A.next=n;n=n.prev=A}A.lock=1;return a[y]=A}A={key:y,column:j.column,row:j.row,zoom:j.zoom,next:n,
prev:null,lock:1};e.call(null,A,u);a[y]=g[y]=A;if(n)n.prev=A;else m=A;n=A;l++;return A};i.unload=function(j){if(!(j in a))return false;var u=a[j];u.lock=0;delete a[j];u.request&&u.request.abort(false)&&c(u);return u};i.locks=function(){return a};i.size=function(j){if(!arguments.length)return s;s=j;k();return i};i.flush=function(){k();return i};i.clear=function(){for(var j in g){var u=g[j];u.request&&u.request.abort(false);f&&f(g[j]);if(u.lock){u.lock=0;u.element.parentNode.removeChild(u.element)}}a=
{};g={};n=m=null;l=0;return i};return i};t.url=function(e){function f(k){var i=k.zoom<0?1:1<<k.zoom,a=k.column%i;if(a<0)a+=i;return e.replace(/{(.)}/g,function(g,n){switch(n){case "S":return c[(Math.abs(k.zoom)+k.row+a)%c.length];case "Z":return k.zoom;case "X":return a;case "Y":return k.row;case "B":var m=t.map.coordinateLocation({row:k.row,column:a,zoom:k.zoom}),s=t.map.coordinateLocation({row:k.row+1,column:a+1,zoom:k.zoom}),l=Math.ceil(Math.log(k.zoom)/Math.LN2);return s.lat.toFixed(l)+","+m.lon.toFixed(l)+
","+m.lat.toFixed(l)+","+s.lon.toFixed(l)}return n})}var c=[];f.template=function(k){if(!arguments.length)return e;e=k;return f};f.hosts=function(k){if(!arguments.length)return c;c=k;return f};return f};t.dispatch=function(e){var f={};e.on=function(c,k){for(var i=f[c]||(f[c]=[]),a=0;a<i.length;a++)if(i[a].handler==k)return e;i.push({handler:k,on:true});return e};e.off=function(c,k){var i=f[c];if(i)for(var a=0;a<i.length;a++){var g=i[a];if(g.handler==k){g.on=false;i.splice(a,1);break}}return e};return function(c){var k=
f[c.type];if(k){k=k.slice();for(var i=0;i<k.length;i++){var a=k[i];a.on&&a.handler.call(e,c)}}}};t.queue=function(){function e(){if(!(i>=a||!k.length)){i++;k.pop()()}}function f(g){for(var n=0;n<k.length;n++)if(k[n]==g){k.splice(n,1);return true}return false}function c(g,n,m){function s(){l=new XMLHttpRequest;m&&l.overrideMimeType(m);l.open("GET",g,true);l.onreadystatechange=function(){if(l.readyState==4){i--;l.status<300&&n(l);e()}};l.send(null)}var l;k.push(s);e();return{abort:function(j){if(f(s))return true;
if(j&&l){l.abort();return true}return false}}}var k=[],i=0,a=6;return{text:function(g,n,m){return c(g,function(s){s.responseText&&n(s.responseText)},m)},xml:function(g,n){return c(g,function(m){m.responseXML&&n(m.responseXML)},"application/xml")},json:function(g,n){return c(g,function(m){m.responseText&&n(JSON.parse(m.responseText))},"application/json")},image:function(g,n,m){function s(){l=document.createElement("img");l.onerror=function(){i--;e()};l.onload=function(){i--;m(l);e()};l.src=n;g.setAttributeNS(t.ns.xlink,
"href",n)}var l;k.push(s);e();return{abort:function(j){if(f(s))return true;if(j&&l){l.src="about:";return true}return false}}}}}();t.map=function(){function e(){if(u)if(s<u[0])s=u[0];else if(s>u[1])s=u[1];l=s-(s=Math.round(s));j=Math.pow(2,l)}function f(){if(o){var d=45/Math.pow(2,s+l-3),r=Math.max(Math.abs(C*g.x+A*g.y),Math.abs(B*g.x+E*g.y)),q=V(K-r*d/n.y);r=V(h+r*d/n.y);m.lat=Math.max(q,Math.min(r,m.lat));q=Math.max(Math.abs(C*g.y+A*g.x),Math.abs(B*g.y+E*g.x));m.lon=Math.max(o[0].lon-q*d/n.x,Math.min(o[1].lon+
q*d/n.x,m.lon))}}var c={},k,i,a=Y,g=Y,n={x:256,y:256},m={lat:37.76487,lon:-122.41948},s=12,l=0,j=1,u=[1,18],y=0,A=1,C=0,E=1,B=0,K=-180,h=180,o=[{lat:V(K),lon:-Infinity},{lat:V(h),lon:Infinity}];c.locationCoordinate=function(d){d=t.map.locationCoordinate(d);var r=Math.pow(2,s);d.column*=r;d.row*=r;d.zoom+=s;return d};c.coordinateLocation=t.map.coordinateLocation;c.coordinatePoint=function(d,r){var q=Math.pow(2,s-r.zoom),z=Math.pow(2,s-d.zoom),v=(r.column*q-d.column*z)*n.x*j;q=(r.row*q-d.row*z)*n.y*
j;return{x:g.x+A*v-C*q,y:g.y+C*v+A*q}};c.pointCoordinate=function(d,r){var q=Math.pow(2,s-d.zoom),z=(r.x-g.x)/j,v=(r.y-g.y)/j;return{column:d.column*q+(E*z-B*v)/n.x,row:d.row*q+(B*z+E*v)/n.y,zoom:s}};c.locationPoint=function(d){var r=Math.pow(2,s+l-3)/45,q=(d.lon-m.lon)*r*n.x;d=(W(m.lat)-W(d.lat))*r*n.y;return{x:g.x+A*q-C*d,y:g.y+C*q+A*d}};c.pointLocation=function(d){var r=45/Math.pow(2,s+l-3),q=(d.x-g.x)*r;d=(d.y-g.y)*r;return{lon:m.lon+(E*q-B*d)/n.x,lat:V(W(m.lat)-(B*q+E*d)/n.y)}};var w=t.svg("rect");
w.setAttribute("visibility","hidden");w.setAttribute("pointer-events","all");c.container=function(d){if(!arguments.length)return k;k=d;k.setAttribute("class","map");k.appendChild(w);return c.resize()};c.focusableParent=function(){for(var d=k;d;d=d.parentNode)if(d.tabIndex>=0)return d;return window};c.mouse=function(d){var r=(k.ownerSVGElement||k).createSVGPoint();if($<0&&(window.scrollX||window.scrollY)){var q=document.body.appendChild(t.svg("svg"));q.style.position="absolute";q.style.top=q.style.left=
"0px";var z=q.getScreenCTM();$=!(z.f||z.e);document.body.removeChild(q)}if($){r.x=d.pageX;r.y=d.pageY}else{r.x=d.clientX;r.y=d.clientY}return r.matrixTransform(k.getScreenCTM().inverse())};c.size=function(d){if(!arguments.length)return a;i=d;return c.resize()};c.resize=function(){if(i){a=i;S.remove(c)}else{w.setAttribute("width","100%");w.setAttribute("height","100%");b=w.getBBox();a={x:b.width,y:b.height};S.add(c)}w.setAttribute("width",a.x);w.setAttribute("height",a.y);g={x:a.x/2,y:a.y/2};f();c.dispatch({type:"resize"});
return c};c.tileSize=function(d){if(!arguments.length)return n;n=d;c.dispatch({type:"move"});return c};c.center=function(d){if(!arguments.length)return m;m=d;f();c.dispatch({type:"move"});return c};c.panBy=function(d){var r=45/Math.pow(2,s+l-3),q=d.x*r;d=d.y*r;return c.center({lon:m.lon+(B*d-E*q)/n.x,lat:V(W(m.lat)+(B*q+E*d)/n.y)})};c.centerRange=function(d){if(!arguments.length)return o;if(o=d){K=o[0].lat>-90?W(o[0].lat):-Infinity;h=o[0].lat<90?W(o[1].lat):Infinity}else{K=-Infinity;h=Infinity}f();
c.dispatch({type:"move"});return c};c.zoom=function(d){if(!arguments.length)return s+l;s=d;e();return c.center(m)};c.zoomBy=function(d,r,q){if(arguments.length<2)return c.zoom(s+l+d);if(arguments.length<3)q=c.pointLocation(r);s=s+l+d;e();var z=c.locationPoint(q);return c.panBy({x:r.x-z.x,y:r.y-z.y})};c.zoomRange=function(d){if(!arguments.length)return u;u=d;return c.zoom(s+l)};c.extent=function(d){if(!arguments.length)return[c.pointLocation({x:0,y:a.y}),c.pointLocation({x:a.x,y:0})];var r=c.locationPoint(d[0]),
q=c.locationPoint(d[1]),z=Math.max((q.x-r.x)/a.x,(r.y-q.y)/a.y);r=c.pointLocation({x:(r.x+q.x)/2,y:(r.y+q.y)/2});s=s+l-Math.log(z)/Math.log(2);e();return c.center(r)};c.angle=function(d){if(!arguments.length)return y;y=d;A=Math.cos(y);C=Math.sin(y);E=Math.cos(-y);B=Math.sin(-y);f();c.dispatch({type:"move"});return c};c.add=function(d){d.map(c);return c};c.remove=function(d){d.map(null);return c};c.dispatch=t.dispatch(c);return c};S.maps=[];S.add=function(e){for(var f=0;f<S.maps.length;f++)if(S.maps[f]==
e)return;S.maps.push(e)};S.remove=function(e){for(var f=0;f<S.maps.length;f++)if(S.maps[f]==e){S.maps.splice(f,1);return}};window.addEventListener("resize",S,false);t.map.locationCoordinate=function(e){var f=1/360;return{column:(e.lon+180)*f,row:(180-W(e.lat))*f,zoom:0}};t.map.coordinateLocation=function(e){var f=45/Math.pow(2,e.zoom-3);return{lon:f*e.column-180,lat:V(180-f*e.row)}};var $=/WebKit/.test(navigator.userAgent)?-1:0;t.layer=function(e,f){function c(B){for(var K=C[0].nextSibling;A<B;A++){u.insertBefore(C[-4],
K);u.insertBefore(C[2],K);u.insertBefore(C[1],K);for(var h=C[-4],o=-4;o<2;)C[o]=C[++o];C[o]=h}}function k(B){for(var K=C[0].nextSibling;A>B;A--){u.insertBefore(C[-1],K);u.insertBefore(C[2],C[-4]);for(var h=C[2],o=2;o>-4;)C[o]=C[--o];C[o]=h}}function i(){function B(O){var H=O.zoom,T=H<0?1:1<<H,U=O.column%T,x=O.row;if(U<0)U+=T;return{locationPoint:function(D){D=t.map.locationCoordinate(D);var G=Math.pow(2,H-D.zoom);return{x:q.x*(G*D.column-U),y:q.y*(G*D.row-x)}}}}function K(O,H,T){var U=I.zoom,x=2-
R,D=4+R;for(O=O;O<H;O++){var G=g.load({column:O,row:T,zoom:U},B);if(!G.ready&&!(G.key in M)){G.proxyRefs={};for(var J,N,P,Q=1;Q<=x;Q++){N=true;for(var X=0,ea=1<<Q;X<=ea;X++)for(var aa=0;aa<=ea;aa++)if((P=g.peek(J={column:(O<<Q)+aa,row:(T<<Q)+X,zoom:U+Q}))&&P.ready){M[P.key]=g.load(J);P.proxyCount++;G.proxyRefs[P.key]=P}else N=false;if(N)break}if(!N)for(Q=1;Q<=D;Q++)if((P=g.peek(J={column:O>>Q,row:T>>Q,zoom:U-Q}))&&P.ready){M[P.key]=g.load(J);P.proxyCount++;G.proxyRefs[P.key]=P;break}}M[G.key]=G}}
var h=a.map(),o=h.zoom(),w=o-(o=Math.round(o)),d=h.size(),r=h.angle(),q=h.tileSize(),z=h.locationCoordinate(h.center());if(A!=o){if(A<o)c(o);else if(A>o)k(o);else A=o;for(var v=-4;v<=2;v++){var L=C[v];L.setAttribute("class","zoom"+(v<0?"":"+")+v+" zoom"+(o+v));L.setAttribute("transform","scale("+Math.pow(2,-v)+")")}}u.setAttribute("transform","translate("+d.x/2+","+d.y/2+")"+(r?"rotate("+r/Math.PI*180+")":"")+(w?"scale("+Math.pow(2,w)+")":"")+(y?y.zoomFraction(w):""));var I=h.pointCoordinate(z,Y);
v=h.pointCoordinate(z,{x:d.x,y:0});o=h.pointCoordinate(z,d);h=h.pointCoordinate(z,{x:0,y:d.y});if(!w&&!r&&!y){z.column=(Math.round(q.x*z.column)+(d.x&1)/2)/q.x;z.row=(Math.round(q.y*z.row)+(d.y&1)/2)/q.y}if(y){I=y.unapply(I);v=y.unapply(v);o=y.unapply(o);h=y.unapply(h);z=y.unapply(z)}var R=s?s(I.zoom)-I.zoom:0;if(R){d=Math.pow(2,R);I.column*=d;I.row*=d;v.column*=d;v.row*=d;o.column*=d;o.row*=d;h.column*=d;h.row*=d;I.zoom=v.zoom=o.zoom=h.zoom+=R}w=g.locks();var M={};for(var F in w)w[F].proxyCount=
0;if(m&&R>-5&&R<3){r=I.zoom<0?1:1<<I.zoom;if(n){da(I,v,o,0,r,K);da(o,h,I,0,r,K)}else{d=Math.floor((I.column+o.column)/2);r=Math.max(0,Math.min(r-1,Math.floor((v.row+h.row)/2)));v=Math.min(4,I.zoom);d=d>>v<<v;r=r>>v<<v;K(d,d+1,r)}}for(F in M){v=M[F];d=Math.pow(2,v.level=v.zoom-z.zoom);v.element.setAttribute("transform","translate("+(v.x=q.x*(v.column-z.column*d))+","+(v.y=q.y*(v.row-z.row*d))+")")}for(F in w)if(!(F in M)){v=g.unload(F);v.element.parentNode.removeChild(v.element);delete v.proxyRefs}for(F in M){v=
M[F];if(v.element.parentNode!=C[v.level]){C[v.level].appendChild(v.element);a.show&&a.show(v)}}g.flush();a.dispatch({type:"move"})}var a={},g=a.cache=t.cache(e,f).size(512),n=true,m=true,s,l,j,u=t.svg("g"),y,A,C={};u.setAttribute("class","layer");for(var E=-4;E<=-1;E++)C[E]=u.appendChild(t.svg("g"));for(E=2;E>=1;E--)C[E]=u.appendChild(t.svg("g"));C[0]=u.appendChild(t.svg("g"));a.map=function(B){if(!arguments.length)return j;if(j){if(j==B){u.parentNode.appendChild(u);return a}j.off("move",i).off("resize",
i);u.parentNode.removeChild(u)}if(j=B){j.container().appendChild(u);a.init&&a.init(u);j.on("move",i).on("resize",i);i()}return a};a.container=function(){return u};a.levels=function(){return C};a.id=function(B){if(!arguments.length)return l;l=B;u.setAttribute("id",B);return a};a.visible=function(B){if(!arguments.length)return m;(m=B)?u.removeAttribute("visibility"):u.setAttribute("visibility","hidden");j&&i();return a};a.transform=function(B){if(!arguments.length)return y;y=B;j&&i();return a};a.zoom=
function(B){if(!arguments.length)return s;s=typeof B=="function"||B==null?B:function(){return B};j&&i();return a};a.tile=function(B){if(!arguments.length)return n;n=B;j&&i();return a};a.reload=function(){g.clear();j&&i();return a};a.dispatch=t.dispatch(a);a.on("load",function(B){if(B.tile.proxyRefs){for(var K in B.tile.proxyRefs){var h=B.tile.proxyRefs[K];--h.proxyCount<=0&&g.unload(K)&&h.element.parentNode.removeChild(h.element)}delete B.tile.proxyRefs}});return a};t.image=function(){var e=t.layer(function(c){var k=
c.element=t.svg("image"),i=e.map().tileSize();k.setAttribute("preserveAspectRatio","none");k.setAttribute("width",i.x);k.setAttribute("height",i.y);if(typeof f=="function"){k.setAttribute("opacity",0);c.request=t.queue.image(k,f(c),function(a){delete c.request;c.ready=true;c.img=a;k.removeAttribute("opacity");e.dispatch({type:"load",tile:c})})}else{c.ready=true;f&&k.setAttributeNS(t.ns.xlink,"href",f);e.dispatch({type:"load",tile:c})}},function(c){c.request&&c.request.abort(true)}),f;e.url=function(c){if(!arguments.length)return f;
f=typeof c=="string"&&/{.}/.test(c)?t.url(c):c;return e.reload()};return e};t.geoJson=function(e){function f(h){var o={lat:0,lon:0};return function(w){o.lat=w[1];o.lon=w[0];var d=h(o);w.x=d.x;w.y=d.y;return d}}function c(h,o){return h&&h.type in C&&C[h.type](h,o)}function k(h,o,w){return h.type in E&&E[h.type](h,o,w)}function i(){var h=a.map().zoom(),o=a.cache.locks(),w,d,r,q,z,v,L;if(y=="fixed")for(w in o){if((d=o[w]).scale!=h){L="scale("+Math.pow(2,d.zoom-h)+")";q=-1;for(z=(r=d.features).length;++q<
z;)k((v=r[q]).data.geometry,v.element,L);d.scale=h}}else for(w in o){q=-1;for(z=(r=(d=o[w]).features).length;++q<z;)k((v=r[q]).data.geometry,v.element,"");delete d.scale}}var a=t.layer(function(h,o){function w(r){var q=[];if(r.next)h.request=e(r.next.href,w);switch(r.type){case "FeatureCollection":for(var z=0;z<r.features.length;z++){var v=r.features[z],L=c(v.geometry,o);L&&q.push({element:d.appendChild(L),data:v})}break;case "Feature":(L=c(r.geometry,o))&&q.push({element:d.appendChild(L),data:r});
break;default:(L=c(r,o))&&q.push({element:d.appendChild(L),data:{type:"Feature",geometry:r}});break}h.ready=true;q.push.apply(h.features,q);a.dispatch({type:"load",tile:h,features:q})}var d=h.element=t.svg("g");h.features=[];o=f(o(h).locationPoint);if(n!=null)h.request=e(typeof n=="function"?n(h):n,w);else w({type:"FeatureCollection",features:A||[]})},function(h){h.request&&h.request.abort(true)}),g=a.container(),n,m=true,s="org.polymaps."+t.id(),l="url(#"+s+")",j=g.insertBefore(t.svg("clipPath"),
g.firstChild),u=j.appendChild(t.svg("rect")),y="auto",A;g.setAttribute("fill-rule","evenodd");j.setAttribute("id",s);if(!arguments.length)e=t.queue.json;var C={Point:function(h,o){var w=o(h.coordinates),d=t.svg("circle");d.setAttribute("r",4.5);d.setAttribute("transform","translate("+w.x+","+w.y+")");return d},MultiPoint:function(h,o){for(var w=t.svg("g"),d=h.coordinates,r,q,z=-1,v=d.length;++z<v;){q=w.appendChild(t.svg("circle"));q.setAttribute("r",4.5);q.setAttribute("transform","translate("+(r=
o(d[z])).x+","+r.y+")")}return w},LineString:function(h,o){for(var w=t.svg("path"),d=["M"],r=h.coordinates,q,z=-1,v=r.length;++z<v;)d.push((q=o(r[z])).x,",",q.y,"L");d.pop();if(d.length){w.setAttribute("d",d.join(""));return w}},MultiLineString:function(h,o){for(var w=t.svg("path"),d=[],r=h.coordinates,q,z=-1,v,L=r.length,I;++z<L;){q=r[z];v=-1;I=q.length;for(d.push("M");++v<I;)d.push((p=o(q[v])).x,",",p.y,"L");d.pop()}if(d.length){w.setAttribute("d",d.join(""));return w}},Polygon:function(h,o){for(var w=
t.svg("path"),d=[],r=h.coordinates,q,z=-1,v,L=r.length,I;++z<L;){q=r[z];v=-1;I=q.length-1;for(d.push("M");++v<I;)d.push((p=o(q[v])).x,",",p.y,"L");d[d.length-1]="Z"}if(d.length){w.setAttribute("d",d.join(""));return w}},MultiPolygon:function(h,o){for(var w=t.svg("path"),d=[],r=h.coordinates,q,z,v=-1,L,I,R=r.length,M,F;++v<R;){q=r[v];L=-1;for(M=q.length;++L<M;){z=q[L];I=-1;F=z.length-1;for(d.push("M");++I<F;)d.push((p=o(z[I])).x,",",p.y,"L");d[d.length-1]="Z"}}if(d.length){w.setAttribute("d",d.join(""));
return w}},GeometryCollection:function(h,o){for(var w=t.svg("g"),d=-1,r=h.geometries,q=r.length,z;++d<q;)(z=c(r[d],o))&&w.appendChild(z);return w}},E={Point:function(h,o,w){h=h.coordinates;o.setAttribute("transform","translate("+h.x+","+h.y+")"+w)},MultiPoint:function(h,o,w){h=h.coordinates;var d=-1,r=q.length;o=o.firstChild;for(var q;++d<r;){q=h[d];o.setAttribute("transform","translate("+q.x+","+q.y+")"+w);o=o.nextSibling}}};a.url=function(h){if(!arguments.length)return n;n=typeof h=="string"&&/{.}/.test(h)?
t.url(h):h;if(n!=null)A=null;typeof n=="string"&&a.tile(false);return a.reload()};a.features=function(h){if(!arguments.length)return A;if(A=h){n=null;a.tile(false)}return a.reload()};a.clip=function(h){if(!arguments.length)return m;m&&g.removeChild(j);if(m=h)g.insertBefore(j,g.firstChild);var o=a.cache.locks();for(var w in o)m?o[w].element.setAttribute("clip-path",l):o[w].element.removeAttribute("clip-path");return a};var B=a.tile;a.tile=function(h){arguments.length&&!h&&a.clip(h);return B.apply(a,
arguments)};var K=a.map;a.map=function(h){if(h&&u){var o=h.tileSize();u.setAttribute("width",o.x);u.setAttribute("height",o.y)}return K.apply(a,arguments)};a.scale=function(h){if(!arguments.length)return y;(y=h)?a.on("move",i):a.off("move",i);a.map()&&i();return a};a.show=function(h){m?h.element.setAttribute("clip-path",l):h.element.removeAttribute("clip-path");a.dispatch({type:"show",tile:h,features:h.features});return a};a.reshow=function(){var h=a.cache.locks();for(var o in h)a.show(h[o]);return a};
return a};t.dblclick=function(){function e(a){var g=k.zoom();g=a.shiftKey?Math.ceil(g)-g-1:1-g+Math.floor(g);c==="mouse"?k.zoomBy(g,k.mouse(a)):k.zoomBy(g)}var f={},c="mouse",k,i;f.zoom=function(a){if(!arguments.length)return c;c=a;return f};f.map=function(a){if(!arguments.length)return k;if(k){i.removeEventListener("dblclick",e,false);i=null}if(k=a){i=k.container();i.addEventListener("dblclick",e,false)}return f};return f};t.drag=function(){function e(g){if(!g.shiftKey){a={x:g.clientX,y:g.clientY};
k.focusableParent().focus();g.preventDefault();document.body.style.setProperty("cursor","move",null)}}function f(g){if(a){k.panBy({x:g.clientX-a.x,y:g.clientY-a.y});a.x=g.clientX;a.y=g.clientY}}var c={},k,i,a;c.map=function(g){if(!arguments.length)return k;if(k){i.removeEventListener("mousedown",e,false);i=null}if(k=g){i=k.container();i.addEventListener("mousedown",e,false)}return c};window.addEventListener("mousemove",f,false);window.addEventListener("mouseup",function(g){if(a){f(g);a=null;document.body.style.removeProperty("cursor")}},
false);return c};t.wheel=function(){function e(){n=null}function f(l){var j=(l.wheelDelta/120||-l.detail)*0.1,u;if(ba<0){u=Date.now();var y=u-i;if(y>9&&Math.abs(l.wheelDelta)/y>=50)ba=1;i=u}if(ba==1)j*=0.03;if(!a&&j){u=Date.now();if(u-k>200){j=j>0?+1:-1;k=u}else j=0}if(j)switch(g){case "mouse":u=m.mouse(l);n||(n=m.pointLocation(u));m.off("move",e).zoomBy(j,u,n).on("move",e);break;case "location":m.zoomBy(j,m.locationPoint(n),n);break;default:m.zoomBy(j);break}l.preventDefault();return false}var c=
{},k=0,i=0,a=true,g="mouse",n,m,s;c.smooth=function(l){if(!arguments.length)return a;a=l;return c};c.zoom=function(l,j){if(!arguments.length)return g;g=l;n=j;if(m)g=="mouse"?m.on("move",e):m.off("move",e);return c};c.map=function(l){if(!arguments.length)return m;if(m){s.removeEventListener("mousemove",e,false);s.removeEventListener("mousewheel",f,false);s.removeEventListener("DOMMouseScroll",f,false);s=null;m.off("move",e)}if(m=l){g=="mouse"&&m.on("move",e);s=m.container();s.addEventListener("mousemove",
e,false);s.addEventListener("mousewheel",f,false);s.addEventListener("DOMMouseScroll",f,false)}return c};return c};var ba=/WebKit\/533/.test(navigator.userAgent)?-1:0;t.arrow=function(){function e(y){if(!(y.ctrlKey||y.altKey||y.metaKey)){var A=Date.now(),C=0,E=0;switch(y.keyCode){case 37:if(!a.left){g=A;a.left=1;a.right||(C=l)}break;case 39:if(!a.right){g=A;a.right=1;a.left||(C=-l)}break;case 38:if(!a.up){g=A;a.up=1;a.down||(E=l)}break;case 40:if(!a.down){g=A;a.down=1;a.up||(E=-l)}break;default:return}if(C||
E)j.panBy({x:C,y:E});if(!n&&a.left|a.right|a.up|a.down)n=setInterval(k,s);y.preventDefault()}}function f(y){g=Date.now();switch(y.keyCode){case 37:a.left=0;break;case 39:a.right=0;break;case 38:a.up=0;break;case 40:a.down=0;break;default:return}if(n&&!(a.left|a.right|a.up|a.down))n=clearInterval(n);y.preventDefault()}function c(y){switch(y.charCode){case 45:case 95:j.zoom(Math.ceil(j.zoom())-1);break;case 43:case 61:j.zoom(Math.floor(j.zoom())+1);break;default:return}y.preventDefault()}function k(){if(j)if(!(Date.now()<
g+m)){var y=(a.left-a.right)*l,A=(a.up-a.down)*l;if(y||A)j.panBy({x:y,y:A})}}var i={},a={left:0,right:0,up:0,down:0},g=0,n,m=250,s=50,l=16,j,u;i.map=function(y){if(!arguments.length)return j;if(j){u.removeEventListener("keypress",c,false);u.removeEventListener("keydown",e,false);u.removeEventListener("keyup",f,false);u=null}if(j=y){u=j.focusableParent();u.addEventListener("keypress",c,false);u.addEventListener("keydown",e,false);u.addEventListener("keyup",f,false)}return i};i.speed=function(y){if(!arguments.length)return l;
l=y;return i};return i};t.hash=function(){function e(){var m=n(a);if(k!==m)location.replace(k=m)}function f(){if(location.hash!==k){var m=g((k=location.hash).substring(1));if(m.length<3||m.some(isNaN))e();else{var s=a.size();a.zoomBy(m[0]-a.zoom(),{x:s.x/2,y:s.y/2},{lat:Math.min(i,Math.max(-i,m[1])),lon:m[2]})}}}var c={},k,i=89.99999999,a,g=function(m){return m.split("/").map(Number)},n=function(m){var s=m.center();m=m.zoom();var l=Math.max(0,Math.ceil(Math.log(m)/Math.LN2));return"#"+m.toFixed(2)+
"/"+s.lat.toFixed(l)+"/"+s.lon.toFixed(l)};c.map=function(m){if(!arguments.length)return a;if(a){a.off("move",e);window.removeEventListener("hashchange",f,false)}if(a=m){a.on("move",e);window.addEventListener("hashchange",f,false);location.hash?f():e()}return c};c.parse=function(m){if(!arguments.length)return g;g=m;return c};c.format=function(m){if(!arguments.length)return n;n=m;return c};return c};t.interact=function(){var e={},f=t.drag(),c=t.wheel(),k=t.dblclick(),i=t.arrow();e.map=function(a){f.map(a);
c.map(a);k.map(a);i.map(a);return e};return e};t.compass=function(){function e(x){B.setAttribute("class","compass active");I||(I=setInterval(f,r));R&&H.panBy(R);w=Date.now();return l(x)}function f(){R&&Date.now()>w+d&&H.panBy(R)}function c(x){if(x.shiftKey){F={x0:H.mouse(x)};H.focusableParent().focus();return l(x)}}function k(x){if(F){F.x1=H.mouse(x);O.setAttribute("x",Math.min(F.x0.x,F.x1.x));O.setAttribute("y",Math.min(F.x0.y,F.x1.y));O.setAttribute("width",Math.abs(F.x0.x-F.x1.x));O.setAttribute("height",
Math.abs(F.x0.y-F.x1.y));O.removeAttribute("display")}}function i(){B.setAttribute("class","compass");if(F){if(F.x1){H.extent([H.pointLocation({x:Math.min(F.x0.x,F.x1.x),y:Math.max(F.x0.y,F.x1.y)}),H.pointLocation({x:Math.max(F.x0.x,F.x1.x),y:Math.min(F.x0.y,F.x1.y)})]);O.setAttribute("display","none")}F=null}if(I){clearInterval(I);I=0}}function a(x){return function(){x?this.setAttribute("class","active"):this.removeAttribute("class");R=x}}function g(x){return function(D){B.setAttribute("class","compass active");
var G=H.zoom();H.zoom(x<0?Math.ceil(G)-1:Math.floor(G)+1);return l(D)}}function n(x){return function(D){H.zoom(x);return l(D)}}function m(){this.setAttribute("class","active")}function s(){this.removeAttribute("class")}function l(x){x.stopPropagation();x.preventDefault();return false}function j(x){var D=Math.SQRT1_2*h,G=h*0.7,J=h*0.2,N=t.svg("g"),P=N.appendChild(t.svg("path")),Q=N.appendChild(t.svg("path"));P.setAttribute("class","direction");P.setAttribute("pointer-events","all");P.setAttribute("d",
"M0,0L"+D+","+D+"A"+h+","+h+" 0 0,1 "+-D+","+D+"Z");Q.setAttribute("class","chevron");Q.setAttribute("d","M"+J+","+(G-J)+"L0,"+G+" "+-J+","+(G-J));Q.setAttribute("pointer-events","none");N.addEventListener("mousedown",e,false);N.addEventListener("mouseover",a(x),false);N.addEventListener("mouseout",a(null),false);N.addEventListener("dblclick",l,false);return N}function u(x){var D=h*0.4,G=D/2,J=t.svg("g"),N=J.appendChild(t.svg("path")),P=J.appendChild(t.svg("path")),Q=J.appendChild(t.svg("path")),
X=J.appendChild(t.svg("path"));N.setAttribute("class","back");N.setAttribute("d","M"+-D+",0V"+-D+"A"+D+","+D+" 0 1,1 "+D+","+-D+"V0Z");P.setAttribute("class","direction");P.setAttribute("d",N.getAttribute("d"));Q.setAttribute("class","chevron");Q.setAttribute("d","M"+-G+","+-D+"H"+G+(x>0?"M0,"+(-D-G)+"V"+-G:""));X.setAttribute("class","fore");X.setAttribute("fill","none");X.setAttribute("d",N.getAttribute("d"));J.addEventListener("mousedown",g(x),false);J.addEventListener("mouseover",m,false);J.addEventListener("mouseout",
s,false);J.addEventListener("dblclick",l,false);return J}function y(x){var D=h*0.2,G=h*0.4,J=t.svg("g"),N=J.appendChild(t.svg("rect")),P=J.appendChild(t.svg("path"));N.setAttribute("pointer-events","all");N.setAttribute("fill","none");N.setAttribute("x",-G);N.setAttribute("y",-0.75*G);N.setAttribute("width",2*G);N.setAttribute("height",1.5*G);P.setAttribute("class","chevron");P.setAttribute("d","M"+-D+",0H"+D);J.addEventListener("mousedown",n(x),false);J.addEventListener("dblclick",l,false);return J}
function A(){var x=h+6,D=x,G=H.size();switch(q){case "top-left":break;case "top-right":x=G.x-x;break;case "bottom-left":D=G.y-D;break;case "bottom-right":x=G.x-x;D=G.y-D;break}x="translate("+x+","+D+")";M&&M.setAttribute("transform",x);v&&v.setAttribute("transform",x);for(var J in K)J==H.zoom()?K[J].setAttribute("class","active"):K[J].removeAttribute("class")}function C(){for(;B.lastChild;)B.removeChild(B.lastChild);B.appendChild(O);if(L!="none"){M=B.appendChild(t.svg("g"));M.setAttribute("class",
"pan");var x=M.appendChild(t.svg("circle"));x.setAttribute("class","back");x.setAttribute("r",h);M.appendChild(j({x:0,y:-o})).setAttribute("transform","rotate(0)");M.appendChild(j({x:o,y:0})).setAttribute("transform","rotate(90)");M.appendChild(j({x:0,y:o})).setAttribute("transform","rotate(180)");M.appendChild(j({x:-o,y:0})).setAttribute("transform","rotate(270)");x=M.appendChild(t.svg("circle"));x.setAttribute("fill","none");x.setAttribute("class","fore");x.setAttribute("r",h)}else M=null;if(z!=
"none"){v=B.appendChild(t.svg("g"));v.setAttribute("class","zoom");x=-0.5;if(z=="big"){K={};var D=H.zoomRange()[0];for(x=0;D<=H.zoomRange()[1];D++,x++)(K[D]=v.appendChild(y(D))).setAttribute("transform","translate(0,"+-(x+0.75)*h*0.4+")")}D=L=="none"?0.4:2;v.setAttribute("transform","translate(0,"+h*(/^top-/.test(q)?D+(x+0.5)*0.4:-D)+")");v.appendChild(u(+1)).setAttribute("transform","translate(0,"+-(x+0.5)*h*0.4+")");v.appendChild(u(-1)).setAttribute("transform","scale(-1)")}else v=null;A()}var E=
{},B=t.svg("g"),K={},h=30,o=16,w=0,d=250,r=50,q="top-left",z="small",v,L="small",I,R,M,F,O=t.svg("rect"),H,T,U;B.setAttribute("class","compass");O.setAttribute("class","back fore");O.setAttribute("pointer-events","none");O.setAttribute("display","none");E.radius=function(x){if(!arguments.length)return h;h=x;H&&C();return E};E.speed=function(x){if(!arguments.length)return h;o=x;return E};E.position=function(x){if(!arguments.length)return q;q=x;H&&C();return E};E.pan=function(x){if(!arguments.length)return L;
L=x;H&&C();return E};E.zoom=function(x){if(!arguments.length)return z;z=x;H&&C();return E};E.map=function(x){if(!arguments.length)return H;if(H){T.removeEventListener("mousedown",c,false);T.removeChild(B);T=null;U.removeEventListener("mousemove",k,false);U.removeEventListener("mouseup",i,false);U=null;H.off("move",A).off("resize",A)}if(H=x){T=H.container();T.appendChild(B);T.addEventListener("mousedown",c,false);U=T.ownerDocument.defaultView;U.addEventListener("mousemove",k,false);U.addEventListener("mouseup",
i,false);H.on("move",A).on("resize",A);C()}return E};return E};t.grid=function(){function e(){var i=k.firstChild,a=c.size(),g=c.pointLocation(Y);c.pointLocation(a);var n=Math.pow(2,4-Math.round(c.zoom()));g.lat=Math.floor(g.lat/n)*n;g.lon=Math.ceil(g.lon/n)*n;for(var m;(m=c.locationPoint(g).x)<=a.x;g.lon+=n){i||(i=k.appendChild(t.svg("line")));i.setAttribute("x1",m);i.setAttribute("x2",m);i.setAttribute("y1",0);i.setAttribute("y2",a.y);i=i.nextSibling}for(;(m=c.locationPoint(g).y)<=a.y;g.lat-=n){i||
(i=k.appendChild(t.svg("line")));i.setAttribute("y1",m);i.setAttribute("y2",m);i.setAttribute("x1",0);i.setAttribute("x2",a.x);i=i.nextSibling}for(;i;){a=i.nextSibling;k.removeChild(i);i=a}}var f={},c,k=t.svg("g");k.setAttribute("class","grid");f.map=function(i){if(!arguments.length)return c;if(c){k.parentNode.removeChild(k);c.off("move",e).off("resize",e)}if(c=i){c.on("move",e).on("resize",e);c.container().appendChild(k);c.dispatch({type:"move"})}return f};return f};t.stylist=function(){function e(i){var a=
i.features.length,g=f.length,n=c.length,m,s,l,j,u,y;for(u=0;u<a;++u)if(s=(m=i.features[u]).element){m=m.data;for(y=0;y<g;++y){j=(l=f[y]).value;if(typeof j==="function")j=j.call(null,m);j==null?l.name.local?s.removeAttributeNS(l.name.space,l.name.local):s.removeAttribute(l.name):l.name.local?s.setAttributeNS(l.name.space,l.name.local,j):s.setAttribute(l.name,j)}for(y=0;y<n;++y){j=(l=c[y]).value;if(typeof j==="function")j=j.call(null,m);j==null?s.style.removeProperty(l.name):s.style.setProperty(l.name,
j,l.priority)}if(j=k){if(typeof j==="function")j=j.call(null,m);for(;s.lastChild;)s.removeChild(s.lastChild);j!=null&&s.appendChild(t.svg("title")).appendChild(document.createTextNode(j))}}}var f=[],c=[],k;e.attr=function(i,a){f.push({name:fa(i),value:a});return e};e.style=function(i,a,g){c.push({name:i,value:a,priority:arguments.length<3?null:g});return e};e.title=function(i){k=i;return e};return e}})(org.polymaps);
