if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(r){function J(){for(var g=0;g<J.maps.length;g++)J.maps[g].resize()}function P(g){return 360/Math.PI*Math.atan(Math.exp(g*Math.PI/180))-90}function Q(g){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+g*Math.PI/360))}function U(g,a){if(g.row>a.row){var e=g;g=a;a=e}return{x0:g.column,y0:g.row,x1:a.column,y1:a.row,dx:a.column-g.column,dy:a.row-g.row}}function Z(g,a,e,d,c){e=Math.max(e,Math.floor(a.y0));d=Math.min(d,Math.ceil(a.y1));if(g.x0<a.x0||g.x1<a.x1){var f=g;g=a;a=f}f=g.dx/g.dy;var i=
a.dx/a.dy,l=g.dx>0,o=a.dx<0;for(e=e;e<d;e++){var u=f*Math.max(0,Math.min(g.dy,e+l-g.y0))+g.x0;c(Math.floor(i*Math.max(0,Math.min(a.dy,e+o-a.y0))+a.x0),Math.ceil(u),e)}}function $(g,a,e,d,c,f){var i=U(g,a);a=U(a,e);g=U(e,g);if(i.dy>a.dy){e=i;i=a;a=e}if(i.dy>g.dy){e=i;i=g;g=e}if(a.dy>g.dy){e=a;a=g;g=e}i.dy&&Z(g,i,d,c,f);a.dy&&Z(g,a,d,c,f)}r.version="2.0.2+1";var R={x:0,y:0};r.id=function(){var g=0;return function(){return++g}}();r.svg=function(g){return document.createElementNS(r.ns.svg,g)};r.ns={svg:"http://www.w3.org/2000/svg",
xlink:"http://www.w3.org/1999/xlink"};r.transform=function(g,a,e,d,c,f){var i={},l,o,u;if(!arguments.length){g=1;a=c=e=0;d=1;f=0}i.zoomFraction=function(n){if(!arguments.length)return o;o=n;l=Math.floor(o+Math.log(Math.sqrt(g*g+a*a+e*e+d*d))/Math.log(2));u=Math.pow(2,-l);return i};i.apply=function(n){var m=Math.pow(2,-n.zoom),h=Math.pow(2,n.zoom-l);return{column:(g*n.column*m+e*n.row*m+c)*h,row:(a*n.column*m+d*n.row*m+f)*h,zoom:n.zoom-l}};i.unapply=function(n){var m=Math.pow(2,-n.zoom),h=Math.pow(2,
n.zoom+l);return{column:(n.column*m*d-n.row*m*e-c*d+f*e)/(g*d-a*e)*h,row:(n.column*m*a-n.row*m*g-c*a+f*g)/(e*a-d*g)*h,zoom:n.zoom+l}};i.toString=function(){return"matrix("+[g*u,a*u,e*u,d*u].join(" ")+" 0 0)"};return i.zoomFraction(0)};r.cache=function(g,a){function e(m){n--;a&&a(m);delete i[m.key];if(m.next)m.next.prev=m.prev;else if(o=m.prev)o.next=null;if(m.prev)m.prev.next=m.next;else if(l=m.next)l.prev=null}function d(){for(var m=o;n>u;m=m.prev){if(!m)break;m.lock||e(m)}}var c={},f={},i={},l=
null,o=null,u=64,n=0;c.peek=function(m){return i[[m.zoom,m.column,m.row].join("/")]};c.load=function(m,h){var q=[m.zoom,m.column,m.row].join("/"),s=i[q];if(s){if(s.prev){if(s.prev.next=s.next)s.next.prev=s.prev;else o=s.prev;s.prev=null;s.next=l;l=l.prev=s}s.lock=1;return f[q]=s}s={key:q,column:m.column,row:m.row,zoom:m.zoom,next:l,prev:null,lock:1};g.call(null,s,h);f[q]=i[q]=s;if(l)l.prev=s;else o=s;l=s;n++;d();return s};c.unload=function(m){if(!(m in f))return false;var h=f[m];h.lock=0;delete f[m];
h.request&&h.request.abort(false)?e(h):d();return h};c.locks=function(){return f};c.size=function(m){if(!arguments.length)return u;u=m;d();return c};return c};r.url=function(g){function a(d){var c=1<<d.zoom,f=d.column%c;if(f<0)f+=c;return g.replace(/{(.)}/g,function(i,l){switch(l){case "S":return e[(d.zoom+d.row+f)%e.length];case "Z":return d.zoom;case "X":return f;case "Y":return d.row;case "B":var o=r.map.coordinateLocation({row:d.row,column:f,zoom:d.zoom}),u=r.map.coordinateLocation({row:d.row+
1,column:f+1,zoom:d.zoom}),n=Math.ceil(Math.log(d.zoom)/Math.LN2);return u.lat.toFixed(n)+","+o.lon.toFixed(n)+","+o.lat.toFixed(n)+","+u.lon.toFixed(n)}return l})}var e=[];a.template=function(d){if(!arguments.length)return g;g=d;return a};a.hosts=function(d){if(!arguments.length)return e;e=d;return a};return a};r.dispatch=function(g){var a={};g.on=function(e,d){for(var c=a[e]||(a[e]=[]),f=0;f<c.length;f++)if(c[f].handler==d)return g;c.push({handler:d,on:true});return g};g.off=function(e,d){var c=
a[e];if(c)for(var f=0;f<c.length;f++){var i=c[f];if(i.handler==d){i.on=false;c.splice(f,1);break}}return g};return function(e){var d=a[e.type];if(d){d=d.slice();for(var c=0;c<d.length;c++){var f=d[c];f.on&&f.handler.call(g,e)}}}};r.queue=function(){function g(){if(!(c>=f||!d.length)){c++;d.pop()()}}function a(i){for(var l=0;l<d.length;l++)if(d[l]==i){d.splice(l,1);return true}return false}function e(i,l,o){function u(){n=new XMLHttpRequest;o&&n.overrideMimeType(o);n.open("GET",i,true);n.onreadystatechange=
function(){if(n.readyState==4){c--;n.status<300&&l(n);g()}};n.send(null)}var n;d.push(u);g();return{abort:function(m){if(a(u))return true;if(m&&n){n.abort();return true}return false}}}var d=[],c=0,f=6;return{text:function(i,l,o){return e(i,function(u){u.responseText&&l(u.responseText)},o)},xml:function(i,l){return e(i,function(o){o.responseXML&&l(o.responseXML)},"application/xml")},json:function(i,l){return e(i,function(o){o.responseText&&l(JSON.parse(o.responseText))},"application/json")},image:function(i,
l,o){function u(){n=document.createElement("img");n.onerror=function(){c--;g()};n.onload=function(){c--;o(n);g()};n.src=l;i.setAttributeNS(r.ns.xlink,"href",l)}var n;d.push(u);g();return{abort:function(m){if(a(u))return true;if(m&&n){n.src="about:";return true}return false}}}}}();r.map=function(){function g(){if(G){var j=45/Math.pow(2,o+u-3),t=Math.max(Math.abs(s*f.x+q*f.y),Math.abs(x*f.x+k*f.y)),w=P(B-t*j/i.y);t=P(H+t*j/i.y);l.lat=Math.max(w,Math.min(t,l.lat));w=Math.max(Math.abs(s*f.y+q*f.x),Math.abs(x*
f.y+k*f.x));l.lon=Math.max(G[0].lon-w*j/i.x,Math.min(G[1].lon+w*j/i.x,l.lon))}}var a={},e,d,c=R,f=R,i={x:256,y:256},l={lat:37.76487,lon:-122.41948},o=12,u=0,n=1,m=[1,18],h=0,q=1,s=0,k=1,x=0,B=-180,H=180,G=[{lat:P(B),lon:-Infinity},{lat:P(H),lon:Infinity}];a.locationCoordinate=function(j){j=r.map.locationCoordinate(j);var t=Math.pow(2,o);j.column*=t;j.row*=t;j.zoom+=o;return j};a.coordinateLocation=r.map.coordinateLocation;a.coordinatePoint=function(j,t){var w=Math.pow(2,o-t.zoom),C=Math.pow(2,o-j.zoom),
E=(t.column*w-j.column*C)*i.x*n;w=(t.row*w-j.row*C)*i.y*n;return{x:f.x+q*E-s*w,y:f.y+s*E+q*w}};a.pointCoordinate=function(j,t){var w=Math.pow(2,o-j.zoom),C=(t.x-f.x)/n,E=(t.y-f.y)/n;return{column:j.column*w+(k*C-x*E)/i.x,row:j.row*w+(x*C+k*E)/i.y,zoom:o}};a.locationPoint=function(j){var t=Math.pow(2,o+u-3)/45,w=(j.lon-l.lon)*t*i.x;j=(Q(l.lat)-Q(j.lat))*t*i.y;return{x:f.x+q*w-s*j,y:f.y+s*w+q*j}};a.pointLocation=function(j){var t=45/Math.pow(2,o+u-3),w=(j.x-f.x)*t;j=(j.y-f.y)*t;return{lon:l.lon+(k*
w-x*j)/i.x,lat:P(Q(l.lat)-(x*w+k*j)/i.y)}};var D=r.svg("rect");D.setAttribute("visibility","hidden");D.setAttribute("pointer-events","all");a.container=function(j){if(!arguments.length)return e;e=j;e.setAttribute("class","map");e.appendChild(D);return a.resize()};a.focusableParent=function(){for(var j=e;j;j=j.parentNode)if(j.tabIndex>=0)return j;return window};a.mouse=function(j){var t=(e.ownerSVGElement||e).createSVGPoint();if(V<0&&(window.scrollX||window.scrollY)){var w=document.body.appendChild(r.svg("svg"));
w.style.position="absolute";w.style.top=w.style.left="0px";var C=w.getScreenCTM();V=!(C.f||C.e);document.body.removeChild(w)}if(V){t.x=j.pageX;t.y=j.pageY}else{t.x=j.clientX;t.y=j.clientY}return t.matrixTransform(e.getScreenCTM().inverse())};a.size=function(j){if(!arguments.length)return c;d=j;return a.resize()};a.resize=function(){if(d){c=d;J.remove(a)}else{var j=e.ownerSVGElement||e;if(j.offsetWidth==null){D.setAttribute("width","100%");D.setAttribute("height","100%");j=D}b=j.getBoundingClientRect();
c={x:b.width,y:b.height};J.add(a)}D.setAttribute("width",c.x);D.setAttribute("height",c.y);f={x:c.x/2,y:c.y/2};g();a.dispatch({type:"resize"});return a};a.tileSize=function(j){if(!arguments.length)return i;i=j;a.dispatch({type:"move"});return a};a.center=function(j){if(!arguments.length)return l;l=j;g();a.dispatch({type:"move"});return a};a.panBy=function(j){var t=45/Math.pow(2,o+u-3),w=j.x*t;j=j.y*t;return a.center({lon:l.lon+(x*j-k*w)/i.x,lat:P(Q(l.lat)+(x*w+k*j)/i.y)})};a.centerRange=function(j){if(!arguments.length)return G;
if(G=j){B=G[0].lat>-90?Q(G[0].lat):-Infinity;H=G[0].lat<90?Q(G[1].lat):Infinity}else{B=-Infinity;H=Infinity}g();a.dispatch({type:"move"});return a};a.zoom=function(j){if(!arguments.length)return o+u;o=Math.max(m[0],Math.min(m[1],j));u=o-(o=Math.round(o));n=Math.pow(2,u);return a.center(l)};a.zoomBy=function(j,t,w){if(arguments.length<2)return a.zoom(o+u+j);if(arguments.length<3)w=a.pointLocation(t);o=Math.max(m[0],Math.min(m[1],o+u+j));u=o-(o=Math.round(o));n=Math.pow(2,u);var C=a.locationPoint(w);
return a.panBy({x:t.x-C.x,y:t.y-C.y})};a.zoomRange=function(j){if(!arguments.length)return m;m=j;return a.zoom(o+u)};a.angle=function(j){if(!arguments.length)return h;h=j;q=Math.cos(h);s=Math.sin(h);k=Math.cos(-h);x=Math.sin(-h);g();a.dispatch({type:"move"});return a};a.add=function(j){j.map(a);return a};a.remove=function(j){j.map(null);return a};a.dispatch=r.dispatch(a);return a};J.maps=[];J.add=function(g){for(var a=0;a<J.maps.length;a++)if(J.maps[a]==g)return;J.maps.push(g)};J.remove=function(g){for(var a=
0;a<J.maps.length;a++)if(J.maps[a]==g){J.maps.splice(a,1);return}};window.addEventListener("resize",J,false);r.map.locationCoordinate=function(g){var a=1/360;return{column:(g.lon+180)*a,row:(180-Q(g.lat))*a,zoom:0}};r.map.coordinateLocation=function(g){var a=45/Math.pow(2,g.zoom-3);return{lon:a*g.column-180,lat:P(180-a*g.row)}};var V=/WebKit/.test(navigator.userAgent)?-1:0;r.layer=function(g,a){function e(){function q(z){var A=z.zoom,F=1<<A,I=z.column%F,N=z.row;if(I<0)I+=F;return{locationPoint:function(M){M=
r.map.locationCoordinate(M);var O=Math.pow(2,A-M.zoom);return{x:D.x*(O*M.column-I),y:D.y*(O*M.row-N)}}}}function s(z,A,F){var I=w.zoom,N=2-E,M=4+E;for(z=z;z<A;z++){var O=c.load({column:z,row:F,zoom:I},q);if(!O.ready&&!(O.key in y)){O.proxyRefs={};for(var S,T,K,L=1;L<=N;L++){T=true;for(var W=0,aa=1<<L;W<=aa;W++)for(var X=0;X<=aa;X++)if((K=c.peek(S={column:(z<<L)+X,row:(F<<L)+W,zoom:I+L}))&&K.ready){y[K.key]=c.load(S);K.proxyCount++;O.proxyRefs[K.key]=K}else T=false;if(T)break}if(!T)for(L=1;L<=M;L++)if((K=
c.peek(S={column:z>>L,row:F>>L,zoom:I-L}))&&K.ready){y[K.key]=c.load(S);K.proxyCount++;O.proxyRefs[K.key]=K;break}}y[O.key]=O}}var k=d.map(),x=k.zoom(),B=x-(x=Math.round(x)),H=k.size(),G=k.angle(),D=k.tileSize(),j=k.locationCoordinate(k.center());i?n.removeAttribute("visibility"):n.setAttribute("visibility","hidden");for(var t=-4;t<=2;t++)h[t].setAttribute("class","zoom"+(t<0?"":"+")+t+" zoom"+(x+t));n.setAttribute("transform","translate("+H.x/2+","+H.y/2+")"+(G?"rotate("+G/Math.PI*180+")":"")+(B?
"scale("+Math.pow(2,B)+")":"")+(m?m.zoomFraction(B):""));var w=k.pointCoordinate(j,R);t=k.pointCoordinate(j,{x:H.x,y:0});var C=k.pointCoordinate(j,H);k=k.pointCoordinate(j,{x:0,y:H.y});if(!B&&!G&&!m){j.column=(Math.round(D.x*j.column)+(H.x&1)/2)/D.x;j.row=(Math.round(D.y*j.row)+(H.y&1)/2)/D.y}var E=l?l(x)-x:0;if(E){B=Math.pow(2,E);w.column*=B;w.row*=B;t.column*=B;t.row*=B;C.column*=B;C.row*=B;k.column*=B;k.row*=B;w.zoom=t.zoom=C.zoom=k.zoom+=E}if(m){w=m.unapply(w);t=m.unapply(t);C=m.unapply(C);k=
m.unapply(k);j=m.unapply(j)}x=c.locks();var y={};for(var v in x)x[v].proxyCount=0;if(i&&E>-5&&E<3){B=1<<w.zoom;if(f){$(w,t,C,0,B,s);$(C,k,w,0,B,s)}else{C=Math.floor((w.column+C.column)/2);k=Math.max(0,Math.min(B-1,Math.floor((t.row+k.row)/2)));t=Math.min(4,w.zoom);C=C>>t<<t;k=k>>t<<t;s(C,C+1,k)}}for(v in y){t=y[v];B=Math.pow(2,t.level=t.zoom-j.zoom);C=D.x*(t.column-j.column*B);k=D.y*(t.row-j.row*B);t.element.setAttribute("transform","translate("+C+","+k+")")}for(v in x)if(!(v in y)){t=c.unload(v);
t.element.parentNode.removeChild(t.element);delete t.proxyRefs}for(v in y){t=y[v];if(t.element.parentNode!=h[t.level]){h[t.level].appendChild(t.element);d.show&&d.show(t)}}}var d={},c=d.cache=r.cache(g,a).size(512),f=true,i=true,l,o,u,n,m,h;d.map=function(q){if(!arguments.length)return u;if(u){if(u==q){n.parentNode.appendChild(n);return d}u.off("move",e).off("resize",e);n.parentNode.removeChild(n);n=h=null}if(u=q){n=u.container().appendChild(r.svg("g"));o&&n.setAttribute("id",o);n.setAttribute("class",
"layer");h={};for(var s=-4;s<=-1;s++)(h[s]=n.appendChild(r.svg("g"))).setAttribute("transform","scale("+Math.pow(2,-s)+")");for(s=2;s>=1;s--)(h[s]=n.appendChild(r.svg("g"))).setAttribute("transform","scale("+Math.pow(2,-s)+")");h[0]=n.appendChild(r.svg("g"));d.init&&d.init(n);u.on("move",e).on("resize",e);e()}return d};d.container=function(){return n};d.id=function(q){if(!arguments.length)return o;o=q;return d};d.visible=function(q){if(!arguments.length)return i;i=q;u&&e();return d};d.transform=function(q){if(!arguments.length)return m;
m=q;u&&e();return d};d.zoom=function(q){if(!arguments.length)return l;l=typeof q=="function"||q==null?q:function(){return q};return d};d.tile=function(q){if(!arguments.length)return f;f=q;return d};d.dispatch=r.dispatch(d);d.on("load",function(q){if(q.tile.proxyRefs){for(var s in q.tile.proxyRefs){var k=q.tile.proxyRefs[s];--k.proxyCount<=0&&c.unload(s)&&k.element.parentNode.removeChild(k.element)}delete q.tile.proxyRefs}});return d};r.image=function(){var g=r.layer(function(e){var d=e.element=r.svg("image"),
c=g.map().tileSize();d.setAttribute("preserveAspectRatio","none");d.setAttribute("width",c.x);d.setAttribute("height",c.y);d.setAttribute("opacity",0);if(typeof a=="function")e.request=r.queue.image(d,a(e),function(){delete e.request;e.ready=true;d.removeAttribute("opacity");g.dispatch({type:"load",tile:e})});else{e.ready=true;d.setAttributeNS(r.ns.xlink,"href",a);g.dispatch({type:"load",tile:e})}},function(e){e.request&&e.request.abort(true)}),a="about:blank";g.url=function(e){if(!arguments.length)return a;
a=typeof e=="string"&&/{.}/.test(e)?r.url(e):e;return g};return g};r.geoJson=function(g){function a(h,q){var s=q({lat:h[1],lon:h[0]}),k=r.svg("circle");k.setAttribute("r",4.5);k.setAttribute("cx",s.x);k.setAttribute("cy",s.y);return k}function e(h,q,s,k){k.push("M");for(var x=0;x<h.length-q;x++){p=s({lat:h[x][1],lon:h[x][0]});k.push(p.x);k.push(",");k.push(p.y);k.push("L")}k.pop()}function d(h,q,s,k){for(var x=0;x<h.length;x++)e(h[x],q,s,k);q&&k.push("Z")}function c(h,q,s,k){for(var x=[],B=0;B<q.length;B++)h(q[B],
s,k,x);if(x.length){h=r.svg("path");h.setAttribute("d",x.join(""));return h}}var f=r.layer(function(h,q){function s(x){var B=u[h.key]||(u[h.key]=[]),H=[];if(x.next)h.request=g(x.next.href,s);for(var G=0;G<x.features.length;G++){var D=x.features[G],j=D.geometry&&D.geometry.type in m&&m[D.geometry.type](D.geometry,q.locationPoint);if(j){D={element:k.appendChild(j),data:D};B.push(D);H.push(D)}}h.ready=true;f.dispatch({type:"load",tile:h,features:H})}var k=h.element=r.svg("g");q=q(h);if(n)s({features:n});
else h.request=g(i(h),s);o&&k.setAttribute("clip-path","url(#"+o+")")},function(h){h.request&&h.request.abort(true);delete u[h.key]}),i=r.url("about:blank"),l=true,o,u={},n;if(!arguments.length)g=r.queue.json;var m={Point:function(h,q){return a(h.coordinates,q)},MultiPoint:function(h,q){for(var s=r.svg("g"),k=0;k<h.coordinates.length;k++)s.appendChild(a(h.coordinates[k],q));return s},LineString:function(h,q){return c(e,[h.coordinates],0,q)},MultiLineString:function(h,q){return c(e,h.coordinates,0,
q)},Polygon:function(h,q){return c(d,[h.coordinates],1,q)},MultiPolygon:function(h,q){return c(d,h.coordinates||h.coords,1,q)},GeometryCollection:function(h,q){for(var s=r.svg("g"),k=0;k<h.geometries.length;k++){var x=h.geometries[k]&&h.geometries[k].type in m&&m[h.geometries[k].type](h.geometries[k],q);x&&s.appendChild(x)}return s}};f.url=function(h){if(!arguments.length)return i;i=typeof h=="string"?r.url(h):h;return f};f.features=function(h){if(!arguments.length)return n;h&&f.tile(false);n=h;return f};
f.clip=function(h){if(!arguments.length)return l;l=h;return f};f.init=function(h){if(l&&f.tile()){var q=f.map().tileSize(),s=h.insertBefore(r.svg("clipPath"),h.firstChild),k=s.appendChild(r.svg("rect"));s.setAttribute("id",o="org.polymaps."+r.id());k.setAttribute("width",q.x);k.setAttribute("height",q.y)}h.setAttribute("fill-rule","evenodd")};f.show=function(h){f.dispatch({type:"show",tile:h,features:u[h.key]||[]})};f.reshow=function(){var h=f.cache.locks();for(var q in h)f.show(h[q])};return f};
r.dblclick=function(){function g(d){var c=e.zoom();c=d.shiftKey?Math.ceil(c)-c-1:1-c+Math.floor(c);e.zoomBy(c,e.mouse(d))}var a={},e;a.map=function(d){if(!arguments.length)return e;e=d;e.container().addEventListener("dblclick",g,false);return a};return a};r.drag=function(){function g(i){f={x:i.clientX,y:i.clientY};d.focusableParent().focus();i.preventDefault();c=document.body.style.cursor;document.body.style.cursor="move"}function a(i){if(f){d.panBy({x:i.clientX-f.x,y:i.clientY-f.y});f.x=i.clientX;
f.y=i.clientY}}var e={},d,c,f;e.map=function(i){if(!arguments.length)return d;d=i;d.container().addEventListener("mousedown",g,false);return e};window.addEventListener("mousemove",a,false);window.addEventListener("mouseup",function(i){if(f){a(i);f=null;document.body.style.cursor=c}},false);return e};r.wheel=function(){function g(){f=null}function a(l){var o=Math.max(-1,Math.min(1,(l.wheelDelta/120||-l.detail)*0.1)),u=i.mouse(l);if(Y<0&&Math.abs(l.wheelDelta)>=4800)Y=1;if(Y==1)o*=0.1;f||(f=i.pointLocation(u));
i.off("move",g);if(c)i.zoomBy(o,u,f);else if(o){var n=Date.now();if(n-d>200){i.zoomBy(o>0?+1:-1,u,f);d=n}}i.on("move",g);l.preventDefault();return false}var e={},d=0,c=true,f,i;e.smooth=function(l){if(!arguments.length)return c;c=l;return e};e.map=function(l){if(!arguments.length)return i;(i=l).on("move",g);var o=i.container();o.addEventListener("mousemove",g,false);o.addEventListener("mousewheel",a,false);o.addEventListener("DOMMouseScroll",a,false);return e};return e};var Y=/WebKit\/533/.test(navigator.userAgent)?
-1:0;r.arrow=function(){function g(m){if(!(m.ctrlKey||m.altKey||m.metaKey)){var h=Date.now(),q=0,s=0,k=0;switch(m.keyCode){case 37:if(!c.left){f=h;c.left=1;c.right||(q=u)}break;case 39:if(!c.right){f=h;c.right=1;c.left||(q=-u)}break;case 38:if(!c.up){f=h;c.up=1;c.down||(s=u)}break;case 40:if(!c.down){f=h;c.down=1;c.up||(s=-u)}break;case 109:case 189:if(!c.plus){f=h;c.plus=1;c.minus||(k=-1)}break;case 61:case 187:if(!c.minus){f=h;c.minus=1;c.plus||(k=1)}break;default:return}if(k){h=n.zoom();n.zoom(k<
0?Math.ceil(h)-1:Math.floor(h)+1)}else if(q||s)n.panBy({x:q,y:s});if(!i&&c.left|c.right|c.up|c.down)i=setInterval(e,o);m.preventDefault()}}function a(m){f=Date.now();switch(m.keyCode){case 37:c.left=0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;case 109:case 189:c.plus=0;break;case 61:case 187:c.minus=0;break;default:return}if(i&&!(c.left|c.right|c.up|c.down))i=clearInterval(i);m.preventDefault()}function e(){if(n)if(!(Date.now()<f+l)){var m=(c.left-c.right)*u,h=(c.up-
c.down)*u;if(m||h)n.panBy({x:m,y:h})}}var d={},c={left:0,right:0,up:0,down:0,plus:0,minus:0},f=0,i,l=250,o=50,u=16,n;d.map=function(m){if(!arguments.length)return n;n=m;var h=n.focusableParent();h.addEventListener("keydown",g,false);h.addEventListener("keyup",a,false);return d};d.speed=function(m){if(!arguments.length)return u;u=m;return d};return d};r.hash=function(){function g(){var i=f.center(),l=f.zoom(),o=Math.max(0,Math.ceil(Math.log(l)/Math.LN2));i="#"+l.toFixed(2)+"/"+i.lat.toFixed(o)+"/"+
i.lon.toFixed(o);if(d!==i)location.replace(d=i)}function a(){if(location.hash!==d){var i=(d=location.hash).substring(1).split("/").map(Number);if(i.length<3||i.some(isNaN))g();else{var l=f.size();f.zoomBy(i[0]-f.zoom(),{x:l.x/2,y:l.y/2},{lat:Math.min(c,Math.max(-c,i[1])),lon:i[2]})}}}var e={},d,c=89.99999999,f;e.map=function(i){if(!arguments.length)return f;f&&f.off("move",g);(f=i).on("move",g);window.addEventListener("hashchange",a,false);location.hash?a():g();return e};return e};r.interact=function(){var g=
{},a=r.drag(),e=r.wheel(),d=r.dblclick(),c=r.arrow();g.map=function(f){a.map(f);e.map(f);d.map(f);c.map(f);return g};return g};r.compass=function(){function g(y){q.setAttribute("class","compass active");w||(w=setInterval(function(){C&&Date.now()>B+H&&E.panBy(C)},G));C&&E.panBy(C);B=Date.now();l(y)}function a(){q.setAttribute("class","compass");if(w){clearInterval(w);w=0}}function e(y){return function(){y?this.setAttribute("class","active"):this.removeAttribute("class");C=y}}function d(y){return function(v){q.setAttribute("class",
"compass active");var z=E.zoom();E.zoom(y<0?Math.ceil(z)-1:Math.floor(z)+1);l(v)}}function c(y){return function(v){E.zoom(y);l(v)}}function f(){this.setAttribute("class","active")}function i(){this.removeAttribute("class")}function l(y){y.stopPropagation();y.preventDefault()}function o(y){var v=Math.SQRT1_2*k,z=k*0.7,A=k*0.2,F=r.svg("g"),I=F.appendChild(r.svg("path")),N=F.appendChild(r.svg("path"));I.setAttribute("class","direction");I.setAttribute("pointer-events","all");I.setAttribute("d","M0,0L"+
v+","+v+"A"+k+","+k+" 0 0,1 "+-v+","+v+"Z");N.setAttribute("class","chevron");N.setAttribute("d","M"+A+","+(z-A)+"L0,"+z+" "+-A+","+(z-A));N.setAttribute("pointer-events","none");F.addEventListener("mousedown",g,false);F.addEventListener("mouseover",e(y),false);F.addEventListener("mouseout",e(null),false);F.addEventListener("dblclick",l,false);return F}function u(y){var v=k*0.4,z=v/2,A=r.svg("g"),F=A.appendChild(r.svg("path")),I=A.appendChild(r.svg("path")),N=A.appendChild(r.svg("path")),M=A.appendChild(r.svg("path"));
F.setAttribute("class","back");F.setAttribute("d","M"+-v+",0V"+-v+"A"+v+","+v+" 0 1,1 "+v+","+-v+"V0Z");I.setAttribute("class","direction");I.setAttribute("d",F.getAttribute("d"));N.setAttribute("class","chevron");N.setAttribute("d","M"+-z+","+-v+"H"+z+(y>0?"M0,"+(-v-z)+"V"+-z:""));M.setAttribute("class","fore");M.setAttribute("fill","none");M.setAttribute("d",F.getAttribute("d"));A.addEventListener("mousedown",d(y),false);A.addEventListener("mouseover",f,false);A.addEventListener("mouseout",i,false);
A.addEventListener("dblclick",l,false);return A}function n(y){var v=k*0.2,z=k*0.4,A=r.svg("g"),F=A.appendChild(r.svg("rect")),I=A.appendChild(r.svg("path"));F.setAttribute("pointer-events","all");F.setAttribute("fill","none");F.setAttribute("x",-z);F.setAttribute("y",-0.75*z);F.setAttribute("width",2*z);F.setAttribute("height",1.5*z);I.setAttribute("class","chevron");I.setAttribute("d","M"+-v+",0H"+v);A.addEventListener("mousedown",c(y),false);A.addEventListener("dblclick",l,false);return A}function m(){if(q){var y=
k+6,v=y,z=E.size();switch(D){case "top-left":break;case "top-right":y=z.x-y;break;case "bottom-left":v=z.y-v;break;case "bottom-right":y=z.x-y;v=z.y-v;break}q.setAttribute("transform","translate("+y+","+v+")");for(var A in s)A==E.zoom()?s[A].setAttribute("class","active"):s[A].removeAttribute("class")}}var h={},q,s={},k=30,x=16,B=0,H=250,G=50,D="top-left",j="small",t="small",w,C,E;h.radius=function(y){if(!arguments.length)return k;k=y;return h};h.speed=function(y){if(!arguments.length)return k;x=
y;return h};h.position=function(y){if(!arguments.length)return D;D=y;return h};h.pan=function(y){if(!arguments.length)return t;t=y;return h};h.zoom=function(y){if(!arguments.length)return j;j=y;return h};h.map=function(y){if(!arguments.length)return E;E=y;E.on("move",m);E.on("resize",m);q=E.container().appendChild(r.svg("g"));q.setAttribute("class","compass");if(t!="none"){var v=q.appendChild(r.svg("g"));v.setAttribute("class","pan");var z=v.appendChild(r.svg("circle"));z.setAttribute("class","back");
z.setAttribute("r",k);v.appendChild(o({x:0,y:-x})).setAttribute("transform","rotate(0)");v.appendChild(o({x:x,y:0})).setAttribute("transform","rotate(90)");v.appendChild(o({x:0,y:x})).setAttribute("transform","rotate(180)");v.appendChild(o({x:-x,y:0})).setAttribute("transform","rotate(270)");v=v.appendChild(r.svg("circle"));v.setAttribute("fill","none");v.setAttribute("class","fore");v.setAttribute("r",k);window.addEventListener("mouseup",a,false)}if(j!="none"){v=q.appendChild(r.svg("g"));v.setAttribute("class",
"zoom");z=-0.5;if(j=="big"){s={};var A=E.zoomRange()[0];for(z=0;A<=E.zoomRange()[1];A++,z++)(s[A]=v.appendChild(n(A))).setAttribute("transform","translate(0,"+-(z+0.75)*k*0.4+")")}A=t=="none"?0.4:2;v.setAttribute("transform","translate(0,"+k*(/^top-/.test(D)?A+(z+0.5)*0.4:-A)+")");v.appendChild(u(+1)).setAttribute("transform","translate(0,"+-(z+0.5)*k*0.4+")");v.appendChild(u(-1)).setAttribute("transform","scale(-1)")}m();return h};return h};r.grid=function(){function g(){var c=d.firstChild,f=e.size(),
i=e.pointLocation(R);e.pointLocation(f);var l=Math.pow(2,4-Math.round(e.zoom()));i.lat=Math.floor(i.lat/l)*l;i.lon=Math.ceil(i.lon/l)*l;for(var o;(o=e.locationPoint(i).x)<=f.x;i.lon+=l){c||(c=d.appendChild(r.svg("line")));c.setAttribute("x1",o);c.setAttribute("x2",o);c.setAttribute("y1",0);c.setAttribute("y2",f.y);c=c.nextSibling}for(;(o=e.locationPoint(i).y)<=f.y;i.lat-=l){c||(c=d.appendChild(r.svg("line")));c.setAttribute("y1",o);c.setAttribute("y2",o);c.setAttribute("x1",0);c.setAttribute("x2",
f.x);c=c.nextSibling}for(;c;){f=c.nextSibling;d.removeChild(c);c=f}}var a={},e,d;a.map=function(c){if(!arguments.length)return e;e=c;e.on("move",g);e.on("resize",g);if(!d){d=r.svg("g");d.setAttribute("class","grid")}e.container().appendChild(d);g();return a};return a}})(org.polymaps);
