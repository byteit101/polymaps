if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(o){function R(){for(var e=0;e<R.maps.length;e++)R.maps[e].resize()}function V(e){return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function W(e){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360))}function Z(e,f){if(e.row>f.row){var a=e;e=f;f=a}return{x0:e.column,y0:e.row,x1:f.column,y1:f.row,dx:f.column-e.column,dy:f.row-e.row}}function ca(e,f,a,g,i){a=Math.max(a,Math.floor(f.y0));g=Math.min(g,Math.ceil(f.y1));if(e.x0==f.x0&&e.y0==f.y0?e.x0+f.dy/e.dy*e.dx<f.x1:e.x1-f.dy/
e.dy*e.dx<f.x0){var c=e;e=f;f=c}c=e.dx/e.dy;var d=f.dx/f.dy,m=e.dx>0,n=f.dx<0;for(a=a;a<g;a++){var s=c*Math.max(0,Math.min(e.dy,a+m-e.y0))+e.x0;i(Math.floor(d*Math.max(0,Math.min(f.dy,a+n-f.y0))+f.x0),Math.ceil(s),a)}}function da(e,f,a,g,i,c){var d=Z(e,f);f=Z(f,a);e=Z(a,e);if(d.dy>f.dy){a=d;d=f;f=a}if(d.dy>e.dy){a=d;d=e;e=a}if(f.dy>e.dy){a=f;f=e;e=a}d.dy&&ca(e,d,g,i,c);f.dy&&ca(e,f,g,i,c)}o.version="2.0+2.3+3";var Y={x:0,y:0};o.id=function(){var e=0;return function(){return++e}}();o.svg=function(e){return document.createElementNS(o.ns.svg,
e)};o.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};o.transform=function(e,f,a,g,i,c){var d={},m,n,s;if(!arguments.length){e=1;f=i=a=0;g=1;c=0}d.zoomFraction=function(l){if(!arguments.length)return n;n=l;m=Math.floor(n+Math.log(Math.sqrt(e*e+f*f+a*a+g*g))/Math.log(2));s=Math.pow(2,-m);return d};d.apply=function(l){var k=Math.pow(2,-l.zoom),u=Math.pow(2,l.zoom-m);return{column:(e*l.column*k+a*l.row*k+i)*u,row:(f*l.column*k+g*l.row*k+c)*u,zoom:l.zoom-m}};d.unapply=function(l){var k=
Math.pow(2,-l.zoom),u=Math.pow(2,l.zoom+m);return{column:(l.column*k*g-l.row*k*a-i*g+c*a)/(e*g-f*a)*u,row:(l.column*k*f-l.row*k*e-i*f+c*e)/(a*f-g*e)*u,zoom:l.zoom+m}};d.toString=function(){return"matrix("+[e*s,f*s,a*s,g*s].join(" ")+" 0 0)"};return d.zoomFraction(0)};o.cache=function(e,f){function a(k){l--;f&&f(k);delete d[k.key];if(k.next)k.next.prev=k.prev;else if(n=k.prev)n.next=null;if(k.prev)k.prev.next=k.next;else if(m=k.next)m.prev=null}function g(){for(var k=n;l>s;k=k.prev){if(!k)break;k.lock||
a(k)}}var i={},c={},d={},m=null,n=null,s=64,l=0;i.peek=function(k){return d[[k.zoom,k.column,k.row].join("/")]};i.load=function(k,u){var y=[k.zoom,k.column,k.row].join("/"),w=d[y];if(w){if(w.prev){if(w.prev.next=w.next)w.next.prev=w.prev;else n=w.prev;w.prev=null;w.next=m;m=m.prev=w}w.lock=1;return c[y]=w}w={key:y,column:k.column,row:k.row,zoom:k.zoom,next:m,prev:null,lock:1};e.call(null,w,u);c[y]=d[y]=w;if(m)m.prev=w;else n=w;m=w;l++;g();return w};i.unload=function(k){if(!(k in c))return false;var u=
c[k];u.lock=0;delete c[k];u.request&&u.request.abort(false)?a(u):g();return u};i.locks=function(){return c};i.size=function(k){if(!arguments.length)return s;s=k;g();return i};return i};o.url=function(e){function f(g){var i=g.zoom<0?1:1<<g.zoom,c=g.column%i;if(c<0)c+=i;return e.replace(/{(.)}/g,function(d,m){switch(m){case "S":return a[(Math.abs(g.zoom)+g.row+c)%a.length];case "Z":return g.zoom;case "X":return c;case "Y":return g.row;case "B":var n=o.map.coordinateLocation({row:g.row,column:c,zoom:g.zoom}),
s=o.map.coordinateLocation({row:g.row+1,column:c+1,zoom:g.zoom}),l=Math.ceil(Math.log(g.zoom)/Math.LN2);return s.lat.toFixed(l)+","+n.lon.toFixed(l)+","+n.lat.toFixed(l)+","+s.lon.toFixed(l)}return m})}var a=[];f.template=function(g){if(!arguments.length)return e;e=g;return f};f.hosts=function(g){if(!arguments.length)return a;a=g;return f};return f};o.dispatch=function(e){var f={};e.on=function(a,g){for(var i=f[a]||(f[a]=[]),c=0;c<i.length;c++)if(i[c].handler==g)return e;i.push({handler:g,on:true});
return e};e.off=function(a,g){var i=f[a];if(i)for(var c=0;c<i.length;c++){var d=i[c];if(d.handler==g){d.on=false;i.splice(c,1);break}}return e};return function(a){var g=f[a.type];if(g){g=g.slice();for(var i=0;i<g.length;i++){var c=g[i];c.on&&c.handler.call(e,a)}}}};o.queue=function(){function e(){if(!(i>=c||!g.length)){i++;g.pop()()}}function f(d){for(var m=0;m<g.length;m++)if(g[m]==d){g.splice(m,1);return true}return false}function a(d,m,n){function s(){l=new XMLHttpRequest;n&&l.overrideMimeType(n);
l.open("GET",d,true);l.onreadystatechange=function(){if(l.readyState==4){i--;l.status<300&&m(l);e()}};l.send(null)}var l;g.push(s);e();return{abort:function(k){if(f(s))return true;if(k&&l){l.abort();return true}return false}}}var g=[],i=0,c=6;return{text:function(d,m,n){return a(d,function(s){s.responseText&&m(s.responseText)},n)},xml:function(d,m){return a(d,function(n){n.responseXML&&m(n.responseXML)},"application/xml")},json:function(d,m){return a(d,function(n){n.responseText&&m(JSON.parse(n.responseText))},
"application/json")},image:function(d,m,n){function s(){l=document.createElement("img");l.onerror=function(){i--;e()};l.onload=function(){i--;n(l);e()};l.src=m;d.setAttributeNS(o.ns.xlink,"href",m)}var l;g.push(s);e();return{abort:function(k){if(f(s))return true;if(k&&l){l.src="about:";return true}return false}}}}}();o.map=function(){function e(){if(u)if(s<u[0])s=u[0];else if(s>u[1])s=u[1];l=s-(s=Math.round(s));k=Math.pow(2,l)}function f(){if(r){var j=45/Math.pow(2,s+l-3),B=Math.max(Math.abs(C*d.x+
w*d.y),Math.abs(h*d.x+F*d.y)),z=V(v-B*j/m.y);B=V(q+B*j/m.y);n.lat=Math.max(z,Math.min(B,n.lat));z=Math.max(Math.abs(C*d.y+w*d.x),Math.abs(h*d.y+F*d.x));n.lon=Math.max(r[0].lon-z*j/m.x,Math.min(r[1].lon+z*j/m.x,n.lon))}}var a={},g,i,c=Y,d=Y,m={x:256,y:256},n={lat:37.76487,lon:-122.41948},s=12,l=0,k=1,u=[1,18],y=0,w=1,C=0,F=1,h=0,v=-180,q=180,r=[{lat:V(v),lon:-Infinity},{lat:V(q),lon:Infinity}];a.locationCoordinate=function(j){j=o.map.locationCoordinate(j);var B=Math.pow(2,s);j.column*=B;j.row*=B;j.zoom+=
s;return j};a.coordinateLocation=o.map.coordinateLocation;a.coordinatePoint=function(j,B){var z=Math.pow(2,s-B.zoom),E=Math.pow(2,s-j.zoom),A=(B.column*z-j.column*E)*m.x*k;z=(B.row*z-j.row*E)*m.y*k;return{x:d.x+w*A-C*z,y:d.y+C*A+w*z}};a.pointCoordinate=function(j,B){var z=Math.pow(2,s-j.zoom),E=(B.x-d.x)/k,A=(B.y-d.y)/k;return{column:j.column*z+(F*E-h*A)/m.x,row:j.row*z+(h*E+F*A)/m.y,zoom:s}};a.locationPoint=function(j){var B=Math.pow(2,s+l-3)/45,z=(j.lon-n.lon)*B*m.x;j=(W(n.lat)-W(j.lat))*B*m.y;
return{x:d.x+w*z-C*j,y:d.y+C*z+w*j}};a.pointLocation=function(j){var B=45/Math.pow(2,s+l-3),z=(j.x-d.x)*B;j=(j.y-d.y)*B;return{lon:n.lon+(F*z-h*j)/m.x,lat:V(W(n.lat)-(h*z+F*j)/m.y)}};var x=o.svg("rect");x.setAttribute("visibility","hidden");x.setAttribute("pointer-events","all");a.container=function(j){if(!arguments.length)return g;g=j;g.setAttribute("class","map");g.appendChild(x);return a.resize()};a.focusableParent=function(){for(var j=g;j;j=j.parentNode)if(j.tabIndex>=0)return j;return window};
a.mouse=function(j){var B=(g.ownerSVGElement||g).createSVGPoint();if($<0&&(window.scrollX||window.scrollY)){var z=document.body.appendChild(o.svg("svg"));z.style.position="absolute";z.style.top=z.style.left="0px";var E=z.getScreenCTM();$=!(E.f||E.e);document.body.removeChild(z)}if($){B.x=j.pageX;B.y=j.pageY}else{B.x=j.clientX;B.y=j.clientY}return B.matrixTransform(g.getScreenCTM().inverse())};a.size=function(j){if(!arguments.length)return c;i=j;return a.resize()};a.resize=function(){if(i){c=i;R.remove(a)}else{var j=
g.ownerSVGElement||g;if(j.offsetWidth==null){x.setAttribute("width","100%");x.setAttribute("height","100%");j=x}b=j.getBoundingClientRect();c={x:b.width,y:b.height};R.add(a)}x.setAttribute("width",c.x);x.setAttribute("height",c.y);d={x:c.x/2,y:c.y/2};f();a.dispatch({type:"resize"});return a};a.tileSize=function(j){if(!arguments.length)return m;m=j;a.dispatch({type:"move"});return a};a.center=function(j){if(!arguments.length)return n;n=j;f();a.dispatch({type:"move"});return a};a.panBy=function(j){var B=
45/Math.pow(2,s+l-3),z=j.x*B;j=j.y*B;return a.center({lon:n.lon+(h*j-F*z)/m.x,lat:V(W(n.lat)+(h*z+F*j)/m.y)})};a.centerRange=function(j){if(!arguments.length)return r;if(r=j){v=r[0].lat>-90?W(r[0].lat):-Infinity;q=r[0].lat<90?W(r[1].lat):Infinity}else{v=-Infinity;q=Infinity}f();a.dispatch({type:"move"});return a};a.zoom=function(j){if(!arguments.length)return s+l;s=j;e();return a.center(n)};a.zoomBy=function(j,B,z){if(arguments.length<2)return a.zoom(s+l+j);if(arguments.length<3)z=a.pointLocation(B);
s=s+l+j;e();var E=a.locationPoint(z);return a.panBy({x:B.x-E.x,y:B.y-E.y})};a.zoomRange=function(j){if(!arguments.length)return u;u=j;return a.zoom(s+l)};a.extent=function(j){if(!arguments.length)return[a.pointLocation({x:0,y:c.y}),a.pointLocation({x:c.x,y:0})];var B=a.locationPoint(j[0]),z=a.locationPoint(j[1]),E=Math.max((z.x-B.x)/c.x,(B.y-z.y)/c.y);B=a.pointLocation({x:(B.x+z.x)/2,y:(B.y+z.y)/2});s=s+l-Math.log(E)/Math.log(2);e();return a.center(B)};a.angle=function(j){if(!arguments.length)return y;
y=j;w=Math.cos(y);C=Math.sin(y);F=Math.cos(-y);h=Math.sin(-y);f();a.dispatch({type:"move"});return a};a.add=function(j){j.map(a);return a};a.remove=function(j){j.map(null);return a};a.dispatch=o.dispatch(a);return a};R.maps=[];R.add=function(e){for(var f=0;f<R.maps.length;f++)if(R.maps[f]==e)return;R.maps.push(e)};R.remove=function(e){for(var f=0;f<R.maps.length;f++)if(R.maps[f]==e){R.maps.splice(f,1);return}};window.addEventListener("resize",R,false);o.map.locationCoordinate=function(e){var f=1/
360;return{column:(e.lon+180)*f,row:(180-W(e.lat))*f,zoom:0}};o.map.coordinateLocation=function(e){var f=45/Math.pow(2,e.zoom-3);return{lon:f*e.column-180,lat:V(180-f*e.row)}};var $=/WebKit/.test(navigator.userAgent)?-1:0;o.layer=function(e,f){function a(h){for(var v=C[0].nextSibling;w<h;w++){u.insertBefore(C[-4],v);u.insertBefore(C[2],v);u.insertBefore(C[1],v);for(var q=C[-4],r=-4;r<2;)C[r]=C[++r];C[r]=q}}function g(h){for(var v=C[0].nextSibling;w>h;w--){u.insertBefore(C[-1],v);u.insertBefore(C[2],
C[-4]);for(var q=C[2],r=2;r>-4;)C[r]=C[--r];C[r]=q}}function i(){function h(M){var H=M.zoom,S=H<0?1:1<<H,T=M.column%S,t=M.row;if(T<0)T+=S;return{locationPoint:function(D){D=o.map.locationCoordinate(D);var G=Math.pow(2,H-D.zoom);return{x:z.x*(G*D.column-T),y:z.y*(G*D.row-t)}}}}function v(M,H,S){var T=Q.zoom,t=2-U,D=4+U;for(M=M;M<H;M++){var G=d.load({column:M,row:S,zoom:T},h);if(!G.ready&&!(G.key in O)){G.proxyRefs={};for(var J,K,N,P=1;P<=t;P++){K=true;for(var X=0,ea=1<<P;X<=ea;X++)for(var aa=0;aa<=
ea;aa++)if((N=d.peek(J={column:(M<<P)+aa,row:(S<<P)+X,zoom:T+P}))&&N.ready){O[N.key]=d.load(J);N.proxyCount++;G.proxyRefs[N.key]=N}else K=false;if(K)break}if(!K)for(P=1;P<=D;P++)if((N=d.peek(J={column:M>>P,row:S>>P,zoom:T-P}))&&N.ready){O[N.key]=d.load(J);N.proxyCount++;G.proxyRefs[N.key]=N;break}}O[G.key]=G}}var q=c.map(),r=q.zoom(),x=r-(r=Math.round(r)),j=q.size(),B=q.angle(),z=q.tileSize(),E=q.locationCoordinate(q.center());n?u.removeAttribute("visibility"):u.setAttribute("visibility","hidden");
if(w!=r){if(w<r)a(r);else if(w>r)g(r);else w=r;for(var A=-4;A<=2;A++){var L=C[A];L.setAttribute("class","zoom"+(A<0?"":"+")+A+" zoom"+(r+A));L.setAttribute("transform","scale("+Math.pow(2,-A)+")")}}u.setAttribute("transform","translate("+j.x/2+","+j.y/2+")"+(B?"rotate("+B/Math.PI*180+")":"")+(x?"scale("+Math.pow(2,x)+")":"")+(y?y.zoomFraction(x):""));var Q=q.pointCoordinate(E,Y);A=q.pointCoordinate(E,{x:j.x,y:0});L=q.pointCoordinate(E,j);q=q.pointCoordinate(E,{x:0,y:j.y});if(!x&&!B&&!y){E.column=
(Math.round(z.x*E.column)+(j.x&1)/2)/z.x;E.row=(Math.round(z.y*E.row)+(j.y&1)/2)/z.y}var U=s?s(r)-r:0;if(U){x=Math.pow(2,U);Q.column*=x;Q.row*=x;A.column*=x;A.row*=x;L.column*=x;L.row*=x;q.column*=x;q.row*=x;Q.zoom=A.zoom=L.zoom=q.zoom+=U}if(y){Q=y.unapply(Q);A=y.unapply(A);L=y.unapply(L);q=y.unapply(q);E=y.unapply(E)}r=d.locks();var O={};for(var I in r)r[I].proxyCount=0;if(n&&U>-5&&U<3){x=Q.zoom<0?1:1<<Q.zoom;if(m){da(Q,A,L,0,x,v);da(L,q,Q,0,x,v)}else{L=Math.floor((Q.column+L.column)/2);q=Math.max(0,
Math.min(x-1,Math.floor((A.row+q.row)/2)));A=Math.min(4,Q.zoom);L=L>>A<<A;q=q>>A<<A;v(L,L+1,q)}}for(I in O){A=O[I];x=Math.pow(2,A.level=A.zoom-E.zoom);L=z.x*(A.column-E.column*x);q=z.y*(A.row-E.row*x);A.element.setAttribute("transform","translate("+L+","+q+")")}for(I in r)if(!(I in O)){A=d.unload(I);A.element.parentNode.removeChild(A.element);delete A.proxyRefs}for(I in O){A=O[I];if(A.element.parentNode!=C[A.level]){C[A.level].appendChild(A.element);c.show&&c.show(A)}}}var c={},d=c.cache=o.cache(e,
f).size(512),m=true,n=true,s,l,k,u=o.svg("g"),y,w,C={};u.setAttribute("class","layer");for(var F=-4;F<=-1;F++)C[F]=u.appendChild(o.svg("g"));for(F=2;F>=1;F--)C[F]=u.appendChild(o.svg("g"));C[0]=u.appendChild(o.svg("g"));c.map=function(h){if(!arguments.length)return k;if(k){if(k==h){u.parentNode.appendChild(u);return c}k.off("move",i).off("resize",i);u.parentNode.removeChild(u)}if(k=h){k.container().appendChild(u);c.init&&c.init(u);k.on("move",i).on("resize",i);i()}return c};c.container=function(){return u};
c.id=function(h){if(!arguments.length)return l;l=h;return c};c.visible=function(h){if(!arguments.length)return n;n=h;k&&i();return c};c.transform=function(h){if(!arguments.length)return y;y=h;k&&i();return c};c.zoom=function(h){if(!arguments.length)return s;s=typeof h=="function"||h==null?h:function(){return h};return c};c.tile=function(h){if(!arguments.length)return m;m=h;return c};c.dispatch=o.dispatch(c);c.on("load",function(h){if(h.tile.proxyRefs){for(var v in h.tile.proxyRefs){var q=h.tile.proxyRefs[v];
--q.proxyCount<=0&&d.unload(v)&&q.element.parentNode.removeChild(q.element)}delete h.tile.proxyRefs}});return c};o.image=function(){var e=o.layer(function(a){var g=a.element=o.svg("image"),i=e.map().tileSize();g.setAttribute("preserveAspectRatio","none");g.setAttribute("width",i.x);g.setAttribute("height",i.y);g.setAttribute("opacity",0);if(typeof f=="function")a.request=o.queue.image(g,f(a),function(c){delete a.request;a.ready=true;a.img=c;g.removeAttribute("opacity");e.dispatch({type:"load",tile:a})});
else{a.ready=true;g.setAttributeNS(o.ns.xlink,"href",f);e.dispatch({type:"load",tile:a})}},function(a){a.request&&a.request.abort(true)}),f="about:blank";e.url=function(a){if(!arguments.length)return f;f=typeof a=="string"&&/{.}/.test(a)?o.url(a):a;return e};return e};o.geoJson=function(e){function f(h,v){return h&&h.type in C&&C[h.type](h,v)}function a(h,v){var q=v({lat:h[1],lon:h[0]}),r=o.svg("circle");r.setAttribute("r",4.5);r.setAttribute("cx",q.x);r.setAttribute("cy",q.y);return r}function g(h,
v,q,r){r.push("M");for(var x=0;x<h.length-v;x++){p=q({lat:h[x][1],lon:h[x][0]});r.push(p.x);r.push(",");r.push(p.y);r.push("L")}r.pop()}function i(h,v,q,r){for(var x=0;x<h.length;x++)g(h[x],v,q,r);v&&r.push("Z")}function c(h,v,q,r){for(var x=[],j=0;j<v.length;j++)h(v[j],q,r,x);if(x.length){h=o.svg("path");h.setAttribute("d",x.join(""));return h}}var d=o.layer(function(h,v){function q(x){var j=[];if(x.next)h.request=e(x.next.href,q);switch(x.type){case "FeatureCollection":for(var B=0;B<x.features.length;B++){var z=
x.features[B],E=f(z.geometry,v.locationPoint);E&&j.push({element:r.appendChild(E),data:z})}break;case "Feature":(E=f(x.geometry,v.locationPoint))&&j.push({element:r.appendChild(E),data:x});break;default:(E=f(x,v.locationPoint))&&j.push({element:r.appendChild(E),data:{type:"Feature",geometry:x}});break}h.ready=true;j.push.apply(y[h.key]||(y[h.key]=[]),j);d.dispatch({type:"load",tile:h,features:j})}var r=h.element=o.svg("g");v=v(h);if(w)q({type:"FeatureCollection",features:w});else h.request=e(typeof n==
"function"?n(h):n,q);l&&r.setAttribute("clip-path","url(#"+l+")")},function(h){h.request&&h.request.abort(true);delete y[h.key]}),m=d.container(),n="about:blank",s=true,l,k,u,y={},w;m.setAttribute("fill-rule","evenodd");if(!arguments.length)e=o.queue.json;var C={Point:function(h,v){return a(h.coordinates,v)},MultiPoint:function(h,v){for(var q=o.svg("g"),r=0;r<h.coordinates.length;r++)q.appendChild(a(h.coordinates[r],v));return q},LineString:function(h,v){return c(g,[h.coordinates],0,v)},MultiLineString:function(h,
v){return c(g,h.coordinates,0,v)},Polygon:function(h,v){return c(i,[h.coordinates],1,v)},MultiPolygon:function(h,v){return c(i,h.coordinates||h.coords,1,v)},GeometryCollection:function(h,v){for(var q=o.svg("g"),r=0;r<h.geometries.length;r++){var x=f(h.geometries[r],v);x&&q.appendChild(x)}return q}};d.url=function(h){if(!arguments.length)return n;n=typeof h=="string"&&/{.}/.test(h)?o.url(h):h;typeof n=="string"&&d.tile(false);return d};d.features=function(h){if(!arguments.length)return w;h&&d.tile(false);
w=h;return d};d.clip=function(h){if(!arguments.length)return s;s=h;return d};var F=d.map;d.map=function(h){if(h)if(s&&d.tile()){if(!k){k=m.insertBefore(o.svg("clipPath"),m.firstChild);u=k.appendChild(o.svg("rect"));k.setAttribute("id",l="org.polymaps."+o.id())}var v=h.tileSize();u.setAttribute("width",v.x);u.setAttribute("height",v.y)}else if(k){m.removeChild(k);k=u=l=null}return F.apply(d,arguments)};d.show=function(h){d.dispatch({type:"show",tile:h,features:y[h.key]||[]})};d.reshow=function(){var h=
d.cache.locks();for(var v in h)d.show(h[v])};return d};o.dblclick=function(){function e(c){var d=g.zoom();d=c.shiftKey?Math.ceil(d)-d-1:1-d+Math.floor(d);a==="mouse"?g.zoomBy(d,g.mouse(c)):g.zoomBy(d)}var f={},a="mouse",g,i;f.zoom=function(c){if(!arguments.length)return a;a=c;return f};f.map=function(c){if(!arguments.length)return g;if(g){i.removeEventListener("dblclick",e,false);i=null}if(g=c){i=g.container();i.addEventListener("dblclick",e,false)}return f};return f};o.drag=function(){function e(d){if(!d.shiftKey){c=
{x:d.clientX,y:d.clientY};g.focusableParent().focus();d.preventDefault();document.body.style.setProperty("cursor","move",null)}}function f(d){if(c){g.panBy({x:d.clientX-c.x,y:d.clientY-c.y});c.x=d.clientX;c.y=d.clientY}}var a={},g,i,c;a.map=function(d){if(!arguments.length)return g;if(g){i.removeEventListener("mousedown",e,false);i=null}if(g=d){i=g.container();i.addEventListener("mousedown",e,false)}return a};window.addEventListener("mousemove",f,false);window.addEventListener("mouseup",function(d){if(c){f(d);
c=null;document.body.style.removeProperty("cursor")}},false);return a};o.wheel=function(){function e(){m=null}function f(l){var k=(l.wheelDelta/120||-l.detail)*0.1,u=n.mouse(l);if(ba<0){var y=Date.now(),w=y-i;if(w>9&&Math.abs(l.wheelDelta)/w>=50)ba=1;i=y}if(ba==1)k*=0.03;m||(m=n.pointLocation(u));n.off("move",e);if(c)d==="mouse"?n.zoomBy(k,u,m):n.zoomBy(k);else if(k){y=Date.now();if(y-g>200){k=k>0?+1:-1;d==="mouse"?n.zoomBy(k,u,m):n.zoomBy(k);g=y}}n.on("move",e);l.preventDefault();return false}var a=
{},g=0,i=0,c=true,d="mouse",m,n,s;a.smooth=function(l){if(!arguments.length)return c;c=l;return a};a.zoom=function(l){if(!arguments.length)return d;d=l;return a};a.map=function(l){if(!arguments.length)return n;if(n){s.removeEventListener("mousemove",e,false);s.removeEventListener("mousewheel",f,false);s.removeEventListener("DOMMouseScroll",f,false);s=null;n.off("move",e)}if(n=l){n.on("move",e);s=n.container();s.addEventListener("mousemove",e,false);s.addEventListener("mousewheel",f,false);s.addEventListener("DOMMouseScroll",
f,false)}return a};return a};var ba=/WebKit\/533/.test(navigator.userAgent)?-1:0;o.arrow=function(){function e(y){if(!(y.ctrlKey||y.altKey||y.metaKey)){var w=Date.now(),C=0,F=0;switch(y.keyCode){case 37:if(!c.left){d=w;c.left=1;c.right||(C=l)}break;case 39:if(!c.right){d=w;c.right=1;c.left||(C=-l)}break;case 38:if(!c.up){d=w;c.up=1;c.down||(F=l)}break;case 40:if(!c.down){d=w;c.down=1;c.up||(F=-l)}break;default:return}if(C||F)k.panBy({x:C,y:F});if(!m&&c.left|c.right|c.up|c.down)m=setInterval(g,s);
y.preventDefault()}}function f(y){d=Date.now();switch(y.keyCode){case 37:c.left=0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;default:return}if(m&&!(c.left|c.right|c.up|c.down))m=clearInterval(m);y.preventDefault()}function a(y){switch(y.charCode){case 45:case 95:k.zoom(Math.ceil(k.zoom())-1);break;case 43:case 61:k.zoom(Math.floor(k.zoom())+1);break;default:return}y.preventDefault()}function g(){if(k)if(!(Date.now()<d+n)){var y=(c.left-c.right)*l,w=(c.up-c.down)*l;if(y||
w)k.panBy({x:y,y:w})}}var i={},c={left:0,right:0,up:0,down:0},d=0,m,n=250,s=50,l=16,k,u;i.map=function(y){if(!arguments.length)return k;if(k){u.removeEventListener("keypress",a,false);u.removeEventListener("keydown",e,false);u.removeEventListener("keyup",f,false);u=null}if(k=y){u=k.focusableParent();u.addEventListener("keypress",a,false);u.addEventListener("keydown",e,false);u.addEventListener("keyup",f,false)}return i};i.speed=function(y){if(!arguments.length)return l;l=y;return i};return i};o.hash=
function(){function e(){var d=c.center(),m=c.zoom(),n=Math.max(0,Math.ceil(Math.log(m)/Math.LN2));d="#"+m.toFixed(2)+"/"+d.lat.toFixed(n)+"/"+d.lon.toFixed(n);if(g!==d)location.replace(g=d)}function f(){if(location.hash!==g){var d=(g=location.hash).substring(1).split("/").map(Number);if(d.length<3||d.some(isNaN))e();else{var m=c.size();c.zoomBy(d[0]-c.zoom(),{x:m.x/2,y:m.y/2},{lat:Math.min(i,Math.max(-i,d[1])),lon:d[2]})}}}var a={},g,i=89.99999999,c;a.map=function(d){if(!arguments.length)return c;
if(c){c.off("move",e);window.removeEventListener("hashchange",f,false)}if(c=d){c.on("move",e);window.addEventListener("hashchange",f,false);location.hash?f():e()}return a};return a};o.interact=function(){var e={},f=o.drag(),a=o.wheel(),g=o.dblclick(),i=o.arrow();e.map=function(c){f.map(c);a.map(c);g.map(c);i.map(c);return e};return e};o.compass=function(){function e(t){h.setAttribute("class","compass active");Q||(Q=setInterval(f,B));U&&H.panBy(U);x=Date.now();return l(t)}function f(){U&&Date.now()>
x+j&&H.panBy(U)}function a(t){if(t.shiftKey){I={x0:H.mouse(t)};H.focusableParent().focus();return l(t)}}function g(t){if(I){I.x1=H.mouse(t);M.setAttribute("x",Math.min(I.x0.x,I.x1.x));M.setAttribute("y",Math.min(I.x0.y,I.x1.y));M.setAttribute("width",Math.abs(I.x0.x-I.x1.x));M.setAttribute("height",Math.abs(I.x0.y-I.x1.y));M.removeAttribute("display")}}function i(){h.setAttribute("class","compass");if(I){if(I.x1){H.extent([H.pointLocation({x:Math.min(I.x0.x,I.x1.x),y:Math.max(I.x0.y,I.x1.y)}),H.pointLocation({x:Math.max(I.x0.x,
I.x1.x),y:Math.min(I.x0.y,I.x1.y)})]);M.setAttribute("display","none")}I=null}if(Q){clearInterval(Q);Q=0}}function c(t){return function(){t?this.setAttribute("class","active"):this.removeAttribute("class");U=t}}function d(t){return function(D){h.setAttribute("class","compass active");var G=H.zoom();H.zoom(t<0?Math.ceil(G)-1:Math.floor(G)+1);return l(D)}}function m(t){return function(D){H.zoom(t);return l(D)}}function n(){this.setAttribute("class","active")}function s(){this.removeAttribute("class")}
function l(t){t.stopPropagation();t.preventDefault();return false}function k(t){var D=Math.SQRT1_2*q,G=q*0.7,J=q*0.2,K=o.svg("g"),N=K.appendChild(o.svg("path")),P=K.appendChild(o.svg("path"));N.setAttribute("class","direction");N.setAttribute("pointer-events","all");N.setAttribute("d","M0,0L"+D+","+D+"A"+q+","+q+" 0 0,1 "+-D+","+D+"Z");P.setAttribute("class","chevron");P.setAttribute("d","M"+J+","+(G-J)+"L0,"+G+" "+-J+","+(G-J));P.setAttribute("pointer-events","none");K.addEventListener("mousedown",
e,false);K.addEventListener("mouseover",c(t),false);K.addEventListener("mouseout",c(null),false);K.addEventListener("dblclick",l,false);return K}function u(t){var D=q*0.4,G=D/2,J=o.svg("g"),K=J.appendChild(o.svg("path")),N=J.appendChild(o.svg("path")),P=J.appendChild(o.svg("path")),X=J.appendChild(o.svg("path"));K.setAttribute("class","back");K.setAttribute("d","M"+-D+",0V"+-D+"A"+D+","+D+" 0 1,1 "+D+","+-D+"V0Z");N.setAttribute("class","direction");N.setAttribute("d",K.getAttribute("d"));P.setAttribute("class",
"chevron");P.setAttribute("d","M"+-G+","+-D+"H"+G+(t>0?"M0,"+(-D-G)+"V"+-G:""));X.setAttribute("class","fore");X.setAttribute("fill","none");X.setAttribute("d",K.getAttribute("d"));J.addEventListener("mousedown",d(t),false);J.addEventListener("mouseover",n,false);J.addEventListener("mouseout",s,false);J.addEventListener("dblclick",l,false);return J}function y(t){var D=q*0.2,G=q*0.4,J=o.svg("g"),K=J.appendChild(o.svg("rect")),N=J.appendChild(o.svg("path"));K.setAttribute("pointer-events","all");K.setAttribute("fill",
"none");K.setAttribute("x",-G);K.setAttribute("y",-0.75*G);K.setAttribute("width",2*G);K.setAttribute("height",1.5*G);N.setAttribute("class","chevron");N.setAttribute("d","M"+-D+",0H"+D);J.addEventListener("mousedown",m(t),false);J.addEventListener("dblclick",l,false);return J}function w(){var t=q+6,D=t,G=H.size();switch(z){case "top-left":break;case "top-right":t=G.x-t;break;case "bottom-left":D=G.y-D;break;case "bottom-right":t=G.x-t;D=G.y-D;break}t="translate("+t+","+D+")";O&&O.setAttribute("transform",
t);A&&A.setAttribute("transform",t);for(var J in v)J==H.zoom()?v[J].setAttribute("class","active"):v[J].removeAttribute("class")}function C(){for(;h.lastChild;)h.removeChild(h.lastChild);h.appendChild(M);if(L!="none"){O=h.appendChild(o.svg("g"));O.setAttribute("class","pan");var t=O.appendChild(o.svg("circle"));t.setAttribute("class","back");t.setAttribute("r",q);O.appendChild(k({x:0,y:-r})).setAttribute("transform","rotate(0)");O.appendChild(k({x:r,y:0})).setAttribute("transform","rotate(90)");O.appendChild(k({x:0,
y:r})).setAttribute("transform","rotate(180)");O.appendChild(k({x:-r,y:0})).setAttribute("transform","rotate(270)");t=O.appendChild(o.svg("circle"));t.setAttribute("fill","none");t.setAttribute("class","fore");t.setAttribute("r",q)}else O=null;if(E!="none"){A=h.appendChild(o.svg("g"));A.setAttribute("class","zoom");t=-0.5;if(E=="big"){v={};var D=H.zoomRange()[0];for(t=0;D<=H.zoomRange()[1];D++,t++)(v[D]=A.appendChild(y(D))).setAttribute("transform","translate(0,"+-(t+0.75)*q*0.4+")")}D=L=="none"?
0.4:2;A.setAttribute("transform","translate(0,"+q*(/^top-/.test(z)?D+(t+0.5)*0.4:-D)+")");A.appendChild(u(+1)).setAttribute("transform","translate(0,"+-(t+0.5)*q*0.4+")");A.appendChild(u(-1)).setAttribute("transform","scale(-1)")}else A=null;w()}var F={},h=o.svg("g"),v={},q=30,r=16,x=0,j=250,B=50,z="top-left",E="small",A,L="small",Q,U,O,I,M=o.svg("rect"),H,S,T;h.setAttribute("class","compass");M.setAttribute("class","back fore");M.setAttribute("pointer-events","none");M.setAttribute("display","none");
F.radius=function(t){if(!arguments.length)return q;q=t;H&&C();return F};F.speed=function(t){if(!arguments.length)return q;r=t;return F};F.position=function(t){if(!arguments.length)return z;z=t;H&&C();return F};F.pan=function(t){if(!arguments.length)return L;L=t;H&&C();return F};F.zoom=function(t){if(!arguments.length)return E;E=t;H&&C();return F};F.map=function(t){if(!arguments.length)return H;if(H){S.removeEventListener("mousedown",a,false);S.removeChild(h);S=null;T.removeEventListener("mousemove",
g,false);T.removeEventListener("mouseup",i,false);T=null;H.off("move",w).off("resize",w)}if(H=t){S=H.container();S.appendChild(h);S.addEventListener("mousedown",a,false);T=S.ownerDocument.defaultView;T.addEventListener("mousemove",g,false);T.addEventListener("mouseup",i,false);H.on("move",w).on("resize",w);C()}return F};return F};o.grid=function(){function e(){var i=g.firstChild,c=a.size(),d=a.pointLocation(Y);a.pointLocation(c);var m=Math.pow(2,4-Math.round(a.zoom()));d.lat=Math.floor(d.lat/m)*m;
d.lon=Math.ceil(d.lon/m)*m;for(var n;(n=a.locationPoint(d).x)<=c.x;d.lon+=m){i||(i=g.appendChild(o.svg("line")));i.setAttribute("x1",n);i.setAttribute("x2",n);i.setAttribute("y1",0);i.setAttribute("y2",c.y);i=i.nextSibling}for(;(n=a.locationPoint(d).y)<=c.y;d.lat-=m){i||(i=g.appendChild(o.svg("line")));i.setAttribute("y1",n);i.setAttribute("y2",n);i.setAttribute("x1",0);i.setAttribute("x2",c.x);i=i.nextSibling}for(;i;){c=i.nextSibling;g.removeChild(i);i=c}}var f={},a,g=o.svg("g");g.setAttribute("class",
"grid");f.map=function(i){if(!arguments.length)return a;if(a){g.parentNode.removeChild(g);a.off("move",e).off("resize",e)}if(a=i){a.on("move",e).on("resize",e);a.container().appendChild(g);a.dispatch({type:"move"})}return f};return f}})(org.polymaps);
